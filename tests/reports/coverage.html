<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detailed Coverage Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        h3 {
            color: #7f8c8d;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        h4 {
            color: #e74c3c;
            margin-top: 20px;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        .file-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ecf0f1;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .file-header {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            padding: 15px;
            margin: -20px -20px 20px -20px;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
        }
        .coverage-info {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9em;
            margin-left: 10px;
        }
        .code-block {
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            overflow-x: auto;
            white-space: pre;
            border: 1px solid #3c3c3c;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            position: relative;
        }
        .code-block::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 30px;
            background: linear-gradient(180deg, #2d2d30 0%, #1e1e1e 100%);
            border-radius: 8px 8px 0 0;
            border-bottom: 1px solid #3c3c3c;
        }
        .code-block::after {
            content: '‚óè ‚óè ‚óè';
            position: absolute;
            top: 8px;
            left: 15px;
            color: #858585;
            font-size: 12px;
            letter-spacing: 2px;
        }
        .line-number {
            display: inline-block;
            width: 60px;
            color: #858585;
            text-align: right;
            margin-right: 20px;
            user-select: none;
            font-weight: normal;
            border-right: 1px solid #3c3c3c;
            padding-right: 15px;
        }
        .line-covered {
            background-color: rgba(46, 160, 67, 0.15);
            color: #d4d4d4;
            border-left: 3px solid #2ea043;
        }
        .line-uncovered {
            background-color: rgba(248, 81, 73, 0.15);
            color: #d4d4d4;
            border-left: 3px solid #f85149;
        }
        .line-context {
            background-color: transparent;
            color: #858585;
            border-left: 3px solid transparent;
        }
        .line-covered:hover {
            background-color: rgba(46, 160, 67, 0.25);
        }
        .line-uncovered:hover {
            background-color: rgba(248, 81, 73, 0.25);
        }
        .line-context:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        /* VS Code-like syntax highlighting */
        .code-block .keyword { color: #569cd6; }
        .code-block .string { color: #ce9178; }
        .code-block .comment { color: #6a9955; }
        .code-block .function { color: #dcdcaa; }
        .code-block .number { color: #b5cea8; }
        .code-block .operator { color: #d4d4d4; }
        .code-block .class { color: #4ec9b0; }
        
        /* VS Code-like scrollbar */
        .code-block::-webkit-scrollbar {
            width: 14px;
            height: 14px;
        }
        .code-block::-webkit-scrollbar-track {
            background: #1e1e1e;
        }
        .code-block::-webkit-scrollbar-thumb {
            background: #424242;
            border-radius: 7px;
            border: 2px solid #1e1e1e;
        }
        .code-block::-webkit-scrollbar-thumb:hover {
            background: #4f4f4f;
        }
        .code-block::-webkit-scrollbar-corner {
            background: #1e1e1e;
        }
        .legend {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .legend-color {
            width: 30px;
            height: 20px;
            margin-right: 15px;
            border-radius: 2px;
            display: inline-block;
        }
        .recommendations {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .recommendations h3 {
            color: #856404;
            margin-top: 0;
        }
        .recommendations ul {
            color: #856404;
        }
        .back-link {
            display: inline-block;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 6px;
            margin: 20px 0;
            transition: transform 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .back-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ecf0f1;
            text-align: center;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
<h1>üìä Detailed Coverage Report</h1>
<p>This report shows all uncovered code lines with context, highlighting which lines are covered and which are not.</p>
<div class="stats-grid">

    <div class="stat-card">
        <div class="stat-value">84.34%</div>
        <div class="stat-label">Total Coverage</div>
    </div>

    <div class="stat-card">
        <div class="stat-value">2,963</div>
        <div class="stat-label">Total Statements</div>
    </div>

    <div class="stat-card">
        <div class="stat-value">464</div>
        <div class="stat-label">Missing Statements</div>
    </div>

    <div class="stat-card">
        <div class="stat-value">10</div>
        <div class="stat-label">Files with Issues</div>
    </div>
</div>
<div class="legend">
<h3>üìã Legend</h3>
<div class="legend-item">
<div class="legend-color" style="background-color: rgba(46, 160, 67, 0.15); border-left: 3px solid #2ea043;"></div>
<span>‚úÖ Covered lines: Code that was executed during testing</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background-color: rgba(248, 81, 73, 0.15); border-left: 3px solid #f85149;"></div>
<span>‚ùå Uncovered lines: Code that was not executed during testing</span>
</div>
<div class="legend-item">
<div class="legend-color" style="background-color: transparent; border-left: 3px solid transparent;"></div>
<span>üìù Context lines: Code before and after uncovered lines for understanding</span>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/models.py
<span class="coverage-info">86.54% (225/260 lines covered)</span>
</div>
<h4>Line 27</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 17</span>    value: Optional[str] = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number"> 18</span>
</div>
<div class="line-context">
<span class="line-number"> 19</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__repr__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 20</span>        <span class=<span class="string">"keyword"</span>>if</span> self.value <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number"> 21</span>            <span class=<span class="string">"keyword"</span>>return</span> f<span class="string">"<span class="function">Field</span>(name={self.name}, type={self.type}, value={self.value})"</span>
</div>
<div class="line-context">
<span class="line-number"> 22</span>        <span class=<span class="string">"keyword"</span>>return</span> f<span class="string">"<span class="function">Field</span>(name={self.name}, type={self.type})"</span>
</div>
<div class="line-context">
<span class="line-number"> 23</span>
</div>
<div class="line-context">
<span class="line-number"> 24</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 25</span>        <span class="string">""</span><span class="string">"Validate field data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 26</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-uncovered">
<span class="line-number"> 27</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 28</span>                f<span class="string">"Field name must be a string, got {<span class="function">type</span>(self.name)}: {<span class="function">repr</span>(self.name)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 29</span>            )
</div>
<div class="line-context">
<span class="line-number"> 30</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.type, str):
</div>
<div class="line-context">
<span class="line-number"> 31</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 32</span>                f<span class="string">"Field type must be a non-empty string, got {<span class="function">type</span>(self.type)}: {<span class="function">repr</span>(self.type)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span>            )
</div>
<div class="line-context">
<span class="line-number"> 34</span>
</div>
<div class="line-context">
<span class="line-number"> 35</span>        <span class="comment"># Additional validation: ensure name <span class=<span class="string">"keyword"</span>>and</span> type are <span class=<span class="string">"keyword"</span>>not</span> just whitespace</span>
</div>
<div class="line-context">
<span class="line-number"> 36</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 37</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
</div>
<h4>Line 31</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 21</span>            <span class=<span class="string">"keyword"</span>>return</span> f<span class="string">"<span class="function">Field</span>(name={self.name}, type={self.type}, value={self.value})"</span>
</div>
<div class="line-context">
<span class="line-number"> 22</span>        <span class=<span class="string">"keyword"</span>>return</span> f<span class="string">"<span class="function">Field</span>(name={self.name}, type={self.type})"</span>
</div>
<div class="line-context">
<span class="line-number"> 23</span>
</div>
<div class="line-context">
<span class="line-number"> 24</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 25</span>        <span class="string">""</span><span class="string">"Validate field data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 26</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-context">
<span class="line-number"> 27</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 28</span>                f<span class="string">"Field name must be a string, got {<span class="function">type</span>(self.name)}: {<span class="function">repr</span>(self.name)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 29</span>            )
</div>
<div class="line-context">
<span class="line-number"> 30</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.type, str):
</div>
<div class="line-uncovered">
<span class="line-number"> 31</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 32</span>                f<span class="string">"Field type must be a non-empty string, got {<span class="function">type</span>(self.type)}: {<span class="function">repr</span>(self.type)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span>            )
</div>
<div class="line-context">
<span class="line-number"> 34</span>
</div>
<div class="line-context">
<span class="line-number"> 35</span>        <span class="comment"># Additional validation: ensure name <span class=<span class="string">"keyword"</span>>and</span> type are <span class=<span class="string">"keyword"</span>>not</span> just whitespace</span>
</div>
<div class="line-context">
<span class="line-number"> 36</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 37</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 38</span>                f<span class="string">"Field name cannot be empty <span class="</span>keyword<span class="string">">or</span> whitespace, got: {<span class="function">repr</span>(self.name)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 39</span>            )
</div>
<div class="line-context">
<span class="line-number"> 40</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.type.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 41</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
</div>
<h4>Line 37</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 27</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 28</span>                f<span class="string">"Field name must be a string, got {<span class="function">type</span>(self.name)}: {<span class="function">repr</span>(self.name)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 29</span>            )
</div>
<div class="line-context">
<span class="line-number"> 30</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.type, str):
</div>
<div class="line-context">
<span class="line-number"> 31</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 32</span>                f<span class="string">"Field type must be a non-empty string, got {<span class="function">type</span>(self.type)}: {<span class="function">repr</span>(self.type)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span>            )
</div>
<div class="line-context">
<span class="line-number"> 34</span>
</div>
<div class="line-context">
<span class="line-number"> 35</span>        <span class="comment"># Additional validation: ensure name <span class=<span class="string">"keyword"</span>>and</span> type are <span class=<span class="string">"keyword"</span>>not</span> just whitespace</span>
</div>
<div class="line-context">
<span class="line-number"> 36</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number"> 37</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 38</span>                f<span class="string">"Field name cannot be empty <span class="</span>keyword<span class="string">">or</span> whitespace, got: {<span class="function">repr</span>(self.name)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 39</span>            )
</div>
<div class="line-context">
<span class="line-number"> 40</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.type.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 41</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 42</span>                f<span class="string">"Field type cannot be empty <span class="</span>keyword<span class="string">">or</span> whitespace, got: {<span class="function">repr</span>(self.type)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 43</span>            )
</div>
<div class="line-context">
<span class="line-number"> 44</span>
</div>
<div class="line-context">
<span class="line-number"> 45</span>
</div>
<div class="line-context">
<span class="line-number"> 46</span><span class="comment"># TypedefRelation <span class=<span class="string">"keyword"</span>>class</span> removed - tag names moved to struct/enum/union</span>
</div>
<div class="line-context">
<span class="line-number"> 47</span>
</div>
</div>
<h4>Line 41</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 31</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 32</span>                f<span class="string">"Field type must be a non-empty string, got {<span class="function">type</span>(self.type)}: {<span class="function">repr</span>(self.type)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span>            )
</div>
<div class="line-context">
<span class="line-number"> 34</span>
</div>
<div class="line-context">
<span class="line-number"> 35</span>        <span class="comment"># Additional validation: ensure name <span class=<span class="string">"keyword"</span>>and</span> type are <span class=<span class="string">"keyword"</span>>not</span> just whitespace</span>
</div>
<div class="line-context">
<span class="line-number"> 36</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 37</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 38</span>                f<span class="string">"Field name cannot be empty <span class="</span>keyword<span class="string">">or</span> whitespace, got: {<span class="function">repr</span>(self.name)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 39</span>            )
</div>
<div class="line-context">
<span class="line-number"> 40</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.type.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number"> 41</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number"> 42</span>                f<span class="string">"Field type cannot be empty <span class="</span>keyword<span class="string">">or</span> whitespace, got: {<span class="function">repr</span>(self.type)}"</span>
</div>
<div class="line-context">
<span class="line-number"> 43</span>            )
</div>
<div class="line-context">
<span class="line-number"> 44</span>
</div>
<div class="line-context">
<span class="line-number"> 45</span>
</div>
<div class="line-context">
<span class="line-number"> 46</span><span class="comment"># TypedefRelation <span class=<span class="string">"keyword"</span>>class</span> removed - tag names moved to struct/enum/union</span>
</div>
<div class="line-context">
<span class="line-number"> 47</span>
</div>
<div class="line-context">
<span class="line-number"> 48</span>
</div>
<div class="line-context">
<span class="line-number"> 49</span>@dataclass
</div>
<div class="line-context">
<span class="line-number"> 50</span><span class=<span class="string">"keyword"</span>>class</span> IncludeRelation:
</div>
<div class="line-context">
<span class="line-number"> 51</span>    <span class="string">""</span><span class="string">"Represents an include relationship"</span><span class="string">""</span>
</div>
</div>
<h4>Line 60</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 50</span><span class=<span class="string">"keyword"</span>>class</span> IncludeRelation:
</div>
<div class="line-context">
<span class="line-number"> 51</span>    <span class="string">""</span><span class="string">"Represents an include relationship"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 52</span>
</div>
<div class="line-context">
<span class="line-number"> 53</span>    source_file: str
</div>
<div class="line-context">
<span class="line-number"> 54</span>    included_file: str
</div>
<div class="line-context">
<span class="line-number"> 55</span>    depth: int
</div>
<div class="line-context">
<span class="line-number"> 56</span>
</div>
<div class="line-context">
<span class="line-number"> 57</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 58</span>        <span class="string">""</span><span class="string">"Validate include relation data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.source_file <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.source_file, str):
</div>
<div class="line-uncovered">
<span class="line-number"> 60</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Source file must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 61</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.included_file <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.included_file, str):
</div>
<div class="line-context">
<span class="line-number"> 62</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Included file must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 63</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.depth, int) <span class=<span class="string">"keyword"</span>>or</span> self.depth < <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number"> 64</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Depth must be a non-negative integer"</span>)
</div>
<div class="line-context">
<span class="line-number"> 65</span>
</div>
<div class="line-context">
<span class="line-number"> 66</span>
</div>
<div class="line-context">
<span class="line-number"> 67</span>@dataclass
</div>
<div class="line-context">
<span class="line-number"> 68</span><span class=<span class="string">"keyword"</span>>class</span> Function:
</div>
<div class="line-context">
<span class="line-number"> 69</span>    <span class="string">""</span><span class="string">"Represents a function"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 70</span>
</div>
</div>
<h4>Line 62</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 52</span>
</div>
<div class="line-context">
<span class="line-number"> 53</span>    source_file: str
</div>
<div class="line-context">
<span class="line-number"> 54</span>    included_file: str
</div>
<div class="line-context">
<span class="line-number"> 55</span>    depth: int
</div>
<div class="line-context">
<span class="line-number"> 56</span>
</div>
<div class="line-context">
<span class="line-number"> 57</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 58</span>        <span class="string">""</span><span class="string">"Validate include relation data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.source_file <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.source_file, str):
</div>
<div class="line-context">
<span class="line-number"> 60</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Source file must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 61</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.included_file <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.included_file, str):
</div>
<div class="line-uncovered">
<span class="line-number"> 62</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Included file must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 63</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.depth, int) <span class=<span class="string">"keyword"</span>>or</span> self.depth < <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number"> 64</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Depth must be a non-negative integer"</span>)
</div>
<div class="line-context">
<span class="line-number"> 65</span>
</div>
<div class="line-context">
<span class="line-number"> 66</span>
</div>
<div class="line-context">
<span class="line-number"> 67</span>@dataclass
</div>
<div class="line-context">
<span class="line-number"> 68</span><span class=<span class="string">"keyword"</span>>class</span> Function:
</div>
<div class="line-context">
<span class="line-number"> 69</span>    <span class="string">""</span><span class="string">"Represents a function"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 70</span>
</div>
<div class="line-context">
<span class="line-number"> 71</span>    name: str
</div>
<div class="line-context">
<span class="line-number"> 72</span>    return_type: str
</div>
</div>
<h4>Line 64</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 54</span>    included_file: str
</div>
<div class="line-context">
<span class="line-number"> 55</span>    depth: int
</div>
<div class="line-context">
<span class="line-number"> 56</span>
</div>
<div class="line-context">
<span class="line-number"> 57</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 58</span>        <span class="string">""</span><span class="string">"Validate include relation data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.source_file <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.source_file, str):
</div>
<div class="line-context">
<span class="line-number"> 60</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Source file must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 61</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.included_file <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.included_file, str):
</div>
<div class="line-context">
<span class="line-number"> 62</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Included file must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 63</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.depth, int) <span class=<span class="string">"keyword"</span>>or</span> self.depth < <span class="number">0</span>:
</div>
<div class="line-uncovered">
<span class="line-number"> 64</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Depth must be a non-negative integer"</span>)
</div>
<div class="line-context">
<span class="line-number"> 65</span>
</div>
<div class="line-context">
<span class="line-number"> 66</span>
</div>
<div class="line-context">
<span class="line-number"> 67</span>@dataclass
</div>
<div class="line-context">
<span class="line-number"> 68</span><span class=<span class="string">"keyword"</span>>class</span> Function:
</div>
<div class="line-context">
<span class="line-number"> 69</span>    <span class="string">""</span><span class="string">"Represents a function"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 70</span>
</div>
<div class="line-context">
<span class="line-number"> 71</span>    name: str
</div>
<div class="line-context">
<span class="line-number"> 72</span>    return_type: str
</div>
<div class="line-context">
<span class="line-number"> 73</span>    parameters: List[Field] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number"> 74</span>    is_static: bool = <span class=<span class="string">"keyword"</span>>False</span>
</div>
</div>
<h4>Line 80</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 70</span>
</div>
<div class="line-context">
<span class="line-number"> 71</span>    name: str
</div>
<div class="line-context">
<span class="line-number"> 72</span>    return_type: str
</div>
<div class="line-context">
<span class="line-number"> 73</span>    parameters: List[Field] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number"> 74</span>    is_static: bool = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number"> 75</span>    is_declaration: bool = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 78</span>        <span class="string">""</span><span class="string">"Validate function data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 79</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-uncovered">
<span class="line-number"> 80</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Function name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 81</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.return_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.return_type, str):
</div>
<div class="line-context">
<span class="line-number"> 82</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Function <span class="</span>keyword<span class="string">">return</span> type must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 83</span>
</div>
<div class="line-context">
<span class="line-number"> 84</span>        <span class="comment"># Convert parameters to Field objects <span class=<span class="string">"keyword"</span>>if</span> they're dictionaries</span>
</div>
<div class="line-context">
<span class="line-number"> 85</span>        <span class=<span class="string">"keyword"</span>>if</span> self.parameters:
</div>
<div class="line-context">
<span class="line-number"> 86</span>            converted_params = []
</div>
<div class="line-context">
<span class="line-number"> 87</span>            <span class=<span class="string">"keyword"</span>>for</span> param <span class=<span class="string">"keyword"</span>>in</span> self.parameters:
</div>
<div class="line-context">
<span class="line-number"> 88</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(param, dict):
</div>
<div class="line-context">
<span class="line-number"> 89</span>                    converted_params.<span class="function">append</span>(<span class="function">Field</span>(**param))
</div>
<div class="line-context">
<span class="line-number"> 90</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
</div>
<h4>Line 82</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 72</span>    return_type: str
</div>
<div class="line-context">
<span class="line-number"> 73</span>    parameters: List[Field] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number"> 74</span>    is_static: bool = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number"> 75</span>    is_declaration: bool = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 78</span>        <span class="string">""</span><span class="string">"Validate function data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 79</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-context">
<span class="line-number"> 80</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Function name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 81</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.return_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.return_type, str):
</div>
<div class="line-uncovered">
<span class="line-number"> 82</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Function <span class="</span>keyword<span class="string">">return</span> type must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number"> 83</span>
</div>
<div class="line-context">
<span class="line-number"> 84</span>        <span class="comment"># Convert parameters to Field objects <span class=<span class="string">"keyword"</span>>if</span> they're dictionaries</span>
</div>
<div class="line-context">
<span class="line-number"> 85</span>        <span class=<span class="string">"keyword"</span>>if</span> self.parameters:
</div>
<div class="line-context">
<span class="line-number"> 86</span>            converted_params = []
</div>
<div class="line-context">
<span class="line-number"> 87</span>            <span class=<span class="string">"keyword"</span>>for</span> param <span class=<span class="string">"keyword"</span>>in</span> self.parameters:
</div>
<div class="line-context">
<span class="line-number"> 88</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(param, dict):
</div>
<div class="line-context">
<span class="line-number"> 89</span>                    converted_params.<span class="function">append</span>(<span class="function">Field</span>(**param))
</div>
<div class="line-context">
<span class="line-number"> 90</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number"> 91</span>                    converted_params.<span class="function">append</span>(param)
</div>
<div class="line-context">
<span class="line-number"> 92</span>            self.parameters = converted_params
</div>
</div>
<h4>Line 110</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">100</span>    fields: List[Field] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">101</span>    methods: List[Function] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">102</span>    tag_name: str = <span class="string">""</span>  <span class="comment"># Tag name <span class=<span class="string">"keyword"</span>>for</span> typedef structs</span>
</div>
<div class="line-context">
<span class="line-number">103</span>    uses: List[str] = <span class="function">field</span>(
</div>
<div class="line-context">
<span class="line-number">104</span>        default_factory=list
</div>
<div class="line-context">
<span class="line-number">105</span>    )  <span class="comment"># Non-primitive types used by this struct</span>
</div>
<div class="line-context">
<span class="line-number">106</span>
</div>
<div class="line-context">
<span class="line-number">107</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">108</span>        <span class="string">""</span><span class="string">"Validate struct data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">109</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-uncovered">
<span class="line-number">110</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Struct name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">111</span>
</div>
<div class="line-context">
<span class="line-number">112</span>
</div>
<div class="line-context">
<span class="line-number">113</span>@dataclass
</div>
<div class="line-context">
<span class="line-number">114</span><span class=<span class="string">"keyword"</span>>class</span> EnumValue:
</div>
<div class="line-context">
<span class="line-number">115</span>    name: str
</div>
<div class="line-context">
<span class="line-number">116</span>    value: Optional[str] = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">117</span>
</div>
<div class="line-context">
<span class="line-number">118</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">119</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-context">
<span class="line-number">120</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Enum value name must be a non-empty string"</span>)
</div>
</div>
<h4>Line 120</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">110</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Struct name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">111</span>
</div>
<div class="line-context">
<span class="line-number">112</span>
</div>
<div class="line-context">
<span class="line-number">113</span>@dataclass
</div>
<div class="line-context">
<span class="line-number">114</span><span class=<span class="string">"keyword"</span>>class</span> EnumValue:
</div>
<div class="line-context">
<span class="line-number">115</span>    name: str
</div>
<div class="line-context">
<span class="line-number">116</span>    value: Optional[str] = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">117</span>
</div>
<div class="line-context">
<span class="line-number">118</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">119</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-uncovered">
<span class="line-number">120</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Enum value name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">121</span>
</div>
<div class="line-context">
<span class="line-number">122</span>
</div>
<div class="line-context">
<span class="line-number">123</span>@dataclass
</div>
<div class="line-context">
<span class="line-number">124</span><span class=<span class="string">"keyword"</span>>class</span> Enum:
</div>
<div class="line-context">
<span class="line-number">125</span>    <span class="string">""</span><span class="string">"Represents a C enum"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">126</span>
</div>
<div class="line-context">
<span class="line-number">127</span>    name: str
</div>
<div class="line-context">
<span class="line-number">128</span>    values: List[EnumValue] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">129</span>    tag_name: str = <span class="string">""</span>  <span class="comment"># Tag name <span class=<span class="string">"keyword"</span>>for</span> typedef enums</span>
</div>
<div class="line-context">
<span class="line-number">130</span>
</div>
</div>
<h4>Line 133</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">123</span>@dataclass
</div>
<div class="line-context">
<span class="line-number">124</span><span class=<span class="string">"keyword"</span>>class</span> Enum:
</div>
<div class="line-context">
<span class="line-number">125</span>    <span class="string">""</span><span class="string">"Represents a C enum"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">126</span>
</div>
<div class="line-context">
<span class="line-number">127</span>    name: str
</div>
<div class="line-context">
<span class="line-number">128</span>    values: List[EnumValue] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">129</span>    tag_name: str = <span class="string">""</span>  <span class="comment"># Tag name <span class=<span class="string">"keyword"</span>>for</span> typedef enums</span>
</div>
<div class="line-context">
<span class="line-number">130</span>
</div>
<div class="line-context">
<span class="line-number">131</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">132</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-uncovered">
<span class="line-number">133</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Enum name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">134</span>        <span class="comment"># Convert any string values to EnumValue</span>
</div>
<div class="line-context">
<span class="line-number">135</span>        self.values = [
</div>
<div class="line-context">
<span class="line-number">136</span>            v <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(v, EnumValue) <span class=<span class="string">"keyword"</span>>else</span> <span class="function">EnumValue</span>(v) <span class=<span class="string">"keyword"</span>>for</span> v <span class=<span class="string">"keyword"</span>>in</span> self.values
</div>
<div class="line-context">
<span class="line-number">137</span>        ]
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>
</div>
<div class="line-context">
<span class="line-number">140</span>@dataclass
</div>
<div class="line-context">
<span class="line-number">141</span><span class=<span class="string">"keyword"</span>>class</span> Union:
</div>
<div class="line-context">
<span class="line-number">142</span>    <span class="string">""</span><span class="string">"Represents a C union"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">143</span>
</div>
</div>
<h4>Line 154</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">144</span>    name: str
</div>
<div class="line-context">
<span class="line-number">145</span>    fields: List[Field] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">146</span>    tag_name: str = <span class="string">""</span>  <span class="comment"># Tag name <span class=<span class="string">"keyword"</span>>for</span> typedef unions</span>
</div>
<div class="line-context">
<span class="line-number">147</span>    uses: List[str] = <span class="function">field</span>(
</div>
<div class="line-context">
<span class="line-number">148</span>        default_factory=list
</div>
<div class="line-context">
<span class="line-number">149</span>    )  <span class="comment"># Non-primitive types used by this union</span>
</div>
<div class="line-context">
<span class="line-number">150</span>
</div>
<div class="line-context">
<span class="line-number">151</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">152</span>        <span class="string">""</span><span class="string">"Validate union data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">153</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-uncovered">
<span class="line-number">154</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Union name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">155</span>
</div>
<div class="line-context">
<span class="line-number">156</span>
</div>
<div class="line-context">
<span class="line-number">157</span>@dataclass
</div>
<div class="line-context">
<span class="line-number">158</span><span class=<span class="string">"keyword"</span>>class</span> Alias:
</div>
<div class="line-context">
<span class="line-number">159</span>    <span class="string">""</span><span class="string">"Represents a type <span class="function">alias</span>(typedef)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">160</span>
</div>
<div class="line-context">
<span class="line-number">161</span>    name: str
</div>
<div class="line-context">
<span class="line-number">162</span>    original_type: str
</div>
<div class="line-context">
<span class="line-number">163</span>    uses: List[str] = <span class="function">field</span>(
</div>
<div class="line-context">
<span class="line-number">164</span>        default_factory=list
</div>
</div>
<h4>Line 170</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">160</span>
</div>
<div class="line-context">
<span class="line-number">161</span>    name: str
</div>
<div class="line-context">
<span class="line-number">162</span>    original_type: str
</div>
<div class="line-context">
<span class="line-number">163</span>    uses: List[str] = <span class="function">field</span>(
</div>
<div class="line-context">
<span class="line-number">164</span>        default_factory=list
</div>
<div class="line-context">
<span class="line-number">165</span>    )  <span class="comment"># Non-primitive types used by this alias</span>
</div>
<div class="line-context">
<span class="line-number">166</span>
</div>
<div class="line-context">
<span class="line-number">167</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">168</span>        <span class="string">""</span><span class="string">"Validate alias data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">169</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-uncovered">
<span class="line-number">170</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Alias name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">171</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.original_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.original_type, str):
</div>
<div class="line-context">
<span class="line-number">172</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Original type must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">173</span>
</div>
<div class="line-context">
<span class="line-number">174</span>
</div>
<div class="line-context">
<span class="line-number">175</span>@dataclass
</div>
<div class="line-context">
<span class="line-number">176</span><span class=<span class="string">"keyword"</span>>class</span> FileModel:
</div>
<div class="line-context">
<span class="line-number">177</span>    <span class="string">""</span><span class="string">"Represents a parsed C/C++ file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">178</span>
</div>
<div class="line-context">
<span class="line-number">179</span>    file_path: str
</div>
<div class="line-context">
<span class="line-number">180</span>    relative_path: str
</div>
</div>
<h4>Line 172</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">162</span>    original_type: str
</div>
<div class="line-context">
<span class="line-number">163</span>    uses: List[str] = <span class="function">field</span>(
</div>
<div class="line-context">
<span class="line-number">164</span>        default_factory=list
</div>
<div class="line-context">
<span class="line-number">165</span>    )  <span class="comment"># Non-primitive types used by this alias</span>
</div>
<div class="line-context">
<span class="line-number">166</span>
</div>
<div class="line-context">
<span class="line-number">167</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">168</span>        <span class="string">""</span><span class="string">"Validate alias data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">169</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.name, str):
</div>
<div class="line-context">
<span class="line-number">170</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Alias name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">171</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.original_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.original_type, str):
</div>
<div class="line-uncovered">
<span class="line-number">172</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Original type must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">173</span>
</div>
<div class="line-context">
<span class="line-number">174</span>
</div>
<div class="line-context">
<span class="line-number">175</span>@dataclass
</div>
<div class="line-context">
<span class="line-number">176</span><span class=<span class="string">"keyword"</span>>class</span> FileModel:
</div>
<div class="line-context">
<span class="line-number">177</span>    <span class="string">""</span><span class="string">"Represents a parsed C/C++ file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">178</span>
</div>
<div class="line-context">
<span class="line-number">179</span>    file_path: str
</div>
<div class="line-context">
<span class="line-number">180</span>    relative_path: str
</div>
<div class="line-context">
<span class="line-number">181</span>    project_root: str
</div>
<div class="line-context">
<span class="line-number">182</span>    encoding_used: str
</div>
</div>
<h4>Line 196</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">186</span>    globals: List[Field] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">187</span>    includes: Set[str] = <span class="function">field</span>(default_factory=set)
</div>
<div class="line-context">
<span class="line-number">188</span>    macros: List[str] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">189</span>    aliases: Dict[str, Alias] = <span class="function">field</span>(default_factory=dict)
</div>
<div class="line-context">
<span class="line-number">190</span>    unions: Dict[str, Union] = <span class="function">field</span>(default_factory=dict)
</div>
<div class="line-context">
<span class="line-number">191</span>    include_relations: List[IncludeRelation] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">192</span>
</div>
<div class="line-context">
<span class="line-number">193</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">194</span>        <span class="string">""</span><span class="string">"Validate file model data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">195</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.file_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.file_path, str):
</div>
<div class="line-uncovered">
<span class="line-number">196</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"File path must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">197</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.relative_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.relative_path, str):
</div>
<div class="line-context">
<span class="line-number">198</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Relative path must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.project_root <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.project_root, str):
</div>
<div class="line-context">
<span class="line-number">200</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Project root must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">201</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.encoding_used <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.encoding_used, str):
</div>
<div class="line-context">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Encoding must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">203</span>
</div>
<div class="line-context">
<span class="line-number">204</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">to_dict</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">205</span>        <span class="string">""</span><span class="string">"Convert to dictionary <span class="</span>keyword<span class="string">">for</span> JSON serialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">206</span>        data = <span class="function">asdict</span>(self)
</div>
</div>
<h4>Line 198</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">188</span>    macros: List[str] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">189</span>    aliases: Dict[str, Alias] = <span class="function">field</span>(default_factory=dict)
</div>
<div class="line-context">
<span class="line-number">190</span>    unions: Dict[str, Union] = <span class="function">field</span>(default_factory=dict)
</div>
<div class="line-context">
<span class="line-number">191</span>    include_relations: List[IncludeRelation] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">192</span>
</div>
<div class="line-context">
<span class="line-number">193</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">194</span>        <span class="string">""</span><span class="string">"Validate file model data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">195</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.file_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.file_path, str):
</div>
<div class="line-context">
<span class="line-number">196</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"File path must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">197</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.relative_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.relative_path, str):
</div>
<div class="line-uncovered">
<span class="line-number">198</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Relative path must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.project_root <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.project_root, str):
</div>
<div class="line-context">
<span class="line-number">200</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Project root must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">201</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.encoding_used <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.encoding_used, str):
</div>
<div class="line-context">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Encoding must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">203</span>
</div>
<div class="line-context">
<span class="line-number">204</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">to_dict</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">205</span>        <span class="string">""</span><span class="string">"Convert to dictionary <span class="</span>keyword<span class="string">">for</span> JSON serialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">206</span>        data = <span class="function">asdict</span>(self)
</div>
<div class="line-context">
<span class="line-number">207</span>        <span class="comment"># Convert set to list <span class=<span class="string">"keyword"</span>>for</span> JSON serialization <span class=<span class="string">"keyword"</span>>and</span> sort <span class=<span class="string">"keyword"</span>>for</span> consistency</span>
</div>
<div class="line-context">
<span class="line-number">208</span>        data[<span class="string">"includes"</span>] = <span class="function">sorted</span>(<span class="function">list</span>(self.includes))
</div>
</div>
<h4>Line 200</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">190</span>    unions: Dict[str, Union] = <span class="function">field</span>(default_factory=dict)
</div>
<div class="line-context">
<span class="line-number">191</span>    include_relations: List[IncludeRelation] = <span class="function">field</span>(default_factory=list)
</div>
<div class="line-context">
<span class="line-number">192</span>
</div>
<div class="line-context">
<span class="line-number">193</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">194</span>        <span class="string">""</span><span class="string">"Validate file model data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">195</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.file_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.file_path, str):
</div>
<div class="line-context">
<span class="line-number">196</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"File path must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">197</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.relative_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.relative_path, str):
</div>
<div class="line-context">
<span class="line-number">198</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Relative path must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.project_root <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.project_root, str):
</div>
<div class="line-uncovered">
<span class="line-number">200</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Project root must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">201</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.encoding_used <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.encoding_used, str):
</div>
<div class="line-context">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Encoding must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">203</span>
</div>
<div class="line-context">
<span class="line-number">204</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">to_dict</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">205</span>        <span class="string">""</span><span class="string">"Convert to dictionary <span class="</span>keyword<span class="string">">for</span> JSON serialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">206</span>        data = <span class="function">asdict</span>(self)
</div>
<div class="line-context">
<span class="line-number">207</span>        <span class="comment"># Convert set to list <span class=<span class="string">"keyword"</span>>for</span> JSON serialization <span class=<span class="string">"keyword"</span>>and</span> sort <span class=<span class="string">"keyword"</span>>for</span> consistency</span>
</div>
<div class="line-context">
<span class="line-number">208</span>        data[<span class="string">"includes"</span>] = <span class="function">sorted</span>(<span class="function">list</span>(self.includes))
</div>
<div class="line-context">
<span class="line-number">209</span>        <span class="comment"># Convert include_relations to list of dicts <span class=<span class="string">"keyword"</span>>and</span> sort <span class=<span class="string">"keyword"</span>>for</span> consistency</span>
</div>
<div class="line-context">
<span class="line-number">210</span>        data[<span class="string">"include_relations"</span>] = <span class="function">sorted</span>(
</div>
</div>
<h4>Line 202</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">192</span>
</div>
<div class="line-context">
<span class="line-number">193</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">194</span>        <span class="string">""</span><span class="string">"Validate file model data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">195</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.file_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.file_path, str):
</div>
<div class="line-context">
<span class="line-number">196</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"File path must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">197</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.relative_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.relative_path, str):
</div>
<div class="line-context">
<span class="line-number">198</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Relative path must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.project_root <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.project_root, str):
</div>
<div class="line-context">
<span class="line-number">200</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Project root must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">201</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.encoding_used <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.encoding_used, str):
</div>
<div class="line-uncovered">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Encoding must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">203</span>
</div>
<div class="line-context">
<span class="line-number">204</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">to_dict</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">205</span>        <span class="string">""</span><span class="string">"Convert to dictionary <span class="</span>keyword<span class="string">">for</span> JSON serialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">206</span>        data = <span class="function">asdict</span>(self)
</div>
<div class="line-context">
<span class="line-number">207</span>        <span class="comment"># Convert set to list <span class=<span class="string">"keyword"</span>>for</span> JSON serialization <span class=<span class="string">"keyword"</span>>and</span> sort <span class=<span class="string">"keyword"</span>>for</span> consistency</span>
</div>
<div class="line-context">
<span class="line-number">208</span>        data[<span class="string">"includes"</span>] = <span class="function">sorted</span>(<span class="function">list</span>(self.includes))
</div>
<div class="line-context">
<span class="line-number">209</span>        <span class="comment"># Convert include_relations to list of dicts <span class=<span class="string">"keyword"</span>>and</span> sort <span class=<span class="string">"keyword"</span>>for</span> consistency</span>
</div>
<div class="line-context">
<span class="line-number">210</span>        data[<span class="string">"include_relations"</span>] = <span class="function">sorted</span>(
</div>
<div class="line-context">
<span class="line-number">211</span>            [<span class="function">asdict</span>(rel) <span class=<span class="string">"keyword"</span>>for</span> rel <span class=<span class="string">"keyword"</span>>in</span> self.include_relations],
</div>
<div class="line-context">
<span class="line-number">212</span>            key=<span class=<span class="string">"keyword"</span>>lambda</span> x: (x[<span class="string">"source_file"</span>], x[<span class="string">"included_file"</span>]),
</div>
</div>
<h4>Line 278</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">268</span>                    <span class=<span class="string">"keyword"</span>>for</span> method <span class=<span class="string">"keyword"</span>>in</span> struct_data.<span class="function">get</span>(<span class="string">"methods"</span>, [])
</div>
<div class="line-context">
<span class="line-number">269</span>                ]
</div>
<div class="line-context">
<span class="line-number">270</span>                structs[name] = <span class="function">Struct</span>(
</div>
<div class="line-context">
<span class="line-number">271</span>                    name=struct_data.<span class="function">get</span>(<span class="string">"name"</span>, name),
</div>
<div class="line-context">
<span class="line-number">272</span>                    fields=fields,
</div>
<div class="line-context">
<span class="line-number">273</span>                    methods=methods,
</div>
<div class="line-context">
<span class="line-number">274</span>                    tag_name=struct_data.<span class="function">get</span>(<span class="string">"tag_name"</span>, <span class="string">""</span>),
</div>
<div class="line-context">
<span class="line-number">275</span>                    uses=struct_data.<span class="function">get</span>(<span class="string">"uses"</span>, []),
</div>
<div class="line-context">
<span class="line-number">276</span>                )
</div>
<div class="line-context">
<span class="line-number">277</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">278</span>                structs[name] = struct_data
</div>
<div class="line-context">
<span class="line-number">279</span>
</div>
<div class="line-context">
<span class="line-number">280</span>        <span class="comment"># Convert enums back to Enum objects</span>
</div>
<div class="line-context">
<span class="line-number">281</span>        enums_data = data.<span class="function">get</span>(<span class="string">"enums"</span>, {})
</div>
<div class="line-context">
<span class="line-number">282</span>        enums = {}
</div>
<div class="line-context">
<span class="line-number">283</span>        <span class=<span class="string">"keyword"</span>>for</span> name, enum_data <span class=<span class="string">"keyword"</span>>in</span> enums_data.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number">284</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(enum_data, dict):
</div>
<div class="line-context">
<span class="line-number">285</span>                values = [
</div>
<div class="line-context">
<span class="line-number">286</span>                    <span class="function">EnumValue</span>(**val) <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(val, dict) <span class=<span class="string">"keyword"</span>>else</span> <span class="function">EnumValue</span>(val)
</div>
<div class="line-context">
<span class="line-number">287</span>                    <span class=<span class="string">"keyword"</span>>for</span> val <span class=<span class="string">"keyword"</span>>in</span> enum_data.<span class="function">get</span>(<span class="string">"values"</span>, [])
</div>
<div class="line-context">
<span class="line-number">288</span>                ]
</div>
</div>
<h4>Line 291</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">281</span>        enums_data = data.<span class="function">get</span>(<span class="string">"enums"</span>, {})
</div>
<div class="line-context">
<span class="line-number">282</span>        enums = {}
</div>
<div class="line-context">
<span class="line-number">283</span>        <span class=<span class="string">"keyword"</span>>for</span> name, enum_data <span class=<span class="string">"keyword"</span>>in</span> enums_data.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number">284</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(enum_data, dict):
</div>
<div class="line-context">
<span class="line-number">285</span>                values = [
</div>
<div class="line-context">
<span class="line-number">286</span>                    <span class="function">EnumValue</span>(**val) <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(val, dict) <span class=<span class="string">"keyword"</span>>else</span> <span class="function">EnumValue</span>(val)
</div>
<div class="line-context">
<span class="line-number">287</span>                    <span class=<span class="string">"keyword"</span>>for</span> val <span class=<span class="string">"keyword"</span>>in</span> enum_data.<span class="function">get</span>(<span class="string">"values"</span>, [])
</div>
<div class="line-context">
<span class="line-number">288</span>                ]
</div>
<div class="line-context">
<span class="line-number">289</span>                enums[name] = <span class="function">Enum</span>(name=enum_data.<span class="function">get</span>(<span class="string">"name"</span>, name), values=values)
</div>
<div class="line-context">
<span class="line-number">290</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">291</span>                enums[name] = enum_data
</div>
<div class="line-context">
<span class="line-number">292</span>
</div>
<div class="line-context">
<span class="line-number">293</span>        <span class="comment"># typedef_relations removed - tag names are now <span class=<span class="string">"keyword"</span>>in</span> struct/enum/union</span>
</div>
<div class="line-context">
<span class="line-number">294</span>
</div>
<div class="line-context">
<span class="line-number">295</span>        <span class="comment"># Convert include_relations back to IncludeRelation objects</span>
</div>
<div class="line-context">
<span class="line-number">296</span>        include_relations_data = data.<span class="function">get</span>(<span class="string">"include_relations"</span>, [])
</div>
<div class="line-context">
<span class="line-number">297</span>        include_relations = [
</div>
<div class="line-context">
<span class="line-number">298</span>            <span class="function">IncludeRelation</span>(**rel) <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(rel, dict) <span class=<span class="string">"keyword"</span>>else</span> rel
</div>
<div class="line-context">
<span class="line-number">299</span>            <span class=<span class="string">"keyword"</span>>for</span> rel <span class=<span class="string">"keyword"</span>>in</span> include_relations_data
</div>
<div class="line-context">
<span class="line-number">300</span>        ]
</div>
<div class="line-context">
<span class="line-number">301</span>
</div>
</div>
<h4>Line 318</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">308</span>                    <span class="function">Field</span>(**field) <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(field, dict) <span class=<span class="string">"keyword"</span>>else</span> field
</div>
<div class="line-context">
<span class="line-number">309</span>                    <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> union_data.<span class="function">get</span>(<span class="string">"fields"</span>, [])
</div>
<div class="line-context">
<span class="line-number">310</span>                ]
</div>
<div class="line-context">
<span class="line-number">311</span>                unions[name] = <span class="function">Union</span>(
</div>
<div class="line-context">
<span class="line-number">312</span>                    name=union_data.<span class="function">get</span>(<span class="string">"name"</span>, name),
</div>
<div class="line-context">
<span class="line-number">313</span>                    fields=fields,
</div>
<div class="line-context">
<span class="line-number">314</span>                    tag_name=union_data.<span class="function">get</span>(<span class="string">"tag_name"</span>, <span class="string">""</span>),
</div>
<div class="line-context">
<span class="line-number">315</span>                    uses=union_data.<span class="function">get</span>(<span class="string">"uses"</span>, []),
</div>
<div class="line-context">
<span class="line-number">316</span>                )
</div>
<div class="line-context">
<span class="line-number">317</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">318</span>                unions[name] = union_data
</div>
<div class="line-context">
<span class="line-number">319</span>
</div>
<div class="line-context">
<span class="line-number">320</span>        <span class="comment"># Convert aliases back to Alias objects</span>
</div>
<div class="line-context">
<span class="line-number">321</span>        aliases_data = data.<span class="function">get</span>(<span class="string">"aliases"</span>, {})
</div>
<div class="line-context">
<span class="line-number">322</span>        aliases = {}
</div>
<div class="line-context">
<span class="line-number">323</span>        <span class=<span class="string">"keyword"</span>>for</span> name, alias_data <span class=<span class="string">"keyword"</span>>in</span> aliases_data.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number">324</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(alias_data, dict):
</div>
<div class="line-context">
<span class="line-number">325</span>                aliases[name] = <span class="function">Alias</span>(
</div>
<div class="line-context">
<span class="line-number">326</span>                    name=alias_data.<span class="function">get</span>(<span class="string">"name"</span>, name),
</div>
<div class="line-context">
<span class="line-number">327</span>                    original_type=alias_data.<span class="function">get</span>(<span class="string">"original_type"</span>, <span class="string">""</span>),
</div>
<div class="line-context">
<span class="line-number">328</span>                    uses=alias_data.<span class="function">get</span>(<span class="string">"uses"</span>, []),
</div>
</div>
<h4>Line 332</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">322</span>        aliases = {}
</div>
<div class="line-context">
<span class="line-number">323</span>        <span class=<span class="string">"keyword"</span>>for</span> name, alias_data <span class=<span class="string">"keyword"</span>>in</span> aliases_data.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number">324</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(alias_data, dict):
</div>
<div class="line-context">
<span class="line-number">325</span>                aliases[name] = <span class="function">Alias</span>(
</div>
<div class="line-context">
<span class="line-number">326</span>                    name=alias_data.<span class="function">get</span>(<span class="string">"name"</span>, name),
</div>
<div class="line-context">
<span class="line-number">327</span>                    original_type=alias_data.<span class="function">get</span>(<span class="string">"original_type"</span>, <span class="string">""</span>),
</div>
<div class="line-context">
<span class="line-number">328</span>                    uses=alias_data.<span class="function">get</span>(<span class="string">"uses"</span>, []),
</div>
<div class="line-context">
<span class="line-number">329</span>                )
</div>
<div class="line-context">
<span class="line-number">330</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">331</span>                <span class="comment"># Handle legacy format where aliases was Dict[str, str]</span>
</div>
<div class="line-uncovered">
<span class="line-number">332</span>                aliases[name] = <span class="function">Alias</span>(name=name, original_type=alias_data, uses=[])
</div>
<div class="line-context">
<span class="line-number">333</span>
</div>
<div class="line-context">
<span class="line-number">334</span>        <span class="comment"># Create new data dict <span class=<span class="string">"keyword"</span>>with</span> converted objects</span>
</div>
<div class="line-context">
<span class="line-number">335</span>        new_data = data.<span class="function">copy</span>()
</div>
<div class="line-context">
<span class="line-number">336</span>        new_data[<span class="string">"includes"</span>] = includes
</div>
<div class="line-context">
<span class="line-number">337</span>        new_data[<span class="string">"globals"</span>] = globals
</div>
<div class="line-context">
<span class="line-number">338</span>        new_data[<span class="string">"functions"</span>] = functions
</div>
<div class="line-context">
<span class="line-number">339</span>        new_data[<span class="string">"structs"</span>] = structs
</div>
<div class="line-context">
<span class="line-number">340</span>        new_data[<span class="string">"enums"</span>] = enums
</div>
<div class="line-context">
<span class="line-number">341</span>        new_data[<span class="string">"unions"</span>] = unions
</div>
<div class="line-context">
<span class="line-number">342</span>        new_data[<span class="string">"aliases"</span>] = aliases
</div>
</div>
<h4>Line 349</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">339</span>        new_data[<span class="string">"structs"</span>] = structs
</div>
<div class="line-context">
<span class="line-number">340</span>        new_data[<span class="string">"enums"</span>] = enums
</div>
<div class="line-context">
<span class="line-number">341</span>        new_data[<span class="string">"unions"</span>] = unions
</div>
<div class="line-context">
<span class="line-number">342</span>        new_data[<span class="string">"aliases"</span>] = aliases
</div>
<div class="line-context">
<span class="line-number">343</span>        new_data[<span class="string">"include_relations"</span>] = include_relations
</div>
<div class="line-context">
<span class="line-number">344</span>
</div>
<div class="line-context">
<span class="line-number">345</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">cls</span>(**new_data)
</div>
<div class="line-context">
<span class="line-number">346</span>
</div>
<div class="line-context">
<span class="line-number">347</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_summary</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">348</span>        <span class="string">""</span><span class="string">"Get a summary of the file contents"</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number">349</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
<div class="line-context">
<span class="line-number">350</span>            <span class="string">"file_path"</span>: self.file_path,
</div>
<div class="line-context">
<span class="line-number">351</span>            <span class="string">"structs_count"</span>: <span class="function">len</span>(self.structs),
</div>
<div class="line-context">
<span class="line-number">352</span>            <span class="string">"enums_count"</span>: <span class="function">len</span>(self.enums),
</div>
<div class="line-context">
<span class="line-number">353</span>            <span class="string">"functions_count"</span>: <span class="function">len</span>(self.functions),
</div>
<div class="line-context">
<span class="line-number">354</span>            <span class="string">"globals_count"</span>: <span class="function">len</span>(self.globals),
</div>
<div class="line-context">
<span class="line-number">355</span>            <span class="string">"includes_count"</span>: <span class="function">len</span>(self.includes),
</div>
<div class="line-context">
<span class="line-number">356</span>            <span class="string">"macros_count"</span>: <span class="function">len</span>(self.macros),
</div>
<div class="line-context">
<span class="line-number">357</span>            <span class="string">"aliases_count"</span>: <span class="function">len</span>(self.aliases),
</div>
<div class="line-context">
<span class="line-number">358</span>        }
</div>
<div class="line-context">
<span class="line-number">359</span>
</div>
</div>
<h4>Line 372</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">362</span><span class=<span class="string">"keyword"</span>>class</span> ProjectModel:
</div>
<div class="line-context">
<span class="line-number">363</span>    <span class="string">""</span><span class="string">"Represents a complete C/C++ project"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">364</span>
</div>
<div class="line-context">
<span class="line-number">365</span>    project_name: str
</div>
<div class="line-context">
<span class="line-number">366</span>    project_root: str
</div>
<div class="line-context">
<span class="line-number">367</span>    files: Dict[str, FileModel] = <span class="function">field</span>(default_factory=dict)
</div>
<div class="line-context">
<span class="line-number">368</span>
</div>
<div class="line-context">
<span class="line-number">369</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">370</span>        <span class="string">""</span><span class="string">"Validate project model data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">371</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.project_name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.project_name, str):
</div>
<div class="line-uncovered">
<span class="line-number">372</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Project name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">373</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.project_root <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.project_root, str):
</div>
<div class="line-context">
<span class="line-number">374</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Project root must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">375</span>
</div>
<div class="line-context">
<span class="line-number">376</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">save</span>(self, file_path: str) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">377</span>        <span class="string">""</span><span class="string">"Save model to JSON file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">378</span>        data = {
</div>
<div class="line-context">
<span class="line-number">379</span>            <span class="string">"project_name"</span>: self.project_name,
</div>
<div class="line-context">
<span class="line-number">380</span>            <span class="string">"project_root"</span>: self.project_root,
</div>
<div class="line-context">
<span class="line-number">381</span>            <span class="string">"files"</span>: {
</div>
<div class="line-context">
<span class="line-number">382</span>                path: file_model.<span class="function">to_dict</span>()
</div>
</div>
<h4>Line 374</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">364</span>
</div>
<div class="line-context">
<span class="line-number">365</span>    project_name: str
</div>
<div class="line-context">
<span class="line-number">366</span>    project_root: str
</div>
<div class="line-context">
<span class="line-number">367</span>    files: Dict[str, FileModel] = <span class="function">field</span>(default_factory=dict)
</div>
<div class="line-context">
<span class="line-number">368</span>
</div>
<div class="line-context">
<span class="line-number">369</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">370</span>        <span class="string">""</span><span class="string">"Validate project model data after initialization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">371</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.project_name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.project_name, str):
</div>
<div class="line-context">
<span class="line-number">372</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Project name must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">373</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.project_root <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(self.project_root, str):
</div>
<div class="line-uncovered">
<span class="line-number">374</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Project root must be a non-empty string"</span>)
</div>
<div class="line-context">
<span class="line-number">375</span>
</div>
<div class="line-context">
<span class="line-number">376</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">save</span>(self, file_path: str) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">377</span>        <span class="string">""</span><span class="string">"Save model to JSON file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">378</span>        data = {
</div>
<div class="line-context">
<span class="line-number">379</span>            <span class="string">"project_name"</span>: self.project_name,
</div>
<div class="line-context">
<span class="line-number">380</span>            <span class="string">"project_root"</span>: self.project_root,
</div>
<div class="line-context">
<span class="line-number">381</span>            <span class="string">"files"</span>: {
</div>
<div class="line-context">
<span class="line-number">382</span>                path: file_model.<span class="function">to_dict</span>()
</div>
<div class="line-context">
<span class="line-number">383</span>                <span class=<span class="string">"keyword"</span>>for</span> path, file_model <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(self.files.<span class="function">items</span>())
</div>
<div class="line-context">
<span class="line-number">384</span>            },
</div>
</div>
<h4>Lines 390-391</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">380</span>            <span class="string">"project_root"</span>: self.project_root,
</div>
<div class="line-context">
<span class="line-number">381</span>            <span class="string">"files"</span>: {
</div>
<div class="line-context">
<span class="line-number">382</span>                path: file_model.<span class="function">to_dict</span>()
</div>
<div class="line-context">
<span class="line-number">383</span>                <span class=<span class="string">"keyword"</span>>for</span> path, file_model <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(self.files.<span class="function">items</span>())
</div>
<div class="line-context">
<span class="line-number">384</span>            },
</div>
<div class="line-context">
<span class="line-number">385</span>        }
</div>
<div class="line-context">
<span class="line-number">386</span>
</div>
<div class="line-context">
<span class="line-number">387</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">388</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"w"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number">389</span>                json.<span class="function">dump</span>(data, f, indent=<span class="number">2</span>, ensure_ascii=<span class=<span class="string">"keyword"</span>>False</span>, sort_keys=<span class=<span class="string">"keyword"</span>>True</span>)
</div>
<div class="line-uncovered">
<span class="line-number">390</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">391</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Failed to save model to {file_path}: {e}"</span>) <span class=<span class="string">"keyword"</span>>from</span> e
</div>
<div class="line-context">
<span class="line-number">392</span>
</div>
<div class="line-context">
<span class="line-number">393</span>    @classmethod
</div>
<div class="line-context">
<span class="line-number">394</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">from_dict</span>(cls, data: dict) -> <span class="string">"ProjectModel"</span>:
</div>
<div class="line-context">
<span class="line-number">395</span>        <span class="string">""</span><span class="string">"Create <span class="</span>keyword<span class="string">">from</span> dictionary"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">396</span>        files = {
</div>
<div class="line-context">
<span class="line-number">397</span>            path: FileModel.<span class="function">from_dict</span>(file_data)
</div>
<div class="line-context">
<span class="line-number">398</span>            <span class=<span class="string">"keyword"</span>>for</span> path, file_data <span class=<span class="string">"keyword"</span>>in</span> data.<span class="function">get</span>(<span class="string">"files"</span>, {}).<span class="function">items</span>()
</div>
<div class="line-context">
<span class="line-number">399</span>        }
</div>
<div class="line-context">
<span class="line-number">400</span>
</div>
<div class="line-context">
<span class="line-number">401</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">cls</span>(
</div>
</div>
<h4>Lines 414-415</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">404</span>            files=files,
</div>
<div class="line-context">
<span class="line-number">405</span>        )
</div>
<div class="line-context">
<span class="line-number">406</span>
</div>
<div class="line-context">
<span class="line-number">407</span>    @classmethod
</div>
<div class="line-context">
<span class="line-number">408</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">load</span>(cls, file_path: str) -> <span class="string">"ProjectModel"</span>:
</div>
<div class="line-context">
<span class="line-number">409</span>        <span class="string">""</span><span class="string">"Load model <span class="</span>keyword<span class="string">">from</span> JSON file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">410</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">411</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number">412</span>                data = json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number">413</span>            <span class=<span class="string">"keyword"</span>>return</span> cls.<span class="function">from_dict</span>(data)
</div>
<div class="line-uncovered">
<span class="line-number">414</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">415</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Failed to load model <span class="</span>keyword<span class="string">">from</span> {file_path}: {e}"</span>) <span class=<span class="string">"keyword"</span>>from</span> e
</div>
<div class="line-context">
<span class="line-number">416</span>
</div>
<div class="line-context">
<span class="line-number">417</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_summary</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">418</span>        <span class="string">""</span><span class="string">"Get a summary of the project"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">419</span>        total_structs = <span class="function">sum</span>(<span class="function">len</span>(f.structs) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">420</span>        total_enums = <span class="function">sum</span>(<span class="function">len</span>(f.enums) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">421</span>        total_functions = <span class="function">sum</span>(<span class="function">len</span>(f.functions) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">422</span>        total_globals = <span class="function">sum</span>(<span class="function">len</span>(f.globals) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">423</span>
</div>
<div class="line-context">
<span class="line-number">424</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
<div class="line-context">
<span class="line-number">425</span>            <span class="string">"project_name"</span>: self.project_name,
</div>
</div>
<h4>Lines 419-422</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">409</span>        <span class="string">""</span><span class="string">"Load model <span class="</span>keyword<span class="string">">from</span> JSON file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">410</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">411</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number">412</span>                data = json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number">413</span>            <span class=<span class="string">"keyword"</span>>return</span> cls.<span class="function">from_dict</span>(data)
</div>
<div class="line-context">
<span class="line-number">414</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">415</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Failed to load model <span class="</span>keyword<span class="string">">from</span> {file_path}: {e}"</span>) <span class=<span class="string">"keyword"</span>>from</span> e
</div>
<div class="line-context">
<span class="line-number">416</span>
</div>
<div class="line-context">
<span class="line-number">417</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_summary</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">418</span>        <span class="string">""</span><span class="string">"Get a summary of the project"</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number">419</span>        total_structs = <span class="function">sum</span>(<span class="function">len</span>(f.structs) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-uncovered">
<span class="line-number">420</span>        total_enums = <span class="function">sum</span>(<span class="function">len</span>(f.enums) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-uncovered">
<span class="line-number">421</span>        total_functions = <span class="function">sum</span>(<span class="function">len</span>(f.functions) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-uncovered">
<span class="line-number">422</span>        total_globals = <span class="function">sum</span>(<span class="function">len</span>(f.globals) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">423</span>
</div>
<div class="line-context">
<span class="line-number">424</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
<div class="line-context">
<span class="line-number">425</span>            <span class="string">"project_name"</span>: self.project_name,
</div>
<div class="line-context">
<span class="line-number">426</span>            <span class="string">"project_root"</span>: self.project_root,
</div>
<div class="line-context">
<span class="line-number">427</span>            <span class="string">"files_count"</span>: <span class="function">len</span>(self.files),
</div>
<div class="line-context">
<span class="line-number">428</span>            <span class="string">"total_structs"</span>: total_structs,
</div>
<div class="line-context">
<span class="line-number">429</span>            <span class="string">"total_enums"</span>: total_enums,
</div>
<div class="line-context">
<span class="line-number">430</span>            <span class="string">"total_functions"</span>: total_functions,
</div>
<div class="line-context">
<span class="line-number">431</span>            <span class="string">"total_globals"</span>: total_globals,
</div>
<div class="line-context">
<span class="line-number">432</span>        }
</div>
</div>
<h4>Line 424</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">414</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">415</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Failed to load model <span class="</span>keyword<span class="string">">from</span> {file_path}: {e}"</span>) <span class=<span class="string">"keyword"</span>>from</span> e
</div>
<div class="line-context">
<span class="line-number">416</span>
</div>
<div class="line-context">
<span class="line-number">417</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_summary</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">418</span>        <span class="string">""</span><span class="string">"Get a summary of the project"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">419</span>        total_structs = <span class="function">sum</span>(<span class="function">len</span>(f.structs) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">420</span>        total_enums = <span class="function">sum</span>(<span class="function">len</span>(f.enums) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">421</span>        total_functions = <span class="function">sum</span>(<span class="function">len</span>(f.functions) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">422</span>        total_globals = <span class="function">sum</span>(<span class="function">len</span>(f.globals) <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> self.files.<span class="function">values</span>())
</div>
<div class="line-context">
<span class="line-number">423</span>
</div>
<div class="line-uncovered">
<span class="line-number">424</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
<div class="line-context">
<span class="line-number">425</span>            <span class="string">"project_name"</span>: self.project_name,
</div>
<div class="line-context">
<span class="line-number">426</span>            <span class="string">"project_root"</span>: self.project_root,
</div>
<div class="line-context">
<span class="line-number">427</span>            <span class="string">"files_count"</span>: <span class="function">len</span>(self.files),
</div>
<div class="line-context">
<span class="line-number">428</span>            <span class="string">"total_structs"</span>: total_structs,
</div>
<div class="line-context">
<span class="line-number">429</span>            <span class="string">"total_enums"</span>: total_enums,
</div>
<div class="line-context">
<span class="line-number">430</span>            <span class="string">"total_functions"</span>: total_functions,
</div>
<div class="line-context">
<span class="line-number">431</span>            <span class="string">"total_globals"</span>: total_globals,
</div>
<div class="line-context">
<span class="line-number">432</span>        }
</div>
<div class="line-context">
<span class="line-number">433</span>
</div>
<div class="line-context">
<span class="line-number">434</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">update_uses_fields</span>(self):
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/generator.py
<span class="coverage-info">85.91% (250/291 lines covered)</span>
</div>
<h4>Line 79</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 69</span>
</div>
<div class="line-context">
<span class="line-number"> 70</span>        <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">find_file_key</span>(file_name: str) -> str:
</div>
<div class="line-context">
<span class="line-number"> 71</span>            <span class="string">""</span><span class="string">"Find the correct key <span class="</span>keyword<span class="string">">for</span> a file <span class="</span>keyword<span class="string">">in</span> project_model.files using path matching"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 72</span>            <span class="comment"># First <span class=<span class="string">"keyword"</span>>try</span> exact match</span>
</div>
<div class="line-context">
<span class="line-number"> 73</span>            <span class=<span class="string">"keyword"</span>>if</span> file_name <span class=<span class="string">"keyword"</span>>in</span> project_model.files:
</div>
<div class="line-context">
<span class="line-number"> 74</span>                <span class=<span class="string">"keyword"</span>>return</span> file_name
</div>
<div class="line-context">
<span class="line-number"> 75</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>            <span class="comment"># Try matching by filename</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span>            filename = <span class="function">Path</span>(file_name).name
</div>
<div class="line-context">
<span class="line-number"> 78</span>            <span class=<span class="string">"keyword"</span>>if</span> filename <span class=<span class="string">"keyword"</span>>in</span> project_model.files:
</div>
<div class="line-uncovered">
<span class="line-number"> 79</span>                <span class=<span class="string">"keyword"</span>>return</span> filename
</div>
<div class="line-context">
<span class="line-number"> 80</span>
</div>
<div class="line-context">
<span class="line-number"> 81</span>            <span class="comment"># Try matching by relative path</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>            <span class=<span class="string">"keyword"</span>>for</span> key <span class=<span class="string">"keyword"</span>>in</span> project_model.files.<span class="function">keys</span>():
</div>
<div class="line-context">
<span class="line-number"> 83</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="function">Path</span>(key).name == filename:
</div>
<div class="line-context">
<span class="line-number"> 84</span>                    <span class=<span class="string">"keyword"</span>>return</span> key
</div>
<div class="line-context">
<span class="line-number"> 85</span>
</div>
<div class="line-context">
<span class="line-number"> 86</span>            <span class="comment"># If <span class=<span class="string">"keyword"</span>>not</span> found, <span class=<span class="string">"keyword"</span>>return</span> the <span class="function">filename</span>(will be handled gracefully)</span>
</div>
<div class="line-context">
<span class="line-number"> 87</span>            <span class=<span class="string">"keyword"</span>>return</span> filename
</div>
<div class="line-context">
<span class="line-number"> 88</span>
</div>
<div class="line-context">
<span class="line-number"> 89</span>        <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">add_file_to_tree</span>(file_name: str, depth: int):
</div>
</div>
<h4>Line 91</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 81</span>            <span class="comment"># Try matching by relative path</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>            <span class=<span class="string">"keyword"</span>>for</span> key <span class=<span class="string">"keyword"</span>>in</span> project_model.files.<span class="function">keys</span>():
</div>
<div class="line-context">
<span class="line-number"> 83</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="function">Path</span>(key).name == filename:
</div>
<div class="line-context">
<span class="line-number"> 84</span>                    <span class=<span class="string">"keyword"</span>>return</span> key
</div>
<div class="line-context">
<span class="line-number"> 85</span>
</div>
<div class="line-context">
<span class="line-number"> 86</span>            <span class="comment"># If <span class=<span class="string">"keyword"</span>>not</span> found, <span class=<span class="string">"keyword"</span>>return</span> the <span class="function">filename</span>(will be handled gracefully)</span>
</div>
<div class="line-context">
<span class="line-number"> 87</span>            <span class=<span class="string">"keyword"</span>>return</span> filename
</div>
<div class="line-context">
<span class="line-number"> 88</span>
</div>
<div class="line-context">
<span class="line-number"> 89</span>        <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">add_file_to_tree</span>(file_name: str, depth: int):
</div>
<div class="line-context">
<span class="line-number"> 90</span>            <span class=<span class="string">"keyword"</span>>if</span> depth > include_depth <span class=<span class="string">"keyword"</span>>or</span> file_name <span class=<span class="string">"keyword"</span>>in</span> visited:
</div>
<div class="line-uncovered">
<span class="line-number"> 91</span>                <span class=<span class="string">"keyword"</span>>return</span>
</div>
<div class="line-context">
<span class="line-number"> 92</span>
</div>
<div class="line-context">
<span class="line-number"> 93</span>            visited.<span class="function">add</span>(file_name)
</div>
<div class="line-context">
<span class="line-number"> 94</span>            file_key = <span class="function">find_file_key</span>(file_name)
</div>
<div class="line-context">
<span class="line-number"> 95</span>
</div>
<div class="line-context">
<span class="line-number"> 96</span>            <span class=<span class="string">"keyword"</span>>if</span> file_key <span class=<span class="string">"keyword"</span>>in</span> project_model.files:
</div>
<div class="line-context">
<span class="line-number"> 97</span>                include_tree[file_key] = project_model.files[file_key]
</div>
<div class="line-context">
<span class="line-number"> 98</span>
</div>
<div class="line-context">
<span class="line-number"> 99</span>                <span class="comment"># Add included files</span>
</div>
<div class="line-context">
<span class="line-number">100</span>                <span class=<span class="string">"keyword"</span>>if</span> depth < include_depth:
</div>
<div class="line-context">
<span class="line-number">101</span>                    <span class=<span class="string">"keyword"</span>>for</span> include <span class=<span class="string">"keyword"</span>>in</span> project_model.files[file_key].includes:
</div>
</div>
<h4>Line 152</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">142</span>        self, lines: List[str], file_model: FileModel, uml_ids: Dict[str, str]
</div>
<div class="line-context">
<span class="line-number">143</span>    ):
</div>
<div class="line-context">
<span class="line-number">144</span>        <span class="string">""</span><span class="string">"Generate <span class="</span>keyword<span class="string">">class</span> <span class="</span>keyword<span class="string">">for</span> C file using filename-based keys"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">145</span>        basename = <span class="function">Path</span>(file_model.relative_path).stem
</div>
<div class="line-context">
<span class="line-number">146</span>
</div>
<div class="line-context">
<span class="line-number">147</span>        <span class="comment"># Find the UML ID <span class=<span class="string">"keyword"</span>>for</span> this file using filename</span>
</div>
<div class="line-context">
<span class="line-number">148</span>        filename = <span class="function">Path</span>(file_model.relative_path).name
</div>
<div class="line-context">
<span class="line-number">149</span>        uml_id = uml_ids.<span class="function">get</span>(filename)
</div>
<div class="line-context">
<span class="line-number">150</span>
</div>
<div class="line-context">
<span class="line-number">151</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> uml_id:
</div>
<div class="line-uncovered">
<span class="line-number">152</span>            <span class=<span class="string">"keyword"</span>>return</span>  <span class="comment"># Skip <span class=<span class="string">"keyword"</span>>if</span> no UML ID found</span>
</div>
<div class="line-context">
<span class="line-number">153</span>
</div>
<div class="line-context">
<span class="line-number">154</span>        lines.<span class="function">append</span>(f<span class="string">'<span class=<span class="string">"keyword"</span>>class</span> <span class="string">"{basename}"</span> <span class=<span class="string">"keyword"</span>>as</span> {uml_id} <<source>> <span class="comment">#LightBlue'</span>)</span>
</div>
<div class="line-context">
<span class="line-number">155</span>        lines.<span class="function">append</span>(<span class="string">"{"</span>)
</div>
<div class="line-context">
<span class="line-number">156</span>
</div>
<div class="line-context">
<span class="line-number">157</span>        <span class="comment"># Add macros</span>
</div>
<div class="line-context">
<span class="line-number">158</span>        <span class=<span class="string">"keyword"</span>>if</span> file_model.macros:
</div>
<div class="line-context">
<span class="line-number">159</span>            lines.<span class="function">append</span>(<span class="string">"    -- Macros --"</span>)
</div>
<div class="line-context">
<span class="line-number">160</span>            <span class=<span class="string">"keyword"</span>>for</span> macro <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.macros):
</div>
<div class="line-context">
<span class="line-number">161</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"("</span> <span class=<span class="string">"keyword"</span>>in</span> macro <span class=<span class="string">"keyword"</span>>and</span> <span class="string">")"</span> <span class=<span class="string">"keyword"</span>>in</span> macro:
</div>
<div class="line-context">
<span class="line-number">162</span>                    <span class="comment"># Function-like macro</span>
</div>
</div>
<h4>Lines 163-165</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">153</span>
</div>
<div class="line-context">
<span class="line-number">154</span>        lines.<span class="function">append</span>(f<span class="string">'<span class=<span class="string">"keyword"</span>>class</span> <span class="string">"{basename}"</span> <span class=<span class="string">"keyword"</span>>as</span> {uml_id} <<source>> <span class="comment">#LightBlue'</span>)</span>
</div>
<div class="line-context">
<span class="line-number">155</span>        lines.<span class="function">append</span>(<span class="string">"{"</span>)
</div>
<div class="line-context">
<span class="line-number">156</span>
</div>
<div class="line-context">
<span class="line-number">157</span>        <span class="comment"># Add macros</span>
</div>
<div class="line-context">
<span class="line-number">158</span>        <span class=<span class="string">"keyword"</span>>if</span> file_model.macros:
</div>
<div class="line-context">
<span class="line-number">159</span>            lines.<span class="function">append</span>(<span class="string">"    -- Macros --"</span>)
</div>
<div class="line-context">
<span class="line-number">160</span>            <span class=<span class="string">"keyword"</span>>for</span> macro <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.macros):
</div>
<div class="line-context">
<span class="line-number">161</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"("</span> <span class=<span class="string">"keyword"</span>>in</span> macro <span class=<span class="string">"keyword"</span>>and</span> <span class="string">")"</span> <span class=<span class="string">"keyword"</span>>in</span> macro:
</div>
<div class="line-context">
<span class="line-number">162</span>                    <span class="comment"># Function-like macro</span>
</div>
<div class="line-uncovered">
<span class="line-number">163</span>                    macro_name = macro.<span class="function">split</span>(<span class="string">"("</span>)[<span class="number">0</span>].<span class="function">replace</span>(<span class="string">"<span class="comment">#define "</span>, <span class="string">""</span>)</span>
</div>
<div class="line-uncovered">
<span class="line-number">164</span>                    params = macro.<span class="function">split</span>(<span class="string">"("</span>)[<span class="number">1</span>].<span class="function">split</span>(<span class="string">")"</span>)[<span class="number">0</span>]
</div>
<div class="line-uncovered">
<span class="line-number">165</span>                    lines.<span class="function">append</span>(f<span class="string">"    - <span class="comment">#define {macro_name}({params})"</span>)</span>
</div>
<div class="line-context">
<span class="line-number">166</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">167</span>                    <span class="comment"># Simple macro</span>
</div>
<div class="line-context">
<span class="line-number">168</span>                    macro_name = macro.<span class="function">replace</span>(<span class="string">"<span class="comment">#define "</span>, <span class="string">""</span>)</span>
</div>
<div class="line-context">
<span class="line-number">169</span>                    lines.<span class="function">append</span>(f<span class="string">"    - <span class="comment">#define {macro_name}"</span>)</span>
</div>
<div class="line-context">
<span class="line-number">170</span>
</div>
<div class="line-context">
<span class="line-number">171</span>        <span class="comment"># Add <span class=<span class="string">"keyword"</span>>global</span> variables</span>
</div>
<div class="line-context">
<span class="line-number">172</span>        <span class=<span class="string">"keyword"</span>>if</span> file_model.globals:
</div>
<div class="line-context">
<span class="line-number">173</span>            lines.<span class="function">append</span>(<span class="string">"    -- Global Variables --"</span>)
</div>
<div class="line-context">
<span class="line-number">174</span>            <span class=<span class="string">"keyword"</span>>for</span> global_var <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.globals, key=<span class=<span class="string">"keyword"</span>>lambda</span> x: x.name):
</div>
<div class="line-context">
<span class="line-number">175</span>                lines.<span class="function">append</span>(f<span class="string">"    {global_var.type} {global_var.name}"</span>)
</div>
</div>
<h4>Line 185</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">175</span>                lines.<span class="function">append</span>(f<span class="string">"    {global_var.type} {global_var.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">176</span>
</div>
<div class="line-context">
<span class="line-number">177</span>        <span class="comment"># Add functions</span>
</div>
<div class="line-context">
<span class="line-number">178</span>        <span class=<span class="string">"keyword"</span>>if</span> file_model.functions:
</div>
<div class="line-context">
<span class="line-number">179</span>            lines.<span class="function">append</span>(<span class="string">"    -- Functions --"</span>)
</div>
<div class="line-context">
<span class="line-number">180</span>            <span class=<span class="string">"keyword"</span>>for</span> func <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.functions, key=<span class=<span class="string">"keyword"</span>>lambda</span> x: x.name):
</div>
<div class="line-context">
<span class="line-number">181</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> func.is_declaration:  <span class="comment"># Only implementation, <span class=<span class="string">"keyword"</span>>not</span> declarations</span>
</div>
<div class="line-context">
<span class="line-number">182</span>                    params = []
</div>
<div class="line-context">
<span class="line-number">183</span>                    <span class=<span class="string">"keyword"</span>>for</span> p <span class=<span class="string">"keyword"</span>>in</span> func.parameters:
</div>
<div class="line-context">
<span class="line-number">184</span>                        <span class=<span class="string">"keyword"</span>>if</span> p.name == <span class="string">"..."</span> <span class=<span class="string">"keyword"</span>>and</span> p.type == <span class="string">"..."</span>:
</div>
<div class="line-uncovered">
<span class="line-number">185</span>                            params.<span class="function">append</span>(<span class="string">"..."</span>)
</div>
<div class="line-context">
<span class="line-number">186</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">187</span>                            params.<span class="function">append</span>(f<span class="string">"{p.type} {p.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">188</span>                    param_str = <span class="string">", "</span>.<span class="function">join</span>(params)
</div>
<div class="line-context">
<span class="line-number">189</span>                    lines.<span class="function">append</span>(f<span class="string">"    {func.return_type} {func.name}({param_str})"</span>)
</div>
<div class="line-context">
<span class="line-number">190</span>
</div>
<div class="line-context">
<span class="line-number">191</span>        lines.<span class="function">append</span>(<span class="string">"}"</span>)
</div>
<div class="line-context">
<span class="line-number">192</span>        lines.<span class="function">append</span>(<span class="string">""</span>)
</div>
<div class="line-context">
<span class="line-number">193</span>
</div>
<div class="line-context">
<span class="line-number">194</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_generate_header_class</span>(
</div>
<div class="line-context">
<span class="line-number">195</span>        self, lines: List[str], file_model: FileModel, uml_ids: Dict[str, str]
</div>
</div>
<h4>Line 205</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">195</span>        self, lines: List[str], file_model: FileModel, uml_ids: Dict[str, str]
</div>
<div class="line-context">
<span class="line-number">196</span>    ):
</div>
<div class="line-context">
<span class="line-number">197</span>        <span class="string">""</span><span class="string">"Generate <span class="</span>keyword<span class="string">">class</span> <span class="</span>keyword<span class="string">">for</span> header file using filename-based keys"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">198</span>        basename = <span class="function">Path</span>(file_model.relative_path).stem
</div>
<div class="line-context">
<span class="line-number">199</span>
</div>
<div class="line-context">
<span class="line-number">200</span>        <span class="comment"># Find the UML ID <span class=<span class="string">"keyword"</span>>for</span> this file using filename</span>
</div>
<div class="line-context">
<span class="line-number">201</span>        filename = <span class="function">Path</span>(file_model.relative_path).name
</div>
<div class="line-context">
<span class="line-number">202</span>        uml_id = uml_ids.<span class="function">get</span>(filename)
</div>
<div class="line-context">
<span class="line-number">203</span>
</div>
<div class="line-context">
<span class="line-number">204</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> uml_id:
</div>
<div class="line-uncovered">
<span class="line-number">205</span>            <span class=<span class="string">"keyword"</span>>return</span>  <span class="comment"># Skip <span class=<span class="string">"keyword"</span>>if</span> no UML ID found</span>
</div>
<div class="line-context">
<span class="line-number">206</span>
</div>
<div class="line-context">
<span class="line-number">207</span>        lines.<span class="function">append</span>(f<span class="string">'<span class=<span class="string">"keyword"</span>>class</span> <span class="string">"{basename}"</span> <span class=<span class="string">"keyword"</span>>as</span> {uml_id} <<header>> <span class="comment">#LightGreen'</span>)</span>
</div>
<div class="line-context">
<span class="line-number">208</span>        lines.<span class="function">append</span>(<span class="string">"{"</span>)
</div>
<div class="line-context">
<span class="line-number">209</span>
</div>
<div class="line-context">
<span class="line-number">210</span>        <span class="comment"># Add macros</span>
</div>
<div class="line-context">
<span class="line-number">211</span>        <span class=<span class="string">"keyword"</span>>if</span> file_model.macros:
</div>
<div class="line-context">
<span class="line-number">212</span>            lines.<span class="function">append</span>(<span class="string">"    -- Macros --"</span>)
</div>
<div class="line-context">
<span class="line-number">213</span>            <span class=<span class="string">"keyword"</span>>for</span> macro <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.macros):
</div>
<div class="line-context">
<span class="line-number">214</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"("</span> <span class=<span class="string">"keyword"</span>>in</span> macro <span class=<span class="string">"keyword"</span>>and</span> <span class="string">")"</span> <span class=<span class="string">"keyword"</span>>in</span> macro:
</div>
<div class="line-context">
<span class="line-number">215</span>                    <span class="comment"># Function-like macro</span>
</div>
</div>
<h4>Lines 216-218</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">206</span>
</div>
<div class="line-context">
<span class="line-number">207</span>        lines.<span class="function">append</span>(f<span class="string">'<span class=<span class="string">"keyword"</span>>class</span> <span class="string">"{basename}"</span> <span class=<span class="string">"keyword"</span>>as</span> {uml_id} <<header>> <span class="comment">#LightGreen'</span>)</span>
</div>
<div class="line-context">
<span class="line-number">208</span>        lines.<span class="function">append</span>(<span class="string">"{"</span>)
</div>
<div class="line-context">
<span class="line-number">209</span>
</div>
<div class="line-context">
<span class="line-number">210</span>        <span class="comment"># Add macros</span>
</div>
<div class="line-context">
<span class="line-number">211</span>        <span class=<span class="string">"keyword"</span>>if</span> file_model.macros:
</div>
<div class="line-context">
<span class="line-number">212</span>            lines.<span class="function">append</span>(<span class="string">"    -- Macros --"</span>)
</div>
<div class="line-context">
<span class="line-number">213</span>            <span class=<span class="string">"keyword"</span>>for</span> macro <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.macros):
</div>
<div class="line-context">
<span class="line-number">214</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"("</span> <span class=<span class="string">"keyword"</span>>in</span> macro <span class=<span class="string">"keyword"</span>>and</span> <span class="string">")"</span> <span class=<span class="string">"keyword"</span>>in</span> macro:
</div>
<div class="line-context">
<span class="line-number">215</span>                    <span class="comment"># Function-like macro</span>
</div>
<div class="line-uncovered">
<span class="line-number">216</span>                    macro_name = macro.<span class="function">split</span>(<span class="string">"("</span>)[<span class="number">0</span>].<span class="function">replace</span>(<span class="string">"<span class="comment">#define "</span>, <span class="string">""</span>)</span>
</div>
<div class="line-uncovered">
<span class="line-number">217</span>                    params = macro.<span class="function">split</span>(<span class="string">"("</span>)[<span class="number">1</span>].<span class="function">split</span>(<span class="string">")"</span>)[<span class="number">0</span>]
</div>
<div class="line-uncovered">
<span class="line-number">218</span>                    lines.<span class="function">append</span>(f<span class="string">"    + <span class="comment">#define {macro_name}({params})"</span>)</span>
</div>
<div class="line-context">
<span class="line-number">219</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">220</span>                    <span class="comment"># Simple macro</span>
</div>
<div class="line-context">
<span class="line-number">221</span>                    macro_name = macro.<span class="function">replace</span>(<span class="string">"<span class="comment">#define "</span>, <span class="string">""</span>)</span>
</div>
<div class="line-context">
<span class="line-number">222</span>                    lines.<span class="function">append</span>(f<span class="string">"    + <span class="comment">#define {macro_name}"</span>)</span>
</div>
<div class="line-context">
<span class="line-number">223</span>
</div>
<div class="line-context">
<span class="line-number">224</span>        <span class="comment"># Add <span class=<span class="string">"keyword"</span>>global</span> variables</span>
</div>
<div class="line-context">
<span class="line-number">225</span>        <span class=<span class="string">"keyword"</span>>if</span> file_model.globals:
</div>
<div class="line-context">
<span class="line-number">226</span>            lines.<span class="function">append</span>(<span class="string">"    -- Global Variables --"</span>)
</div>
<div class="line-context">
<span class="line-number">227</span>            <span class=<span class="string">"keyword"</span>>for</span> global_var <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.globals, key=<span class=<span class="string">"keyword"</span>>lambda</span> x: x.name):
</div>
<div class="line-context">
<span class="line-number">228</span>                lines.<span class="function">append</span>(f<span class="string">"    + {global_var.type} {global_var.name}"</span>)
</div>
</div>
<h4>Line 274</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">264</span>        <span class="comment"># Enums</span>
</div>
<div class="line-context">
<span class="line-number">265</span>        <span class=<span class="string">"keyword"</span>>for</span> enum_name, enum_data <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.enums.<span class="function">items</span>()):
</div>
<div class="line-context">
<span class="line-number">266</span>            uml_id = uml_ids.<span class="function">get</span>(f<span class="string">"typedef_{enum_name}"</span>)
</div>
<div class="line-context">
<span class="line-number">267</span>            <span class=<span class="string">"keyword"</span>>if</span> uml_id:
</div>
<div class="line-context">
<span class="line-number">268</span>                lines.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">269</span>                    f<span class="string">'<span class=<span class="string">"keyword"</span>>class</span> <span class="string">"{enum_name}"</span> <span class=<span class="string">"keyword"</span>>as</span> {uml_id} <<typedef>> <span class="comment">#LightYellow'</span></span>
</div>
<div class="line-context">
<span class="line-number">270</span>                )
</div>
<div class="line-context">
<span class="line-number">271</span>                lines.<span class="function">append</span>(<span class="string">"{"</span>)
</div>
<div class="line-context">
<span class="line-number">272</span>                <span class=<span class="string">"keyword"</span>>for</span> value <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(enum_data.values, key=<span class=<span class="string">"keyword"</span>>lambda</span> x: x.name):
</div>
<div class="line-context">
<span class="line-number">273</span>                    <span class=<span class="string">"keyword"</span>>if</span> value.value:
</div>
<div class="line-uncovered">
<span class="line-number">274</span>                        lines.<span class="function">append</span>(f<span class="string">"    + {value.name} = {value.value}"</span>)
</div>
<div class="line-context">
<span class="line-number">275</span>                    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">276</span>                        lines.<span class="function">append</span>(f<span class="string">"    + {value.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">277</span>                lines.<span class="function">append</span>(<span class="string">"}"</span>)
</div>
<div class="line-context">
<span class="line-number">278</span>                lines.<span class="function">append</span>(<span class="string">""</span>)
</div>
<div class="line-context">
<span class="line-number">279</span>
</div>
<div class="line-context">
<span class="line-number">280</span>        <span class="comment"># <span class="function">Aliases</span>(simple typedefs)</span>
</div>
<div class="line-context">
<span class="line-number">281</span>        <span class=<span class="string">"keyword"</span>>for</span> alias_name, alias_data <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.aliases.<span class="function">items</span>()):
</div>
<div class="line-context">
<span class="line-number">282</span>            uml_id = uml_ids.<span class="function">get</span>(f<span class="string">"typedef_{alias_name}"</span>)
</div>
<div class="line-context">
<span class="line-number">283</span>            <span class=<span class="string">"keyword"</span>>if</span> uml_id:
</div>
<div class="line-context">
<span class="line-number">284</span>                lines.<span class="function">append</span>(
</div>
</div>
<h4>Line 298</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">288</span>                <span class="comment"># Handle multi-line alias types <span class=<span class="string">"keyword"</span>>with</span> proper nested struct indentation</span>
</div>
<div class="line-context">
<span class="line-number">289</span>                alias_lines = alias_data.original_type.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
<div class="line-context">
<span class="line-number">290</span>                inside_struct = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">291</span>                nested_content = []
</div>
<div class="line-context">
<span class="line-number">292</span>
</div>
<div class="line-context">
<span class="line-number">293</span>                <span class=<span class="string">"keyword"</span>>for</span> i, line <span class=<span class="string">"keyword"</span>>in</span> <span class="function">enumerate</span>(alias_lines):
</div>
<div class="line-context">
<span class="line-number">294</span>                    line = line.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">295</span>
</div>
<div class="line-context">
<span class="line-number">296</span>                    <span class=<span class="string">"keyword"</span>>if</span> i == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">297</span>                        lines.<span class="function">append</span>(f<span class="string">"    + {line}"</span>)
</div>
<div class="line-uncovered">
<span class="line-number">298</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line.<span class="function">startswith</span>(<span class="string">"struct {"</span>):
</div>
<div class="line-context">
<span class="line-number">299</span>                        <span class="comment"># Start collecting nested struct content</span>
</div>
<div class="line-context">
<span class="line-number">300</span>                        inside_struct = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">301</span>                        nested_content = []
</div>
<div class="line-context">
<span class="line-number">302</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line == <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">303</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">304</span>                            <span class="comment"># Close nested struct <span class=<span class="string">"keyword"</span>>with</span> flattened content</span>
</div>
<div class="line-context">
<span class="line-number">305</span>                            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">306</span>                                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">307</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ {content_str} }}"</span>)
</div>
<div class="line-context">
<span class="line-number">308</span>                            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
</div>
<h4>Lines 300-303</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">290</span>                inside_struct = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">291</span>                nested_content = []
</div>
<div class="line-context">
<span class="line-number">292</span>
</div>
<div class="line-context">
<span class="line-number">293</span>                <span class=<span class="string">"keyword"</span>>for</span> i, line <span class=<span class="string">"keyword"</span>>in</span> <span class="function">enumerate</span>(alias_lines):
</div>
<div class="line-context">
<span class="line-number">294</span>                    line = line.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">295</span>
</div>
<div class="line-context">
<span class="line-number">296</span>                    <span class=<span class="string">"keyword"</span>>if</span> i == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">297</span>                        lines.<span class="function">append</span>(f<span class="string">"    + {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">298</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line.<span class="function">startswith</span>(<span class="string">"struct {"</span>):
</div>
<div class="line-context">
<span class="line-number">299</span>                        <span class="comment"># Start collecting nested struct content</span>
</div>
<div class="line-uncovered">
<span class="line-number">300</span>                        inside_struct = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-uncovered">
<span class="line-number">301</span>                        nested_content = []
</div>
<div class="line-uncovered">
<span class="line-number">302</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line == <span class="string">"}"</span>:
</div>
<div class="line-uncovered">
<span class="line-number">303</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">304</span>                            <span class="comment"># Close nested struct <span class=<span class="string">"keyword"</span>>with</span> flattened content</span>
</div>
<div class="line-context">
<span class="line-number">305</span>                            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">306</span>                                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">307</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ {content_str} }}"</span>)
</div>
<div class="line-context">
<span class="line-number">308</span>                            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">309</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ }}"</span>)
</div>
<div class="line-context">
<span class="line-number">310</span>                            inside_struct = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">311</span>                            nested_content = []
</div>
<div class="line-context">
<span class="line-number">312</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">313</span>                            lines.<span class="function">append</span>(f<span class="string">"    }}"</span>)
</div>
</div>
<h4>Lines 305-307</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">295</span>
</div>
<div class="line-context">
<span class="line-number">296</span>                    <span class=<span class="string">"keyword"</span>>if</span> i == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">297</span>                        lines.<span class="function">append</span>(f<span class="string">"    + {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">298</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line.<span class="function">startswith</span>(<span class="string">"struct {"</span>):
</div>
<div class="line-context">
<span class="line-number">299</span>                        <span class="comment"># Start collecting nested struct content</span>
</div>
<div class="line-context">
<span class="line-number">300</span>                        inside_struct = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">301</span>                        nested_content = []
</div>
<div class="line-context">
<span class="line-number">302</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line == <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">303</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">304</span>                            <span class="comment"># Close nested struct <span class=<span class="string">"keyword"</span>>with</span> flattened content</span>
</div>
<div class="line-uncovered">
<span class="line-number">305</span>                            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-uncovered">
<span class="line-number">306</span>                                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-uncovered">
<span class="line-number">307</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ {content_str} }}"</span>)
</div>
<div class="line-context">
<span class="line-number">308</span>                            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">309</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ }}"</span>)
</div>
<div class="line-context">
<span class="line-number">310</span>                            inside_struct = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">311</span>                            nested_content = []
</div>
<div class="line-context">
<span class="line-number">312</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">313</span>                            lines.<span class="function">append</span>(f<span class="string">"    }}"</span>)
</div>
<div class="line-context">
<span class="line-number">314</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line <span class=<span class="string">"keyword"</span>>and</span> line != <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">315</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">316</span>                            nested_content.<span class="function">append</span>(line)  <span class="comment"># Collect nested content</span>
</div>
<div class="line-context">
<span class="line-number">317</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
</div>
<h4>Lines 309-311</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">299</span>                        <span class="comment"># Start collecting nested struct content</span>
</div>
<div class="line-context">
<span class="line-number">300</span>                        inside_struct = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">301</span>                        nested_content = []
</div>
<div class="line-context">
<span class="line-number">302</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line == <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">303</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">304</span>                            <span class="comment"># Close nested struct <span class=<span class="string">"keyword"</span>>with</span> flattened content</span>
</div>
<div class="line-context">
<span class="line-number">305</span>                            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">306</span>                                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">307</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ {content_str} }}"</span>)
</div>
<div class="line-context">
<span class="line-number">308</span>                            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">309</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ }}"</span>)
</div>
<div class="line-uncovered">
<span class="line-number">310</span>                            inside_struct = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-uncovered">
<span class="line-number">311</span>                            nested_content = []
</div>
<div class="line-context">
<span class="line-number">312</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">313</span>                            lines.<span class="function">append</span>(f<span class="string">"    }}"</span>)
</div>
<div class="line-context">
<span class="line-number">314</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line <span class=<span class="string">"keyword"</span>>and</span> line != <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">315</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">316</span>                            nested_content.<span class="function">append</span>(line)  <span class="comment"># Collect nested content</span>
</div>
<div class="line-context">
<span class="line-number">317</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">318</span>                            lines.<span class="function">append</span>(f<span class="string">"+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">319</span>
</div>
<div class="line-context">
<span class="line-number">320</span>                <span class="comment"># If we were inside a struct but didn't find a closing brace, add one</span>
</div>
<div class="line-context">
<span class="line-number">321</span>                <span class=<span class="string">"keyword"</span>>if</span> inside_struct <span class=<span class="string">"keyword"</span>>and</span> nested_content:
</div>
</div>
<h4>Lines 313-316</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">303</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">304</span>                            <span class="comment"># Close nested struct <span class=<span class="string">"keyword"</span>>with</span> flattened content</span>
</div>
<div class="line-context">
<span class="line-number">305</span>                            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">306</span>                                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">307</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ {content_str} }}"</span>)
</div>
<div class="line-context">
<span class="line-number">308</span>                            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">309</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ }}"</span>)
</div>
<div class="line-context">
<span class="line-number">310</span>                            inside_struct = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">311</span>                            nested_content = []
</div>
<div class="line-context">
<span class="line-number">312</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">313</span>                            lines.<span class="function">append</span>(f<span class="string">"    }}"</span>)
</div>
<div class="line-uncovered">
<span class="line-number">314</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line <span class=<span class="string">"keyword"</span>>and</span> line != <span class="string">"}"</span>:
</div>
<div class="line-uncovered">
<span class="line-number">315</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-uncovered">
<span class="line-number">316</span>                            nested_content.<span class="function">append</span>(line)  <span class="comment"># Collect nested content</span>
</div>
<div class="line-context">
<span class="line-number">317</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">318</span>                            lines.<span class="function">append</span>(f<span class="string">"+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">319</span>
</div>
<div class="line-context">
<span class="line-number">320</span>                <span class="comment"># If we were inside a struct but didn't find a closing brace, add one</span>
</div>
<div class="line-context">
<span class="line-number">321</span>                <span class=<span class="string">"keyword"</span>>if</span> inside_struct <span class=<span class="string">"keyword"</span>>and</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">322</span>                    content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">323</span>                    lines.<span class="function">append</span>(f<span class="string">"    + struct {{ {content_str} }}"</span>)
</div>
<div class="line-context">
<span class="line-number">324</span>                lines.<span class="function">append</span>(<span class="string">"}"</span>)
</div>
<div class="line-context">
<span class="line-number">325</span>                lines.<span class="function">append</span>(<span class="string">""</span>)
</div>
<div class="line-context">
<span class="line-number">326</span>
</div>
</div>
<h4>Line 318</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">308</span>                            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">309</span>                                lines.<span class="function">append</span>(f<span class="string">"    + struct {{ }}"</span>)
</div>
<div class="line-context">
<span class="line-number">310</span>                            inside_struct = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">311</span>                            nested_content = []
</div>
<div class="line-context">
<span class="line-number">312</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">313</span>                            lines.<span class="function">append</span>(f<span class="string">"    }}"</span>)
</div>
<div class="line-context">
<span class="line-number">314</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line <span class=<span class="string">"keyword"</span>>and</span> line != <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">315</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">316</span>                            nested_content.<span class="function">append</span>(line)  <span class="comment"># Collect nested content</span>
</div>
<div class="line-context">
<span class="line-number">317</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">318</span>                            lines.<span class="function">append</span>(f<span class="string">"+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">319</span>
</div>
<div class="line-context">
<span class="line-number">320</span>                <span class="comment"># If we were inside a struct but didn't find a closing brace, add one</span>
</div>
<div class="line-context">
<span class="line-number">321</span>                <span class=<span class="string">"keyword"</span>>if</span> inside_struct <span class=<span class="string">"keyword"</span>>and</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">322</span>                    content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">323</span>                    lines.<span class="function">append</span>(f<span class="string">"    + struct {{ {content_str} }}"</span>)
</div>
<div class="line-context">
<span class="line-number">324</span>                lines.<span class="function">append</span>(<span class="string">"}"</span>)
</div>
<div class="line-context">
<span class="line-number">325</span>                lines.<span class="function">append</span>(<span class="string">""</span>)
</div>
<div class="line-context">
<span class="line-number">326</span>
</div>
<div class="line-context">
<span class="line-number">327</span>        <span class="comment"># Unions</span>
</div>
<div class="line-context">
<span class="line-number">328</span>        <span class=<span class="string">"keyword"</span>>for</span> union_name, union_data <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.unions.<span class="function">items</span>()):
</div>
</div>
<h4>Lines 322-323</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">312</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">313</span>                            lines.<span class="function">append</span>(f<span class="string">"    }}"</span>)
</div>
<div class="line-context">
<span class="line-number">314</span>                    <span class=<span class="string">"keyword"</span>>elif</span> line <span class=<span class="string">"keyword"</span>>and</span> line != <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">315</span>                        <span class=<span class="string">"keyword"</span>>if</span> inside_struct:
</div>
<div class="line-context">
<span class="line-number">316</span>                            nested_content.<span class="function">append</span>(line)  <span class="comment"># Collect nested content</span>
</div>
<div class="line-context">
<span class="line-number">317</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">318</span>                            lines.<span class="function">append</span>(f<span class="string">"+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">319</span>
</div>
<div class="line-context">
<span class="line-number">320</span>                <span class="comment"># If we were inside a struct but didn't find a closing brace, add one</span>
</div>
<div class="line-context">
<span class="line-number">321</span>                <span class=<span class="string">"keyword"</span>>if</span> inside_struct <span class=<span class="string">"keyword"</span>>and</span> nested_content:
</div>
<div class="line-uncovered">
<span class="line-number">322</span>                    content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-uncovered">
<span class="line-number">323</span>                    lines.<span class="function">append</span>(f<span class="string">"    + struct {{ {content_str} }}"</span>)
</div>
<div class="line-context">
<span class="line-number">324</span>                lines.<span class="function">append</span>(<span class="string">"}"</span>)
</div>
<div class="line-context">
<span class="line-number">325</span>                lines.<span class="function">append</span>(<span class="string">""</span>)
</div>
<div class="line-context">
<span class="line-number">326</span>
</div>
<div class="line-context">
<span class="line-number">327</span>        <span class="comment"># Unions</span>
</div>
<div class="line-context">
<span class="line-number">328</span>        <span class=<span class="string">"keyword"</span>>for</span> union_name, union_data <span class=<span class="string">"keyword"</span>>in</span> <span class="function">sorted</span>(file_model.unions.<span class="function">items</span>()):
</div>
<div class="line-context">
<span class="line-number">329</span>            uml_id = uml_ids.<span class="function">get</span>(f<span class="string">"typedef_{union_name}"</span>)
</div>
<div class="line-context">
<span class="line-number">330</span>            <span class=<span class="string">"keyword"</span>>if</span> uml_id:
</div>
<div class="line-context">
<span class="line-number">331</span>                lines.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">332</span>                    f<span class="string">'<span class=<span class="string">"keyword"</span>>class</span> <span class="string">"{union_name}"</span> <span class=<span class="string">"keyword"</span>>as</span> {uml_id} <<typedef>> <span class="comment">#LightYellow'</span></span>
</div>
<div class="line-context">
<span class="line-number">333</span>                )
</div>
</div>
<h4>Line 347</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">337</span>                lines.<span class="function">append</span>(<span class="string">"}"</span>)
</div>
<div class="line-context">
<span class="line-number">338</span>                lines.<span class="function">append</span>(<span class="string">""</span>)
</div>
<div class="line-context">
<span class="line-number">339</span>
</div>
<div class="line-context">
<span class="line-number">340</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_generate_field_with_nested_structs</span>(self, lines: List[str], field, base_indent: str):
</div>
<div class="line-context">
<span class="line-number">341</span>        <span class="string">""</span><span class="string">"Generate field <span class="</span>keyword<span class="string">">with</span> proper handling of nested structures"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">342</span>        field_text = f<span class="string">"{field.type} {field.name}"</span>
</div>
<div class="line-context">
<span class="line-number">343</span>
</div>
<div class="line-context">
<span class="line-number">344</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a nested struct field</span>
</div>
<div class="line-context">
<span class="line-number">345</span>        <span class=<span class="string">"keyword"</span>>if</span> field.type.<span class="function">startswith</span>(<span class="string">"struct {"</span>) <span class=<span class="string">"keyword"</span>>and</span> <span class="string">'\n'</span> <span class=<span class="string">"keyword"</span>>in</span> field.type:
</div>
<div class="line-context">
<span class="line-number">346</span>            <span class="comment"># Parse the nested struct content <span class=<span class="string">"keyword"</span>>and</span> flatten it</span>
</div>
<div class="line-uncovered">
<span class="line-number">347</span>            struct_parts = field.type.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
<div class="line-context">
<span class="line-number">348</span>
</div>
<div class="line-context">
<span class="line-number">349</span>            <span class="comment"># For nested structs, flatten them to avoid PlantUML parsing issues</span>
</div>
<div class="line-context">
<span class="line-number">350</span>            <span class="comment"># Format <span class=<span class="string">"keyword"</span>>as</span>: + struct { field_type field_name }</span>
</div>
<div class="line-context">
<span class="line-number">351</span>            nested_content = []
</div>
<div class="line-context">
<span class="line-number">352</span>            <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> struct_parts[<span class="number">1</span>:]:
</div>
<div class="line-context">
<span class="line-number">353</span>                part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">354</span>                <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> part != <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">355</span>                    nested_content.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">356</span>
</div>
<div class="line-context">
<span class="line-number">357</span>            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
</div>
<h4>Lines 351-355</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">341</span>        <span class="string">""</span><span class="string">"Generate field <span class="</span>keyword<span class="string">">with</span> proper handling of nested structures"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">342</span>        field_text = f<span class="string">"{field.type} {field.name}"</span>
</div>
<div class="line-context">
<span class="line-number">343</span>
</div>
<div class="line-context">
<span class="line-number">344</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a nested struct field</span>
</div>
<div class="line-context">
<span class="line-number">345</span>        <span class=<span class="string">"keyword"</span>>if</span> field.type.<span class="function">startswith</span>(<span class="string">"struct {"</span>) <span class=<span class="string">"keyword"</span>>and</span> <span class="string">'\n'</span> <span class=<span class="string">"keyword"</span>>in</span> field.type:
</div>
<div class="line-context">
<span class="line-number">346</span>            <span class="comment"># Parse the nested struct content <span class=<span class="string">"keyword"</span>>and</span> flatten it</span>
</div>
<div class="line-context">
<span class="line-number">347</span>            struct_parts = field.type.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
<div class="line-context">
<span class="line-number">348</span>
</div>
<div class="line-context">
<span class="line-number">349</span>            <span class="comment"># For nested structs, flatten them to avoid PlantUML parsing issues</span>
</div>
<div class="line-context">
<span class="line-number">350</span>            <span class="comment"># Format <span class=<span class="string">"keyword"</span>>as</span>: + struct { field_type field_name }</span>
</div>
<div class="line-uncovered">
<span class="line-number">351</span>            nested_content = []
</div>
<div class="line-uncovered">
<span class="line-number">352</span>            <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> struct_parts[<span class="number">1</span>:]:
</div>
<div class="line-uncovered">
<span class="line-number">353</span>                part = part.<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">354</span>                <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> part != <span class="string">"}"</span>:
</div>
<div class="line-uncovered">
<span class="line-number">355</span>                    nested_content.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">356</span>
</div>
<div class="line-context">
<span class="line-number">357</span>            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">358</span>                <span class="comment"># Create a flattened representation</span>
</div>
<div class="line-context">
<span class="line-number">359</span>                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">360</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ {content_str} }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">361</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">362</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">363</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">364</span>            <span class="comment"># Handle regular multi-line field types</span>
</div>
<div class="line-context">
<span class="line-number">365</span>            field_lines = field_text.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
</div>
<h4>Line 357</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">347</span>            struct_parts = field.type.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
<div class="line-context">
<span class="line-number">348</span>
</div>
<div class="line-context">
<span class="line-number">349</span>            <span class="comment"># For nested structs, flatten them to avoid PlantUML parsing issues</span>
</div>
<div class="line-context">
<span class="line-number">350</span>            <span class="comment"># Format <span class=<span class="string">"keyword"</span>>as</span>: + struct { field_type field_name }</span>
</div>
<div class="line-context">
<span class="line-number">351</span>            nested_content = []
</div>
<div class="line-context">
<span class="line-number">352</span>            <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> struct_parts[<span class="number">1</span>:]:
</div>
<div class="line-context">
<span class="line-number">353</span>                part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">354</span>                <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> part != <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">355</span>                    nested_content.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">356</span>
</div>
<div class="line-uncovered">
<span class="line-number">357</span>            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">358</span>                <span class="comment"># Create a flattened representation</span>
</div>
<div class="line-context">
<span class="line-number">359</span>                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">360</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ {content_str} }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">361</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">362</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">363</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">364</span>            <span class="comment"># Handle regular multi-line field types</span>
</div>
<div class="line-context">
<span class="line-number">365</span>            field_lines = field_text.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
<div class="line-context">
<span class="line-number">366</span>            <span class=<span class="string">"keyword"</span>>for</span> i, line <span class=<span class="string">"keyword"</span>>in</span> <span class="function">enumerate</span>(field_lines):
</div>
<div class="line-context">
<span class="line-number">367</span>                <span class=<span class="string">"keyword"</span>>if</span> i == <span class="number">0</span>:
</div>
</div>
<h4>Lines 359-360</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">349</span>            <span class="comment"># For nested structs, flatten them to avoid PlantUML parsing issues</span>
</div>
<div class="line-context">
<span class="line-number">350</span>            <span class="comment"># Format <span class=<span class="string">"keyword"</span>>as</span>: + struct { field_type field_name }</span>
</div>
<div class="line-context">
<span class="line-number">351</span>            nested_content = []
</div>
<div class="line-context">
<span class="line-number">352</span>            <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> struct_parts[<span class="number">1</span>:]:
</div>
<div class="line-context">
<span class="line-number">353</span>                part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">354</span>                <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> part != <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">355</span>                    nested_content.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">356</span>
</div>
<div class="line-context">
<span class="line-number">357</span>            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">358</span>                <span class="comment"># Create a flattened representation</span>
</div>
<div class="line-uncovered">
<span class="line-number">359</span>                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-uncovered">
<span class="line-number">360</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ {content_str} }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">361</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">362</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">363</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">364</span>            <span class="comment"># Handle regular multi-line field types</span>
</div>
<div class="line-context">
<span class="line-number">365</span>            field_lines = field_text.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
<div class="line-context">
<span class="line-number">366</span>            <span class=<span class="string">"keyword"</span>>for</span> i, line <span class=<span class="string">"keyword"</span>>in</span> <span class="function">enumerate</span>(field_lines):
</div>
<div class="line-context">
<span class="line-number">367</span>                <span class=<span class="string">"keyword"</span>>if</span> i == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">368</span>                    lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">369</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">370</span>                    lines.<span class="function">append</span>(f<span class="string">"+ {line}"</span>)
</div>
</div>
<h4>Line 362</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">352</span>            <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> struct_parts[<span class="number">1</span>:]:
</div>
<div class="line-context">
<span class="line-number">353</span>                part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">354</span>                <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> part != <span class="string">"}"</span>:
</div>
<div class="line-context">
<span class="line-number">355</span>                    nested_content.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">356</span>
</div>
<div class="line-context">
<span class="line-number">357</span>            <span class=<span class="string">"keyword"</span>>if</span> nested_content:
</div>
<div class="line-context">
<span class="line-number">358</span>                <span class="comment"># Create a flattened representation</span>
</div>
<div class="line-context">
<span class="line-number">359</span>                content_str = <span class="string">"; "</span>.<span class="function">join</span>(nested_content)
</div>
<div class="line-context">
<span class="line-number">360</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ {content_str} }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">361</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">362</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">363</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">364</span>            <span class="comment"># Handle regular multi-line field types</span>
</div>
<div class="line-context">
<span class="line-number">365</span>            field_lines = field_text.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
<div class="line-context">
<span class="line-number">366</span>            <span class=<span class="string">"keyword"</span>>for</span> i, line <span class=<span class="string">"keyword"</span>>in</span> <span class="function">enumerate</span>(field_lines):
</div>
<div class="line-context">
<span class="line-number">367</span>                <span class=<span class="string">"keyword"</span>>if</span> i == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">368</span>                    lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">369</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">370</span>                    lines.<span class="function">append</span>(f<span class="string">"+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">371</span>
</div>
<div class="line-context">
<span class="line-number">372</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_generate_relationships</span>(
</div>
</div>
<h4>Line 370</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">360</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ {content_str} }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">361</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">362</span>                lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ struct {{ }} {field.name}"</span>)
</div>
<div class="line-context">
<span class="line-number">363</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">364</span>            <span class="comment"># Handle regular multi-line field types</span>
</div>
<div class="line-context">
<span class="line-number">365</span>            field_lines = field_text.<span class="function">split</span>(<span class="string">'\n'</span>)
</div>
<div class="line-context">
<span class="line-number">366</span>            <span class=<span class="string">"keyword"</span>>for</span> i, line <span class=<span class="string">"keyword"</span>>in</span> <span class="function">enumerate</span>(field_lines):
</div>
<div class="line-context">
<span class="line-number">367</span>                <span class=<span class="string">"keyword"</span>>if</span> i == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">368</span>                    lines.<span class="function">append</span>(f<span class="string">"{base_indent}+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">369</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">370</span>                    lines.<span class="function">append</span>(f<span class="string">"+ {line}"</span>)
</div>
<div class="line-context">
<span class="line-number">371</span>
</div>
<div class="line-context">
<span class="line-number">372</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_generate_relationships</span>(
</div>
<div class="line-context">
<span class="line-number">373</span>        self,
</div>
<div class="line-context">
<span class="line-number">374</span>        lines: List[str],
</div>
<div class="line-context">
<span class="line-number">375</span>        include_tree: Dict[str, FileModel],
</div>
<div class="line-context">
<span class="line-number">376</span>        uml_ids: Dict[str, str],
</div>
<div class="line-context">
<span class="line-number">377</span>        project_model: ProjectModel,
</div>
<div class="line-context">
<span class="line-number">378</span>    ):
</div>
<div class="line-context">
<span class="line-number">379</span>        <span class="string">""</span><span class="string">"Generate relationships between elements"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">380</span>        <span class="comment"># <span class="number">1</span>. Include relationships</span>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/parser_tokenizer.py
<span class="coverage-info">88.75% (576/649 lines covered)</span>
</div>
<h4>Line 222</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">212</span>                    multiline_comment_start_col = line_tokens[-<span class="number">1</span>].column
</div>
<div class="line-context">
<span class="line-number">213</span>                    tokens.<span class="function">extend</span>(line_tokens[:-<span class="number">1</span>])
</div>
<div class="line-context">
<span class="line-number">214</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">215</span>                    tokens.<span class="function">extend</span>(line_tokens)
</div>
<div class="line-context">
<span class="line-number">216</span>
</div>
<div class="line-context">
<span class="line-number">217</span>            <span class=<span class="string">"keyword"</span>>if</span> line_num < total_lines:
</div>
<div class="line-context">
<span class="line-number">218</span>                tokens.<span class="function">append</span>(<span class="function">Token</span>(TokenType.NEWLINE, <span class="string">"\n"</span>, line_num, <span class="function">len</span>(line)))
</div>
<div class="line-context">
<span class="line-number">219</span>            line_num += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">220</span>
</div>
<div class="line-context">
<span class="line-number">221</span>        <span class=<span class="string">"keyword"</span>>if</span> in_multiline_string:
</div>
<div class="line-uncovered">
<span class="line-number">222</span>            tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">223</span>                <span class="function">Token</span>(
</div>
<div class="line-context">
<span class="line-number">224</span>                    TokenType.STRING,
</div>
<div class="line-context">
<span class="line-number">225</span>                    multiline_string_value,
</div>
<div class="line-context">
<span class="line-number">226</span>                    multiline_string_start_line,
</div>
<div class="line-context">
<span class="line-number">227</span>                    multiline_string_start_col,
</div>
<div class="line-context">
<span class="line-number">228</span>                )
</div>
<div class="line-context">
<span class="line-number">229</span>            )
</div>
<div class="line-context">
<span class="line-number">230</span>        <span class=<span class="string">"keyword"</span>>if</span> in_multiline_comment:
</div>
<div class="line-context">
<span class="line-number">231</span>            tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">232</span>                <span class="function">Token</span>(
</div>
</div>
<h4>Line 231</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">221</span>        <span class=<span class="string">"keyword"</span>>if</span> in_multiline_string:
</div>
<div class="line-context">
<span class="line-number">222</span>            tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">223</span>                <span class="function">Token</span>(
</div>
<div class="line-context">
<span class="line-number">224</span>                    TokenType.STRING,
</div>
<div class="line-context">
<span class="line-number">225</span>                    multiline_string_value,
</div>
<div class="line-context">
<span class="line-number">226</span>                    multiline_string_start_line,
</div>
<div class="line-context">
<span class="line-number">227</span>                    multiline_string_start_col,
</div>
<div class="line-context">
<span class="line-number">228</span>                )
</div>
<div class="line-context">
<span class="line-number">229</span>            )
</div>
<div class="line-context">
<span class="line-number">230</span>        <span class=<span class="string">"keyword"</span>>if</span> in_multiline_comment:
</div>
<div class="line-uncovered">
<span class="line-number">231</span>            tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">232</span>                <span class="function">Token</span>(
</div>
<div class="line-context">
<span class="line-number">233</span>                    TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">234</span>                    multiline_comment_value,
</div>
<div class="line-context">
<span class="line-number">235</span>                    multiline_comment_start_line,
</div>
<div class="line-context">
<span class="line-number">236</span>                    multiline_comment_start_col,
</div>
<div class="line-context">
<span class="line-number">237</span>                )
</div>
<div class="line-context">
<span class="line-number">238</span>            )
</div>
<div class="line-context">
<span class="line-number">239</span>
</div>
<div class="line-context">
<span class="line-number">240</span>        <span class="comment"># Post-process tokens to merge multi-line macros</span>
</div>
<div class="line-context">
<span class="line-number">241</span>        tokens = self.<span class="function">_merge_multiline_macros</span>(tokens, lines)
</div>
</div>
<h4>Line 309</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">299</span>                <span class=<span class="string">"keyword"</span>>or</span> (
</div>
<div class="line-context">
<span class="line-number">300</span>                    pos > <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">301</span>                    <span class=<span class="string">"keyword"</span>>and</span> line[pos - <span class="number">1</span>] <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"L"</span>, <span class="string">"u"</span>, <span class="string">"U"</span>, <span class="string">"R"</span>]
</div>
<div class="line-context">
<span class="line-number">302</span>                    <span class=<span class="string">"keyword"</span>>and</span> line[pos] == <span class="string">'"'</span>
</div>
<div class="line-context">
<span class="line-number">303</span>                )
</div>
<div class="line-context">
<span class="line-number">304</span>                <span class=<span class="string">"keyword"</span>>or</span> (pos > <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> line[pos - <span class="number">2</span> : pos] == <span class="string">"u8"</span> <span class=<span class="string">"keyword"</span>>and</span> line[pos] == <span class="string">'"'</span>)
</div>
<div class="line-context">
<span class="line-number">305</span>            ):
</div>
<div class="line-context">
<span class="line-number">306</span>                <span class="comment"># Handle string literals <span class=<span class="string">"keyword"</span>>with</span> possible prefixes</span>
</div>
<div class="line-context">
<span class="line-number">307</span>                string_start = pos
</div>
<div class="line-context">
<span class="line-number">308</span>                <span class=<span class="string">"keyword"</span>>if</span> line[pos - <span class="number">2</span> : pos] == <span class="string">"u8"</span>:
</div>
<div class="line-uncovered">
<span class="line-number">309</span>                    string_start -= <span class="number">2</span>
</div>
<div class="line-context">
<span class="line-number">310</span>                <span class=<span class="string">"keyword"</span>>elif</span> line[pos - <span class="number">1</span>] <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"L"</span>, <span class="string">"u"</span>, <span class="string">"U"</span>, <span class="string">"R"</span>]:
</div>
<div class="line-context">
<span class="line-number">311</span>                    string_start -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">312</span>                pos += <span class="number">1</span>  <span class="comment"># Skip opening quote</span>
</div>
<div class="line-context">
<span class="line-number">313</span>                <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(line):
</div>
<div class="line-context">
<span class="line-number">314</span>                    <span class=<span class="string">"keyword"</span>>if</span> line[pos] == <span class="string">'"'</span>:
</div>
<div class="line-context">
<span class="line-number">315</span>                        <span class="comment"># Found closing quote</span>
</div>
<div class="line-context">
<span class="line-number">316</span>                        string_text = line[string_start : pos + <span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">317</span>                        tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">318</span>                            <span class="function">Token</span>(TokenType.STRING, string_text, line_num, string_start)
</div>
<div class="line-context">
<span class="line-number">319</span>                        )
</div>
</div>
<h4>Line 311</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">301</span>                    <span class=<span class="string">"keyword"</span>>and</span> line[pos - <span class="number">1</span>] <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"L"</span>, <span class="string">"u"</span>, <span class="string">"U"</span>, <span class="string">"R"</span>]
</div>
<div class="line-context">
<span class="line-number">302</span>                    <span class=<span class="string">"keyword"</span>>and</span> line[pos] == <span class="string">'"'</span>
</div>
<div class="line-context">
<span class="line-number">303</span>                )
</div>
<div class="line-context">
<span class="line-number">304</span>                <span class=<span class="string">"keyword"</span>>or</span> (pos > <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> line[pos - <span class="number">2</span> : pos] == <span class="string">"u8"</span> <span class=<span class="string">"keyword"</span>>and</span> line[pos] == <span class="string">'"'</span>)
</div>
<div class="line-context">
<span class="line-number">305</span>            ):
</div>
<div class="line-context">
<span class="line-number">306</span>                <span class="comment"># Handle string literals <span class=<span class="string">"keyword"</span>>with</span> possible prefixes</span>
</div>
<div class="line-context">
<span class="line-number">307</span>                string_start = pos
</div>
<div class="line-context">
<span class="line-number">308</span>                <span class=<span class="string">"keyword"</span>>if</span> line[pos - <span class="number">2</span> : pos] == <span class="string">"u8"</span>:
</div>
<div class="line-context">
<span class="line-number">309</span>                    string_start -= <span class="number">2</span>
</div>
<div class="line-context">
<span class="line-number">310</span>                <span class=<span class="string">"keyword"</span>>elif</span> line[pos - <span class="number">1</span>] <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"L"</span>, <span class="string">"u"</span>, <span class="string">"U"</span>, <span class="string">"R"</span>]:
</div>
<div class="line-uncovered">
<span class="line-number">311</span>                    string_start -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">312</span>                pos += <span class="number">1</span>  <span class="comment"># Skip opening quote</span>
</div>
<div class="line-context">
<span class="line-number">313</span>                <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(line):
</div>
<div class="line-context">
<span class="line-number">314</span>                    <span class=<span class="string">"keyword"</span>>if</span> line[pos] == <span class="string">'"'</span>:
</div>
<div class="line-context">
<span class="line-number">315</span>                        <span class="comment"># Found closing quote</span>
</div>
<div class="line-context">
<span class="line-number">316</span>                        string_text = line[string_start : pos + <span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">317</span>                        tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">318</span>                            <span class="function">Token</span>(TokenType.STRING, string_text, line_num, string_start)
</div>
<div class="line-context">
<span class="line-number">319</span>                        )
</div>
<div class="line-context">
<span class="line-number">320</span>                        pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">321</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
</div>
<h4>Lines 413-414</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">403</span>    ) -> List[Token]:
</div>
<div class="line-context">
<span class="line-number">404</span>        <span class="string">""</span><span class="string">"Merge multi-line macro tokens that span multiple lines <span class="</span>keyword<span class="string">">with</span> backslashes"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">405</span>        merged_tokens = []
</div>
<div class="line-context">
<span class="line-number">406</span>        i = <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">407</span>
</div>
<div class="line-context">
<span class="line-number">408</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens):
</div>
<div class="line-context">
<span class="line-number">409</span>            token = tokens[i]
</div>
<div class="line-context">
<span class="line-number">410</span>
</div>
<div class="line-context">
<span class="line-number">411</span>            <span class=<span class="string">"keyword"</span>>if</span> token.type == TokenType.DEFINE <span class=<span class="string">"keyword"</span>>and</span> token.value.<span class="function">rstrip</span>().<span class="function">endswith</span>(<span class="string">"\\"</span>):
</div>
<div class="line-context">
<span class="line-number">412</span>                <span class="comment"># Found a multi-line macro, merge <span class=<span class="string">"keyword"</span>>with</span> subsequent lines</span>
</div>
<div class="line-uncovered">
<span class="line-number">413</span>                macro_content = token.value
</div>
<div class="line-uncovered">
<span class="line-number">414</span>                current_line = token.line
</div>
<div class="line-context">
<span class="line-number">415</span>
</div>
<div class="line-context">
<span class="line-number">416</span>                <span class="comment"># Continue merging lines until we find one that doesn't end <span class=<span class="string">"keyword"</span>>with</span> backslash</span>
</div>
<div class="line-context">
<span class="line-number">417</span>                <span class=<span class="string">"keyword"</span>>while</span> macro_content.<span class="function">rstrip</span>().<span class="function">endswith</span>(<span class="string">"\\"</span>):
</div>
<div class="line-context">
<span class="line-number">418</span>                    <span class="comment"># Remove the backslash <span class=<span class="string">"keyword"</span>>and</span> add a newline</span>
</div>
<div class="line-context">
<span class="line-number">419</span>                    macro_content = macro_content.<span class="function">rstrip</span>()[:-<span class="number">1</span>] + <span class="string">"\n"</span>
</div>
<div class="line-context">
<span class="line-number">420</span>                    current_line += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">421</span>
</div>
<div class="line-context">
<span class="line-number">422</span>                    <span class="comment"># Find the next line content</span>
</div>
<div class="line-context">
<span class="line-number">423</span>                    <span class=<span class="string">"keyword"</span>>if</span> current_line <= <span class="function">len</span>(lines):
</div>
<div class="line-context">
<span class="line-number">424</span>                        next_line = lines[current_line - <span class="number">1</span>]
</div>
</div>
<h4>Line 417</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">407</span>
</div>
<div class="line-context">
<span class="line-number">408</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens):
</div>
<div class="line-context">
<span class="line-number">409</span>            token = tokens[i]
</div>
<div class="line-context">
<span class="line-number">410</span>
</div>
<div class="line-context">
<span class="line-number">411</span>            <span class=<span class="string">"keyword"</span>>if</span> token.type == TokenType.DEFINE <span class=<span class="string">"keyword"</span>>and</span> token.value.<span class="function">rstrip</span>().<span class="function">endswith</span>(<span class="string">"\\"</span>):
</div>
<div class="line-context">
<span class="line-number">412</span>                <span class="comment"># Found a multi-line macro, merge <span class=<span class="string">"keyword"</span>>with</span> subsequent lines</span>
</div>
<div class="line-context">
<span class="line-number">413</span>                macro_content = token.value
</div>
<div class="line-context">
<span class="line-number">414</span>                current_line = token.line
</div>
<div class="line-context">
<span class="line-number">415</span>
</div>
<div class="line-context">
<span class="line-number">416</span>                <span class="comment"># Continue merging lines until we find one that doesn't end <span class=<span class="string">"keyword"</span>>with</span> backslash</span>
</div>
<div class="line-uncovered">
<span class="line-number">417</span>                <span class=<span class="string">"keyword"</span>>while</span> macro_content.<span class="function">rstrip</span>().<span class="function">endswith</span>(<span class="string">"\\"</span>):
</div>
<div class="line-context">
<span class="line-number">418</span>                    <span class="comment"># Remove the backslash <span class=<span class="string">"keyword"</span>>and</span> add a newline</span>
</div>
<div class="line-context">
<span class="line-number">419</span>                    macro_content = macro_content.<span class="function">rstrip</span>()[:-<span class="number">1</span>] + <span class="string">"\n"</span>
</div>
<div class="line-context">
<span class="line-number">420</span>                    current_line += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">421</span>
</div>
<div class="line-context">
<span class="line-number">422</span>                    <span class="comment"># Find the next line content</span>
</div>
<div class="line-context">
<span class="line-number">423</span>                    <span class=<span class="string">"keyword"</span>>if</span> current_line <= <span class="function">len</span>(lines):
</div>
<div class="line-context">
<span class="line-number">424</span>                        next_line = lines[current_line - <span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">425</span>                        macro_content += next_line
</div>
<div class="line-context">
<span class="line-number">426</span>                    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">427</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
</div>
<h4>Lines 419-420</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">409</span>            token = tokens[i]
</div>
<div class="line-context">
<span class="line-number">410</span>
</div>
<div class="line-context">
<span class="line-number">411</span>            <span class=<span class="string">"keyword"</span>>if</span> token.type == TokenType.DEFINE <span class=<span class="string">"keyword"</span>>and</span> token.value.<span class="function">rstrip</span>().<span class="function">endswith</span>(<span class="string">"\\"</span>):
</div>
<div class="line-context">
<span class="line-number">412</span>                <span class="comment"># Found a multi-line macro, merge <span class=<span class="string">"keyword"</span>>with</span> subsequent lines</span>
</div>
<div class="line-context">
<span class="line-number">413</span>                macro_content = token.value
</div>
<div class="line-context">
<span class="line-number">414</span>                current_line = token.line
</div>
<div class="line-context">
<span class="line-number">415</span>
</div>
<div class="line-context">
<span class="line-number">416</span>                <span class="comment"># Continue merging lines until we find one that doesn't end <span class=<span class="string">"keyword"</span>>with</span> backslash</span>
</div>
<div class="line-context">
<span class="line-number">417</span>                <span class=<span class="string">"keyword"</span>>while</span> macro_content.<span class="function">rstrip</span>().<span class="function">endswith</span>(<span class="string">"\\"</span>):
</div>
<div class="line-context">
<span class="line-number">418</span>                    <span class="comment"># Remove the backslash <span class=<span class="string">"keyword"</span>>and</span> add a newline</span>
</div>
<div class="line-uncovered">
<span class="line-number">419</span>                    macro_content = macro_content.<span class="function">rstrip</span>()[:-<span class="number">1</span>] + <span class="string">"\n"</span>
</div>
<div class="line-uncovered">
<span class="line-number">420</span>                    current_line += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">421</span>
</div>
<div class="line-context">
<span class="line-number">422</span>                    <span class="comment"># Find the next line content</span>
</div>
<div class="line-context">
<span class="line-number">423</span>                    <span class=<span class="string">"keyword"</span>>if</span> current_line <= <span class="function">len</span>(lines):
</div>
<div class="line-context">
<span class="line-number">424</span>                        next_line = lines[current_line - <span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">425</span>                        macro_content += next_line
</div>
<div class="line-context">
<span class="line-number">426</span>                    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">427</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">428</span>
</div>
<div class="line-context">
<span class="line-number">429</span>                <span class="comment"># Create a new token <span class=<span class="string">"keyword"</span>>with</span> the merged content</span>
</div>
<div class="line-context">
<span class="line-number">430</span>                merged_tokens.<span class="function">append</span>(
</div>
</div>
<h4>Lines 423-425</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">413</span>                macro_content = token.value
</div>
<div class="line-context">
<span class="line-number">414</span>                current_line = token.line
</div>
<div class="line-context">
<span class="line-number">415</span>
</div>
<div class="line-context">
<span class="line-number">416</span>                <span class="comment"># Continue merging lines until we find one that doesn't end <span class=<span class="string">"keyword"</span>>with</span> backslash</span>
</div>
<div class="line-context">
<span class="line-number">417</span>                <span class=<span class="string">"keyword"</span>>while</span> macro_content.<span class="function">rstrip</span>().<span class="function">endswith</span>(<span class="string">"\\"</span>):
</div>
<div class="line-context">
<span class="line-number">418</span>                    <span class="comment"># Remove the backslash <span class=<span class="string">"keyword"</span>>and</span> add a newline</span>
</div>
<div class="line-context">
<span class="line-number">419</span>                    macro_content = macro_content.<span class="function">rstrip</span>()[:-<span class="number">1</span>] + <span class="string">"\n"</span>
</div>
<div class="line-context">
<span class="line-number">420</span>                    current_line += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">421</span>
</div>
<div class="line-context">
<span class="line-number">422</span>                    <span class="comment"># Find the next line content</span>
</div>
<div class="line-uncovered">
<span class="line-number">423</span>                    <span class=<span class="string">"keyword"</span>>if</span> current_line <= <span class="function">len</span>(lines):
</div>
<div class="line-uncovered">
<span class="line-number">424</span>                        next_line = lines[current_line - <span class="number">1</span>]
</div>
<div class="line-uncovered">
<span class="line-number">425</span>                        macro_content += next_line
</div>
<div class="line-context">
<span class="line-number">426</span>                    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">427</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">428</span>
</div>
<div class="line-context">
<span class="line-number">429</span>                <span class="comment"># Create a new token <span class=<span class="string">"keyword"</span>>with</span> the merged content</span>
</div>
<div class="line-context">
<span class="line-number">430</span>                merged_tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">431</span>                    <span class="function">Token</span>(TokenType.DEFINE, macro_content, token.line, token.column)
</div>
<div class="line-context">
<span class="line-number">432</span>                )
</div>
<div class="line-context">
<span class="line-number">433</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">434</span>                merged_tokens.<span class="function">append</span>(token)
</div>
<div class="line-context">
<span class="line-number">435</span>
</div>
</div>
<h4>Line 427</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">417</span>                <span class=<span class="string">"keyword"</span>>while</span> macro_content.<span class="function">rstrip</span>().<span class="function">endswith</span>(<span class="string">"\\"</span>):
</div>
<div class="line-context">
<span class="line-number">418</span>                    <span class="comment"># Remove the backslash <span class=<span class="string">"keyword"</span>>and</span> add a newline</span>
</div>
<div class="line-context">
<span class="line-number">419</span>                    macro_content = macro_content.<span class="function">rstrip</span>()[:-<span class="number">1</span>] + <span class="string">"\n"</span>
</div>
<div class="line-context">
<span class="line-number">420</span>                    current_line += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">421</span>
</div>
<div class="line-context">
<span class="line-number">422</span>                    <span class="comment"># Find the next line content</span>
</div>
<div class="line-context">
<span class="line-number">423</span>                    <span class=<span class="string">"keyword"</span>>if</span> current_line <= <span class="function">len</span>(lines):
</div>
<div class="line-context">
<span class="line-number">424</span>                        next_line = lines[current_line - <span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">425</span>                        macro_content += next_line
</div>
<div class="line-context">
<span class="line-number">426</span>                    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">427</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">428</span>
</div>
<div class="line-context">
<span class="line-number">429</span>                <span class="comment"># Create a new token <span class=<span class="string">"keyword"</span>>with</span> the merged content</span>
</div>
<div class="line-context">
<span class="line-number">430</span>                merged_tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">431</span>                    <span class="function">Token</span>(TokenType.DEFINE, macro_content, token.line, token.column)
</div>
<div class="line-context">
<span class="line-number">432</span>                )
</div>
<div class="line-context">
<span class="line-number">433</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">434</span>                merged_tokens.<span class="function">append</span>(token)
</div>
<div class="line-context">
<span class="line-number">435</span>
</div>
<div class="line-context">
<span class="line-number">436</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">437</span>
</div>
</div>
<h4>Line 430</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">420</span>                    current_line += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">421</span>
</div>
<div class="line-context">
<span class="line-number">422</span>                    <span class="comment"># Find the next line content</span>
</div>
<div class="line-context">
<span class="line-number">423</span>                    <span class=<span class="string">"keyword"</span>>if</span> current_line <= <span class="function">len</span>(lines):
</div>
<div class="line-context">
<span class="line-number">424</span>                        next_line = lines[current_line - <span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">425</span>                        macro_content += next_line
</div>
<div class="line-context">
<span class="line-number">426</span>                    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">427</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">428</span>
</div>
<div class="line-context">
<span class="line-number">429</span>                <span class="comment"># Create a new token <span class=<span class="string">"keyword"</span>>with</span> the merged content</span>
</div>
<div class="line-uncovered">
<span class="line-number">430</span>                merged_tokens.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">431</span>                    <span class="function">Token</span>(TokenType.DEFINE, macro_content, token.line, token.column)
</div>
<div class="line-context">
<span class="line-number">432</span>                )
</div>
<div class="line-context">
<span class="line-number">433</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">434</span>                merged_tokens.<span class="function">append</span>(token)
</div>
<div class="line-context">
<span class="line-number">435</span>
</div>
<div class="line-context">
<span class="line-number">436</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">437</span>
</div>
<div class="line-context">
<span class="line-number">438</span>        <span class=<span class="string">"keyword"</span>>return</span> merged_tokens
</div>
<div class="line-context">
<span class="line-number">439</span>
</div>
<div class="line-context">
<span class="line-number">440</span>
</div>
</div>
<h4>Lines 532-533</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">522</span>                self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">523</span>
</div>
<div class="line-context">
<span class="line-number">524</span>        <span class=<span class="string">"keyword"</span>>return</span> unions
</div>
<div class="line-context">
<span class="line-number">525</span>
</div>
<div class="line-context">
<span class="line-number">526</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_current_token_is</span>(self, token_type: TokenType) -> bool:
</div>
<div class="line-context">
<span class="line-number">527</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> current token <span class="</span>keyword<span class="string">">is</span> of specified type"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">528</span>        <span class=<span class="string">"keyword"</span>>return</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.tokens[self.pos].type == token_type
</div>
<div class="line-context">
<span class="line-number">529</span>
</div>
<div class="line-context">
<span class="line-number">530</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_peek_token</span>(self, offset: int = <span class="number">1</span>) -> Optional[Token]:
</div>
<div class="line-context">
<span class="line-number">531</span>        <span class="string">""</span><span class="string">"Peek at token at current position + offset"</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number">532</span>        peek_pos = self.pos + offset
</div>
<div class="line-uncovered">
<span class="line-number">533</span>        <span class=<span class="string">"keyword"</span>>return</span> self.tokens[peek_pos] <span class=<span class="string">"keyword"</span>>if</span> peek_pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>else</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">534</span>
</div>
<div class="line-context">
<span class="line-number">535</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_advance</span>(self) -> Optional[Token]:
</div>
<div class="line-context">
<span class="line-number">536</span>        <span class="string">""</span><span class="string">"Advance to next token <span class="</span>keyword<span class="string">">and</span> <span class="</span>keyword<span class="string">">return</span> current"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">537</span>        <span class=<span class="string">"keyword"</span>>if</span> self.pos < <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">538</span>            token = self.tokens[self.pos]
</div>
<div class="line-context">
<span class="line-number">539</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">540</span>            <span class=<span class="string">"keyword"</span>>return</span> token
</div>
<div class="line-context">
<span class="line-number">541</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">542</span>
</div>
<div class="line-context">
<span class="line-number">543</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_matching_brace</span>(self, start_pos: int) -> Optional[int]:
</div>
</div>
<h4>Line 541</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">531</span>        <span class="string">""</span><span class="string">"Peek at token at current position + offset"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">532</span>        peek_pos = self.pos + offset
</div>
<div class="line-context">
<span class="line-number">533</span>        <span class=<span class="string">"keyword"</span>>return</span> self.tokens[peek_pos] <span class=<span class="string">"keyword"</span>>if</span> peek_pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>else</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">534</span>
</div>
<div class="line-context">
<span class="line-number">535</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_advance</span>(self) -> Optional[Token]:
</div>
<div class="line-context">
<span class="line-number">536</span>        <span class="string">""</span><span class="string">"Advance to next token <span class="</span>keyword<span class="string">">and</span> <span class="</span>keyword<span class="string">">return</span> current"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">537</span>        <span class=<span class="string">"keyword"</span>>if</span> self.pos < <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">538</span>            token = self.tokens[self.pos]
</div>
<div class="line-context">
<span class="line-number">539</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">540</span>            <span class=<span class="string">"keyword"</span>>return</span> token
</div>
<div class="line-uncovered">
<span class="line-number">541</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">542</span>
</div>
<div class="line-context">
<span class="line-number">543</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_matching_brace</span>(self, start_pos: int) -> Optional[int]:
</div>
<div class="line-context">
<span class="line-number">544</span>        <span class="string">""</span><span class="string">"Find matching closing brace starting <span class="</span>keyword<span class="string">">from</span> open brace position"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">545</span>        <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">546</span>            start_pos >= <span class="function">len</span>(self.tokens)
</div>
<div class="line-context">
<span class="line-number">547</span>            <span class=<span class="string">"keyword"</span>>or</span> self.tokens[start_pos].type != TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">548</span>        ):
</div>
<div class="line-context">
<span class="line-number">549</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">550</span>
</div>
<div class="line-context">
<span class="line-number">551</span>        depth = <span class="number">1</span>
</div>
</div>
<h4>Line 549</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">539</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">540</span>            <span class=<span class="string">"keyword"</span>>return</span> token
</div>
<div class="line-context">
<span class="line-number">541</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">542</span>
</div>
<div class="line-context">
<span class="line-number">543</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_matching_brace</span>(self, start_pos: int) -> Optional[int]:
</div>
<div class="line-context">
<span class="line-number">544</span>        <span class="string">""</span><span class="string">"Find matching closing brace starting <span class="</span>keyword<span class="string">">from</span> open brace position"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">545</span>        <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">546</span>            start_pos >= <span class="function">len</span>(self.tokens)
</div>
<div class="line-context">
<span class="line-number">547</span>            <span class=<span class="string">"keyword"</span>>or</span> self.tokens[start_pos].type != TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">548</span>        ):
</div>
<div class="line-uncovered">
<span class="line-number">549</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">550</span>
</div>
<div class="line-context">
<span class="line-number">551</span>        depth = <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">552</span>        pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">553</span>
</div>
<div class="line-context">
<span class="line-number">554</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> depth > <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">555</span>            <span class=<span class="string">"keyword"</span>>if</span> self.tokens[pos].type == TokenType.LBRACE:
</div>
<div class="line-context">
<span class="line-number">556</span>                depth += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">557</span>            <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[pos].type == TokenType.RBRACE:
</div>
<div class="line-context">
<span class="line-number">558</span>                depth -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">559</span>            pos += <span class="number">1</span>
</div>
</div>
<h4>Line 569</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">559</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">560</span>
</div>
<div class="line-context">
<span class="line-number">561</span>        <span class=<span class="string">"keyword"</span>>return</span> pos - <span class="number">1</span> <span class=<span class="string">"keyword"</span>>if</span> depth == <span class="number">0</span> <span class=<span class="string">"keyword"</span>>else</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">562</span>
</div>
<div class="line-context">
<span class="line-number">563</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_struct</span>(self) -> Optional[Tuple[int, int, str]]:
</div>
<div class="line-context">
<span class="line-number">564</span>        <span class="string">""</span><span class="string">"Parse struct definition starting at current position"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">565</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">566</span>
</div>
<div class="line-context">
<span class="line-number">567</span>        <span class="comment"># Consume <span class="string">'struct'</span> keyword</span>
</div>
<div class="line-context">
<span class="line-number">568</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.STRUCT):
</div>
<div class="line-uncovered">
<span class="line-number">569</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">570</span>        self.<span class="function">_advance</span>()
</div>
<div class="line-context">
<span class="line-number">571</span>
</div>
<div class="line-context">
<span class="line-number">572</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">573</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">574</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">575</span>        ):
</div>
<div class="line-context">
<span class="line-number">576</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">577</span>
</div>
<div class="line-context">
<span class="line-number">578</span>        <span class="comment"># Get struct tag <span class="function">name</span>(optional <span class=<span class="string">"keyword"</span>>for</span> anonymous structs)</span>
</div>
<div class="line-context">
<span class="line-number">579</span>        struct_tag = <span class="string">""</span>
</div>
</div>
<h4>Line 597</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">587</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">588</span>
</div>
<div class="line-context">
<span class="line-number">589</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.LBRACE):
</div>
<div class="line-context">
<span class="line-number">590</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">591</span>
</div>
<div class="line-context">
<span class="line-number">592</span>        <span class="comment"># Find matching closing brace</span>
</div>
<div class="line-context">
<span class="line-number">593</span>        brace_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">594</span>        end_brace_pos = self.<span class="function">_find_matching_brace</span>(brace_pos)
</div>
<div class="line-context">
<span class="line-number">595</span>
</div>
<div class="line-context">
<span class="line-number">596</span>        <span class=<span class="string">"keyword"</span>>if</span> end_brace_pos <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number">597</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">598</span>
</div>
<div class="line-context">
<span class="line-number">599</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> struct name after closing brace</span>
</div>
<div class="line-context">
<span class="line-number">600</span>        name_pos = end_brace_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">601</span>        struct_name = struct_tag  <span class="comment"># Default to tag name</span>
</div>
<div class="line-context">
<span class="line-number">602</span>
</div>
<div class="line-context">
<span class="line-number">603</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a typedef struct by looking backwards</span>
</div>
<div class="line-context">
<span class="line-number">604</span>        is_typedef = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">605</span>        check_pos = start_pos - <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">606</span>        <span class=<span class="string">"keyword"</span>>while</span> check_pos >= <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">607</span>            <span class=<span class="string">"keyword"</span>>if</span> self.tokens[check_pos].type == TokenType.TYPEDEF:
</div>
</div>
<h4>Line 654</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">644</span>
</div>
<div class="line-context">
<span class="line-number">645</span>        end_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">646</span>        <span class=<span class="string">"keyword"</span>>return</span> (start_pos, end_pos, struct_name)
</div>
<div class="line-context">
<span class="line-number">647</span>
</div>
<div class="line-context">
<span class="line-number">648</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_typedef_struct</span>(self) -> Optional[Tuple[int, int, str]]:
</div>
<div class="line-context">
<span class="line-number">649</span>        <span class="string">""</span><span class="string">"Parse typedef struct definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">650</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">651</span>
</div>
<div class="line-context">
<span class="line-number">652</span>        <span class="comment"># Consume <span class="string">'typedef'</span></span>
</div>
<div class="line-context">
<span class="line-number">653</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.TYPEDEF):
</div>
<div class="line-uncovered">
<span class="line-number">654</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">655</span>        self.<span class="function">_advance</span>()
</div>
<div class="line-context">
<span class="line-number">656</span>
</div>
<div class="line-context">
<span class="line-number">657</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> <span class="string">'struct'</span></span>
</div>
<div class="line-context">
<span class="line-number">658</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.STRUCT):
</div>
<div class="line-context">
<span class="line-number">659</span>            <span class="comment"># Not a typedef struct, reset position</span>
</div>
<div class="line-context">
<span class="line-number">660</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">661</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">662</span>
</div>
<div class="line-context">
<span class="line-number">663</span>        <span class="comment"># Skip <span class="string">'struct'</span></span>
</div>
<div class="line-context">
<span class="line-number">664</span>        self.<span class="function">_advance</span>()
</div>
</div>
<h4>Line 670</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">660</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">661</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">662</span>
</div>
<div class="line-context">
<span class="line-number">663</span>        <span class="comment"># Skip <span class="string">'struct'</span></span>
</div>
<div class="line-context">
<span class="line-number">664</span>        self.<span class="function">_advance</span>()
</div>
<div class="line-context">
<span class="line-number">665</span>
</div>
<div class="line-context">
<span class="line-number">666</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">667</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">668</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">669</span>        ):
</div>
<div class="line-uncovered">
<span class="line-number">670</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">671</span>
</div>
<div class="line-context">
<span class="line-number">672</span>        <span class="comment"># Get struct tag <span class="function">name</span>(optional)</span>
</div>
<div class="line-context">
<span class="line-number">673</span>        struct_tag = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">674</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">675</span>            struct_tag = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">676</span>
</div>
<div class="line-context">
<span class="line-number">677</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">678</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">679</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">680</span>        ):
</div>
</div>
<h4>Line 681</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">671</span>
</div>
<div class="line-context">
<span class="line-number">672</span>        <span class="comment"># Get struct tag <span class="function">name</span>(optional)</span>
</div>
<div class="line-context">
<span class="line-number">673</span>        struct_tag = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">674</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">675</span>            struct_tag = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">676</span>
</div>
<div class="line-context">
<span class="line-number">677</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">678</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">679</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">680</span>        ):
</div>
<div class="line-uncovered">
<span class="line-number">681</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">682</span>
</div>
<div class="line-context">
<span class="line-number">683</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a forward <span class="function">declaration</span>(no braces)</span>
</div>
<div class="line-context">
<span class="line-number">684</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.LBRACE):
</div>
<div class="line-context">
<span class="line-number">685</span>            <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a forward declaration like <span class="string">"typedef struct Node* NodePtr;"</span></span>
</div>
<div class="line-context">
<span class="line-number">686</span>            <span class="comment"># Not a struct definition, so skip it</span>
</div>
<div class="line-context">
<span class="line-number">687</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">688</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">689</span>
</div>
<div class="line-context">
<span class="line-number">690</span>        <span class="comment"># Find matching closing brace</span>
</div>
<div class="line-context">
<span class="line-number">691</span>        end_brace_pos = self.<span class="function">_find_matching_brace</span>(self.pos)
</div>
</div>
<h4>Lines 693-694</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">683</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a forward <span class="function">declaration</span>(no braces)</span>
</div>
<div class="line-context">
<span class="line-number">684</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.LBRACE):
</div>
<div class="line-context">
<span class="line-number">685</span>            <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a forward declaration like <span class="string">"typedef struct Node* NodePtr;"</span></span>
</div>
<div class="line-context">
<span class="line-number">686</span>            <span class="comment"># Not a struct definition, so skip it</span>
</div>
<div class="line-context">
<span class="line-number">687</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">688</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">689</span>
</div>
<div class="line-context">
<span class="line-number">690</span>        <span class="comment"># Find matching closing brace</span>
</div>
<div class="line-context">
<span class="line-number">691</span>        end_brace_pos = self.<span class="function">_find_matching_brace</span>(self.pos)
</div>
<div class="line-context">
<span class="line-number">692</span>        <span class=<span class="string">"keyword"</span>>if</span> end_brace_pos <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number">693</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">694</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">695</span>
</div>
<div class="line-context">
<span class="line-number">696</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> typedef name after closing brace</span>
</div>
<div class="line-context">
<span class="line-number">697</span>        typedef_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">698</span>        name_pos = end_brace_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">699</span>        <span class=<span class="string">"keyword"</span>>while</span> name_pos < <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">700</span>            <span class=<span class="string">"keyword"</span>>if</span> self.tokens[name_pos].type == TokenType.IDENTIFIER:
</div>
<div class="line-context">
<span class="line-number">701</span>                typedef_name = self.tokens[name_pos].value
</div>
<div class="line-context">
<span class="line-number">702</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">703</span>            <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[name_pos].type == TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">704</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
</div>
<h4>Lines 703-705</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">693</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">694</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">695</span>
</div>
<div class="line-context">
<span class="line-number">696</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> typedef name after closing brace</span>
</div>
<div class="line-context">
<span class="line-number">697</span>        typedef_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">698</span>        name_pos = end_brace_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">699</span>        <span class=<span class="string">"keyword"</span>>while</span> name_pos < <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">700</span>            <span class=<span class="string">"keyword"</span>>if</span> self.tokens[name_pos].type == TokenType.IDENTIFIER:
</div>
<div class="line-context">
<span class="line-number">701</span>                typedef_name = self.tokens[name_pos].value
</div>
<div class="line-context">
<span class="line-number">702</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-uncovered">
<span class="line-number">703</span>            <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[name_pos].type == TokenType.SEMICOLON:
</div>
<div class="line-uncovered">
<span class="line-number">704</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-uncovered">
<span class="line-number">705</span>            name_pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">706</span>
</div>
<div class="line-context">
<span class="line-number">707</span>        <span class="comment"># Find semicolon</span>
</div>
<div class="line-context">
<span class="line-number">708</span>        <span class=<span class="string">"keyword"</span>>while</span> (
</div>
<div class="line-context">
<span class="line-number">709</span>            name_pos < <span class="function">len</span>(self.tokens)
</div>
<div class="line-context">
<span class="line-number">710</span>            <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.tokens[name_pos].type == TokenType.SEMICOLON
</div>
<div class="line-context">
<span class="line-number">711</span>        ):
</div>
<div class="line-context">
<span class="line-number">712</span>            name_pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">713</span>
</div>
<div class="line-context">
<span class="line-number">714</span>        end_pos = name_pos
</div>
<div class="line-context">
<span class="line-number">715</span>        <span class=<span class="string">"keyword"</span>>return</span> (start_pos, end_pos, typedef_name)
</div>
</div>
<h4>Line 723</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">713</span>
</div>
<div class="line-context">
<span class="line-number">714</span>        end_pos = name_pos
</div>
<div class="line-context">
<span class="line-number">715</span>        <span class=<span class="string">"keyword"</span>>return</span> (start_pos, end_pos, typedef_name)
</div>
<div class="line-context">
<span class="line-number">716</span>
</div>
<div class="line-context">
<span class="line-number">717</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_enum</span>(self) -> Optional[Tuple[int, int, str]]:
</div>
<div class="line-context">
<span class="line-number">718</span>        <span class="string">""</span><span class="string">"Parse enum definition starting at current position"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">719</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">720</span>
</div>
<div class="line-context">
<span class="line-number">721</span>        <span class="comment"># Consume <span class="string">'enum'</span> keyword</span>
</div>
<div class="line-context">
<span class="line-number">722</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.ENUM):
</div>
<div class="line-uncovered">
<span class="line-number">723</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">724</span>        self.<span class="function">_advance</span>()
</div>
<div class="line-context">
<span class="line-number">725</span>
</div>
<div class="line-context">
<span class="line-number">726</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">727</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">728</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">729</span>        ):
</div>
<div class="line-context">
<span class="line-number">730</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">731</span>
</div>
<div class="line-context">
<span class="line-number">732</span>        <span class="comment"># Get enum tag <span class="function">name</span>(optional <span class=<span class="string">"keyword"</span>>for</span> anonymous enums)</span>
</div>
<div class="line-context">
<span class="line-number">733</span>        enum_tag = <span class="string">""</span>
</div>
</div>
<h4>Line 751</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">741</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">742</span>
</div>
<div class="line-context">
<span class="line-number">743</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.LBRACE):
</div>
<div class="line-context">
<span class="line-number">744</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">745</span>
</div>
<div class="line-context">
<span class="line-number">746</span>        <span class="comment"># Find matching closing brace</span>
</div>
<div class="line-context">
<span class="line-number">747</span>        brace_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">748</span>        end_brace_pos = self.<span class="function">_find_matching_brace</span>(brace_pos)
</div>
<div class="line-context">
<span class="line-number">749</span>
</div>
<div class="line-context">
<span class="line-number">750</span>        <span class=<span class="string">"keyword"</span>>if</span> end_brace_pos <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number">751</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">752</span>
</div>
<div class="line-context">
<span class="line-number">753</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> enum name after closing brace</span>
</div>
<div class="line-context">
<span class="line-number">754</span>        name_pos = end_brace_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">755</span>        enum_name = enum_tag  <span class="comment"># Default to tag name</span>
</div>
<div class="line-context">
<span class="line-number">756</span>
</div>
<div class="line-context">
<span class="line-number">757</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a typedef enum by looking backwards</span>
</div>
<div class="line-context">
<span class="line-number">758</span>        is_typedef = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">759</span>        check_pos = start_pos - <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">760</span>        <span class=<span class="string">"keyword"</span>>while</span> check_pos >= <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">761</span>            <span class=<span class="string">"keyword"</span>>if</span> self.tokens[check_pos].type == TokenType.TYPEDEF:
</div>
</div>
<h4>Line 779</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">769</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">770</span>            check_pos -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">771</span>
</div>
<div class="line-context">
<span class="line-number">772</span>        <span class=<span class="string">"keyword"</span>>if</span> is_typedef:
</div>
<div class="line-context">
<span class="line-number">773</span>            <span class="comment"># For typedef enum, look <span class=<span class="string">"keyword"</span>>for</span> the typedef name after the closing brace</span>
</div>
<div class="line-context">
<span class="line-number">774</span>            <span class=<span class="string">"keyword"</span>>while</span> name_pos < <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">775</span>                <span class=<span class="string">"keyword"</span>>if</span> self.tokens[name_pos].type == TokenType.IDENTIFIER:
</div>
<div class="line-context">
<span class="line-number">776</span>                    enum_name = self.tokens[name_pos].value
</div>
<div class="line-context">
<span class="line-number">777</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">778</span>                <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[name_pos].type == TokenType.SEMICOLON:
</div>
<div class="line-uncovered">
<span class="line-number">779</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">780</span>                name_pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">781</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> enum_tag:
</div>
<div class="line-context">
<span class="line-number">782</span>            <span class="comment"># Anonymous enum - check <span class=<span class="string">"keyword"</span>>if</span> there's a variable name after the brace</span>
</div>
<div class="line-context">
<span class="line-number">783</span>            <span class=<span class="string">"keyword"</span>>while</span> name_pos < <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">784</span>                <span class=<span class="string">"keyword"</span>>if</span> self.tokens[name_pos].type == TokenType.IDENTIFIER:
</div>
<div class="line-context">
<span class="line-number">785</span>                    <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a variable name, <span class=<span class="string">"keyword"</span>>not</span> an enum name</span>
</div>
<div class="line-context">
<span class="line-number">786</span>                    enum_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">787</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">788</span>                <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[name_pos].type == TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">789</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
</div>
<h4>Lines 788-790</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">778</span>                <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[name_pos].type == TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">779</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">780</span>                name_pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">781</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> enum_tag:
</div>
<div class="line-context">
<span class="line-number">782</span>            <span class="comment"># Anonymous enum - check <span class=<span class="string">"keyword"</span>>if</span> there's a variable name after the brace</span>
</div>
<div class="line-context">
<span class="line-number">783</span>            <span class=<span class="string">"keyword"</span>>while</span> name_pos < <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">784</span>                <span class=<span class="string">"keyword"</span>>if</span> self.tokens[name_pos].type == TokenType.IDENTIFIER:
</div>
<div class="line-context">
<span class="line-number">785</span>                    <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a variable name, <span class=<span class="string">"keyword"</span>>not</span> an enum name</span>
</div>
<div class="line-context">
<span class="line-number">786</span>                    enum_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">787</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-uncovered">
<span class="line-number">788</span>                <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[name_pos].type == TokenType.SEMICOLON:
</div>
<div class="line-uncovered">
<span class="line-number">789</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-uncovered">
<span class="line-number">790</span>                name_pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">791</span>
</div>
<div class="line-context">
<span class="line-number">792</span>        <span class="comment"># Find semicolon</span>
</div>
<div class="line-context">
<span class="line-number">793</span>        self.pos = end_brace_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">794</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">795</span>            TokenType.SEMICOLON
</div>
<div class="line-context">
<span class="line-number">796</span>        ):
</div>
<div class="line-context">
<span class="line-number">797</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">798</span>
</div>
<div class="line-context">
<span class="line-number">799</span>        end_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">800</span>        <span class=<span class="string">"keyword"</span>>return</span> (start_pos, end_pos, enum_name)
</div>
</div>
<h4>Line 808</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">798</span>
</div>
<div class="line-context">
<span class="line-number">799</span>        end_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">800</span>        <span class=<span class="string">"keyword"</span>>return</span> (start_pos, end_pos, enum_name)
</div>
<div class="line-context">
<span class="line-number">801</span>
</div>
<div class="line-context">
<span class="line-number">802</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_typedef_enum</span>(self) -> Optional[Tuple[int, int, str]]:
</div>
<div class="line-context">
<span class="line-number">803</span>        <span class="string">""</span><span class="string">"Parse typedef enum definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">804</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">805</span>
</div>
<div class="line-context">
<span class="line-number">806</span>        <span class="comment"># Consume <span class="string">'typedef'</span></span>
</div>
<div class="line-context">
<span class="line-number">807</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.TYPEDEF):
</div>
<div class="line-uncovered">
<span class="line-number">808</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">809</span>        self.<span class="function">_advance</span>()
</div>
<div class="line-context">
<span class="line-number">810</span>
</div>
<div class="line-context">
<span class="line-number">811</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> <span class="string">'enum'</span></span>
</div>
<div class="line-context">
<span class="line-number">812</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.ENUM):
</div>
<div class="line-context">
<span class="line-number">813</span>            <span class="comment"># Not a typedef enum, reset position</span>
</div>
<div class="line-context">
<span class="line-number">814</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">815</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">816</span>
</div>
<div class="line-context">
<span class="line-number">817</span>        <span class="comment"># Parse the enum part - this will <span class=<span class="string">"keyword"</span>>return</span> the tag <span class="function">name</span>(e.g., StatusEnum_tag)</span>
</div>
<div class="line-context">
<span class="line-number">818</span>        enum_info = self.<span class="function">_parse_enum</span>()
</div>
</div>
<h4>Lines 820-821</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">810</span>
</div>
<div class="line-context">
<span class="line-number">811</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> <span class="string">'enum'</span></span>
</div>
<div class="line-context">
<span class="line-number">812</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.ENUM):
</div>
<div class="line-context">
<span class="line-number">813</span>            <span class="comment"># Not a typedef enum, reset position</span>
</div>
<div class="line-context">
<span class="line-number">814</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">815</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">816</span>
</div>
<div class="line-context">
<span class="line-number">817</span>        <span class="comment"># Parse the enum part - this will <span class=<span class="string">"keyword"</span>>return</span> the tag <span class="function">name</span>(e.g., StatusEnum_tag)</span>
</div>
<div class="line-context">
<span class="line-number">818</span>        enum_info = self.<span class="function">_parse_enum</span>()
</div>
<div class="line-context">
<span class="line-number">819</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum_info:
</div>
<div class="line-uncovered">
<span class="line-number">820</span>            self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">821</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">822</span>
</div>
<div class="line-context">
<span class="line-number">823</span>        <span class="comment"># For typedef enums, we want to <span class=<span class="string">"keyword"</span>>return</span> the tag name, <span class=<span class="string">"keyword"</span>>not</span> the typedef name</span>
</div>
<div class="line-context">
<span class="line-number">824</span>        <span class="comment"># The typedef name will be handled separately <span class=<span class="string">"keyword"</span>>in</span> the parser</span>
</div>
<div class="line-context">
<span class="line-number">825</span>        <span class=<span class="string">"keyword"</span>>return</span> enum_info
</div>
<div class="line-context">
<span class="line-number">826</span>
</div>
<div class="line-context">
<span class="line-number">827</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_function</span>(self) -> Optional[Tuple[int, int, str, str, bool]]:
</div>
<div class="line-context">
<span class="line-number">828</span>        <span class="string">""</span>"Parse function declaration/definition
</div>
<div class="line-context">
<span class="line-number">829</span>
</div>
<div class="line-context">
<span class="line-number">830</span>        Returns:
</div>
<div class="line-context">
<span class="line-number">831</span>            Tuple <span class="function">of</span>(start_pos, end_pos, func_name, return_type, is_declaration)
</div>
</div>
<h4>Line 946</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">936</span>            <span class=<span class="string">"keyword"</span>>if</span> self.pos - start_pos > <span class="number">50</span>:
</div>
<div class="line-context">
<span class="line-number">937</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">938</span>
</div>
<div class="line-context">
<span class="line-number">939</span>        <span class="comment"># Reset position <span class=<span class="string">"keyword"</span>>if</span> no function found</span>
</div>
<div class="line-context">
<span class="line-number">940</span>        self.pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">941</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">942</span>
</div>
<div class="line-context">
<span class="line-number">943</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_is_function_declaration</span>(self, end_pos: int) -> bool:
</div>
<div class="line-context">
<span class="line-number">944</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> the function at end_pos <span class="</span>keyword<span class="string">">is</span> a <span class="function">declaration</span>(ends <span class="</span>keyword<span class="string">">with</span> ;) <span class="</span>keyword<span class="string">">or</span> <span class="function">definition</span>(ends <span class="</span>keyword<span class="string">">with</span> })"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">945</span>        <span class=<span class="string">"keyword"</span>>if</span> end_pos >= <span class="function">len</span>(self.tokens):
</div>
<div class="line-uncovered">
<span class="line-number">946</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">947</span>
</div>
<div class="line-context">
<span class="line-number">948</span>        <span class="comment"># Look backwards <span class=<span class="string">"keyword"</span>>from</span> end_pos to find the last significant token</span>
</div>
<div class="line-context">
<span class="line-number">949</span>        pos = end_pos
</div>
<div class="line-context">
<span class="line-number">950</span>        <span class=<span class="string">"keyword"</span>>while</span> pos >= <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">951</span>            token_type = self.tokens[pos].type
</div>
<div class="line-context">
<span class="line-number">952</span>            <span class=<span class="string">"keyword"</span>>if</span> token_type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">953</span>                TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">954</span>                TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">955</span>                TokenType.NEWLINE,
</div>
<div class="line-context">
<span class="line-number">956</span>            ]:
</div>
</div>
<h4>Line 958</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">948</span>        <span class="comment"># Look backwards <span class=<span class="string">"keyword"</span>>from</span> end_pos to find the last significant token</span>
</div>
<div class="line-context">
<span class="line-number">949</span>        pos = end_pos
</div>
<div class="line-context">
<span class="line-number">950</span>        <span class=<span class="string">"keyword"</span>>while</span> pos >= <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">951</span>            token_type = self.tokens[pos].type
</div>
<div class="line-context">
<span class="line-number">952</span>            <span class=<span class="string">"keyword"</span>>if</span> token_type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">953</span>                TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">954</span>                TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">955</span>                TokenType.NEWLINE,
</div>
<div class="line-context">
<span class="line-number">956</span>            ]:
</div>
<div class="line-context">
<span class="line-number">957</span>                <span class=<span class="string">"keyword"</span>>return</span> token_type == TokenType.SEMICOLON
</div>
<div class="line-uncovered">
<span class="line-number">958</span>            pos -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">959</span>
</div>
<div class="line-context">
<span class="line-number">960</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">961</span>
</div>
<div class="line-context">
<span class="line-number">962</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_function_end</span>(self, start_pos: int) -> Optional[int]:
</div>
<div class="line-context">
<span class="line-number">963</span>        <span class="string">""</span><span class="string">"Find end of function declaration <span class="</span>keyword<span class="string">">or</span> definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">964</span>        pos = start_pos
</div>
<div class="line-context">
<span class="line-number">965</span>
</div>
<div class="line-context">
<span class="line-number">966</span>        <span class="comment"># Find matching closing parenthesis</span>
</div>
<div class="line-context">
<span class="line-number">967</span>        <span class=<span class="string">"keyword"</span>>if</span> pos >= <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>or</span> self.tokens[pos].type != TokenType.LPAREN:
</div>
<div class="line-context">
<span class="line-number">968</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
</div>
<h4>Line 960</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">950</span>        <span class=<span class="string">"keyword"</span>>while</span> pos >= <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">951</span>            token_type = self.tokens[pos].type
</div>
<div class="line-context">
<span class="line-number">952</span>            <span class=<span class="string">"keyword"</span>>if</span> token_type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">953</span>                TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">954</span>                TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">955</span>                TokenType.NEWLINE,
</div>
<div class="line-context">
<span class="line-number">956</span>            ]:
</div>
<div class="line-context">
<span class="line-number">957</span>                <span class=<span class="string">"keyword"</span>>return</span> token_type == TokenType.SEMICOLON
</div>
<div class="line-context">
<span class="line-number">958</span>            pos -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">959</span>
</div>
<div class="line-uncovered">
<span class="line-number">960</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">961</span>
</div>
<div class="line-context">
<span class="line-number">962</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_function_end</span>(self, start_pos: int) -> Optional[int]:
</div>
<div class="line-context">
<span class="line-number">963</span>        <span class="string">""</span><span class="string">"Find end of function declaration <span class="</span>keyword<span class="string">">or</span> definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">964</span>        pos = start_pos
</div>
<div class="line-context">
<span class="line-number">965</span>
</div>
<div class="line-context">
<span class="line-number">966</span>        <span class="comment"># Find matching closing parenthesis</span>
</div>
<div class="line-context">
<span class="line-number">967</span>        <span class=<span class="string">"keyword"</span>>if</span> pos >= <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>or</span> self.tokens[pos].type != TokenType.LPAREN:
</div>
<div class="line-context">
<span class="line-number">968</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">969</span>
</div>
<div class="line-context">
<span class="line-number">970</span>        depth = <span class="number">1</span>
</div>
</div>
<h4>Line 968</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">958</span>            pos -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">959</span>
</div>
<div class="line-context">
<span class="line-number">960</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">961</span>
</div>
<div class="line-context">
<span class="line-number">962</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_function_end</span>(self, start_pos: int) -> Optional[int]:
</div>
<div class="line-context">
<span class="line-number">963</span>        <span class="string">""</span><span class="string">"Find end of function declaration <span class="</span>keyword<span class="string">">or</span> definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">964</span>        pos = start_pos
</div>
<div class="line-context">
<span class="line-number">965</span>
</div>
<div class="line-context">
<span class="line-number">966</span>        <span class="comment"># Find matching closing parenthesis</span>
</div>
<div class="line-context">
<span class="line-number">967</span>        <span class=<span class="string">"keyword"</span>>if</span> pos >= <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>or</span> self.tokens[pos].type != TokenType.LPAREN:
</div>
<div class="line-uncovered">
<span class="line-number">968</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">969</span>
</div>
<div class="line-context">
<span class="line-number">970</span>        depth = <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">971</span>        pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">972</span>
</div>
<div class="line-context">
<span class="line-number">973</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> depth > <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">974</span>            <span class=<span class="string">"keyword"</span>>if</span> self.tokens[pos].type == TokenType.LPAREN:
</div>
<div class="line-context">
<span class="line-number">975</span>                depth += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">976</span>            <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[pos].type == TokenType.RPAREN:
</div>
<div class="line-context">
<span class="line-number">977</span>                depth -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">978</span>            pos += <span class="number">1</span>
</div>
</div>
<h4>Line 993</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">983</span>        <span class="comment"># Now look <span class=<span class="string">"keyword"</span>>for</span> either ; (declaration) <span class=<span class="string">"keyword"</span>>or</span> { (definition)</span>
</div>
<div class="line-context">
<span class="line-number">984</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">985</span>            <span class=<span class="string">"keyword"</span>>if</span> self.tokens[pos].type == TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">986</span>                <span class=<span class="string">"keyword"</span>>return</span> pos
</div>
<div class="line-context">
<span class="line-number">987</span>            <span class=<span class="string">"keyword"</span>>elif</span> self.tokens[pos].type == TokenType.LBRACE:
</div>
<div class="line-context">
<span class="line-number">988</span>                <span class="comment"># Function definition - find matching brace</span>
</div>
<div class="line-context">
<span class="line-number">989</span>                end_brace = self.<span class="function">_find_matching_brace</span>(pos)
</div>
<div class="line-context">
<span class="line-number">990</span>                <span class=<span class="string">"keyword"</span>>return</span> end_brace <span class=<span class="string">"keyword"</span>>if</span> end_brace <span class=<span class="string">"keyword"</span>>else</span> pos
</div>
<div class="line-context">
<span class="line-number">991</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">992</span>
</div>
<div class="line-uncovered">
<span class="line-number">993</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">994</span>
</div>
<div class="line-context">
<span class="line-number">995</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_union</span>(self) -> Optional[Tuple[int, int, str]]:
</div>
<div class="line-context">
<span class="line-number">996</span>        <span class="string">""</span><span class="string">"Parse union definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">997</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.UNION):
</div>
<div class="line-context">
<span class="line-number">998</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">999</span>
</div>
<div class="line-context">
<span class="line-number">1000</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">1001</span>        self.<span class="function">_advance</span>()  <span class="comment"># Consumes <span class="string">'union'</span></span>
</div>
<div class="line-context">
<span class="line-number">1002</span>
</div>
<div class="line-context">
<span class="line-number">1003</span>        <span class="comment"># Skip whitespace</span>
</div>
</div>
<h4>Line 998</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">988</span>                <span class="comment"># Function definition - find matching brace</span>
</div>
<div class="line-context">
<span class="line-number">989</span>                end_brace = self.<span class="function">_find_matching_brace</span>(pos)
</div>
<div class="line-context">
<span class="line-number">990</span>                <span class=<span class="string">"keyword"</span>>return</span> end_brace <span class=<span class="string">"keyword"</span>>if</span> end_brace <span class=<span class="string">"keyword"</span>>else</span> pos
</div>
<div class="line-context">
<span class="line-number">991</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">992</span>
</div>
<div class="line-context">
<span class="line-number">993</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">994</span>
</div>
<div class="line-context">
<span class="line-number">995</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_union</span>(self) -> Optional[Tuple[int, int, str]]:
</div>
<div class="line-context">
<span class="line-number">996</span>        <span class="string">""</span><span class="string">"Parse union definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">997</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.UNION):
</div>
<div class="line-uncovered">
<span class="line-number">998</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">999</span>
</div>
<div class="line-context">
<span class="line-number">1000</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">1001</span>        self.<span class="function">_advance</span>()  <span class="comment"># Consumes <span class="string">'union'</span></span>
</div>
<div class="line-context">
<span class="line-number">1002</span>
</div>
<div class="line-context">
<span class="line-number">1003</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">1004</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1005</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">1006</span>        ):
</div>
<div class="line-context">
<span class="line-number">1007</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1008</span>
</div>
</div>
<h4>Line 1007</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">997</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.UNION):
</div>
<div class="line-context">
<span class="line-number">998</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">999</span>
</div>
<div class="line-context">
<span class="line-number">1000</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">1001</span>        self.<span class="function">_advance</span>()  <span class="comment"># Consumes <span class="string">'union'</span></span>
</div>
<div class="line-context">
<span class="line-number">1002</span>
</div>
<div class="line-context">
<span class="line-number">1003</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">1004</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1005</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">1006</span>        ):
</div>
<div class="line-uncovered">
<span class="line-number">1007</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1008</span>
</div>
<div class="line-context">
<span class="line-number">1009</span>        <span class="comment"># Get union tag <span class="function">name</span>(optional <span class=<span class="string">"keyword"</span>>for</span> anonymous unions)</span>
</div>
<div class="line-context">
<span class="line-number">1010</span>        union_tag = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1011</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">1012</span>            union_tag = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">1013</span>
</div>
<div class="line-context">
<span class="line-number">1014</span>        <span class="comment"># Find opening brace</span>
</div>
<div class="line-context">
<span class="line-number">1015</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1016</span>            TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1017</span>        ):
</div>
</div>
<h4>Line 1026</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1016</span>            TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1017</span>        ):
</div>
<div class="line-context">
<span class="line-number">1018</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1019</span>
</div>
<div class="line-context">
<span class="line-number">1020</span>        <span class=<span class="string">"keyword"</span>>if</span> self.pos >= <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">1021</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1022</span>
</div>
<div class="line-context">
<span class="line-number">1023</span>        <span class="comment"># Find matching closing brace</span>
</div>
<div class="line-context">
<span class="line-number">1024</span>        end_pos = self.<span class="function">_find_matching_brace</span>(self.pos)
</div>
<div class="line-context">
<span class="line-number">1025</span>        <span class=<span class="string">"keyword"</span>>if</span> end_pos <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number">1026</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1027</span>
</div>
<div class="line-context">
<span class="line-number">1028</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> union name after closing <span class="function">brace</span>(<span class=<span class="string">"keyword"</span>>for</span> typedefs <span class=<span class="string">"keyword"</span>>or</span> named unions)</span>
</div>
<div class="line-context">
<span class="line-number">1029</span>        union_name = union_tag  <span class="comment"># Default to tag name</span>
</div>
<div class="line-context">
<span class="line-number">1030</span>
</div>
<div class="line-context">
<span class="line-number">1031</span>        <span class="comment"># Skip to semicolon</span>
</div>
<div class="line-context">
<span class="line-number">1032</span>        self.pos = end_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1033</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1034</span>            TokenType.SEMICOLON
</div>
<div class="line-context">
<span class="line-number">1035</span>        ):
</div>
<div class="line-context">
<span class="line-number">1036</span>            <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
</div>
<h4>Lines 1036-1039</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1026</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1027</span>
</div>
<div class="line-context">
<span class="line-number">1028</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> union name after closing <span class="function">brace</span>(<span class=<span class="string">"keyword"</span>>for</span> typedefs <span class=<span class="string">"keyword"</span>>or</span> named unions)</span>
</div>
<div class="line-context">
<span class="line-number">1029</span>        union_name = union_tag  <span class="comment"># Default to tag name</span>
</div>
<div class="line-context">
<span class="line-number">1030</span>
</div>
<div class="line-context">
<span class="line-number">1031</span>        <span class="comment"># Skip to semicolon</span>
</div>
<div class="line-context">
<span class="line-number">1032</span>        self.pos = end_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1033</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1034</span>            TokenType.SEMICOLON
</div>
<div class="line-context">
<span class="line-number">1035</span>        ):
</div>
<div class="line-uncovered">
<span class="line-number">1036</span>            <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-uncovered">
<span class="line-number">1037</span>                union_name = self.<span class="function">_advance</span>().value
</div>
<div class="line-uncovered">
<span class="line-number">1038</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-uncovered">
<span class="line-number">1039</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1040</span>
</div>
<div class="line-context">
<span class="line-number">1041</span>        <span class=<span class="string">"keyword"</span>>return</span> (start_pos, end_pos, union_name)
</div>
<div class="line-context">
<span class="line-number">1042</span>
</div>
<div class="line-context">
<span class="line-number">1043</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_typedef_union</span>(self) -> Optional[Tuple[int, int, str]]:
</div>
<div class="line-context">
<span class="line-number">1044</span>        <span class="string">""</span><span class="string">"Parse typedef union definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1045</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.TYPEDEF):
</div>
<div class="line-context">
<span class="line-number">1046</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1047</span>
</div>
<div class="line-context">
<span class="line-number">1048</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">1049</span>        self.<span class="function">_advance</span>()  <span class="comment"># Consumes <span class="string">'typedef'</span></span>
</div>
</div>
<h4>Line 1046</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1036</span>            <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">1037</span>                union_name = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">1038</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1039</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1040</span>
</div>
<div class="line-context">
<span class="line-number">1041</span>        <span class=<span class="string">"keyword"</span>>return</span> (start_pos, end_pos, union_name)
</div>
<div class="line-context">
<span class="line-number">1042</span>
</div>
<div class="line-context">
<span class="line-number">1043</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_typedef_union</span>(self) -> Optional[Tuple[int, int, str]]:
</div>
<div class="line-context">
<span class="line-number">1044</span>        <span class="string">""</span><span class="string">"Parse typedef union definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1045</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.TYPEDEF):
</div>
<div class="line-uncovered">
<span class="line-number">1046</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1047</span>
</div>
<div class="line-context">
<span class="line-number">1048</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">1049</span>        self.<span class="function">_advance</span>()  <span class="comment"># Consumes <span class="string">'typedef'</span></span>
</div>
<div class="line-context">
<span class="line-number">1050</span>
</div>
<div class="line-context">
<span class="line-number">1051</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">1052</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1053</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">1054</span>        ):
</div>
<div class="line-context">
<span class="line-number">1055</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1056</span>
</div>
</div>
<h4>Line 1055</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1045</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.TYPEDEF):
</div>
<div class="line-context">
<span class="line-number">1046</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1047</span>
</div>
<div class="line-context">
<span class="line-number">1048</span>        start_pos = self.pos
</div>
<div class="line-context">
<span class="line-number">1049</span>        self.<span class="function">_advance</span>()  <span class="comment"># Consumes <span class="string">'typedef'</span></span>
</div>
<div class="line-context">
<span class="line-number">1050</span>
</div>
<div class="line-context">
<span class="line-number">1051</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">1052</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1053</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">1054</span>        ):
</div>
<div class="line-uncovered">
<span class="line-number">1055</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1056</span>
</div>
<div class="line-context">
<span class="line-number">1057</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> next token <span class=<span class="string">"keyword"</span>>is</span> <span class="string">'union'</span></span>
</div>
<div class="line-context">
<span class="line-number">1058</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.UNION):
</div>
<div class="line-context">
<span class="line-number">1059</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1060</span>
</div>
<div class="line-context">
<span class="line-number">1061</span>        self.<span class="function">_advance</span>()  <span class="comment"># Consumes <span class="string">'union'</span></span>
</div>
<div class="line-context">
<span class="line-number">1062</span>
</div>
<div class="line-context">
<span class="line-number">1063</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">1064</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1065</span>            TokenType.WHITESPACE
</div>
</div>
<h4>Line 1067</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1057</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> next token <span class=<span class="string">"keyword"</span>>is</span> <span class="string">'union'</span></span>
</div>
<div class="line-context">
<span class="line-number">1058</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(TokenType.UNION):
</div>
<div class="line-context">
<span class="line-number">1059</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1060</span>
</div>
<div class="line-context">
<span class="line-number">1061</span>        self.<span class="function">_advance</span>()  <span class="comment"># Consumes <span class="string">'union'</span></span>
</div>
<div class="line-context">
<span class="line-number">1062</span>
</div>
<div class="line-context">
<span class="line-number">1063</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">1064</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1065</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">1066</span>        ):
</div>
<div class="line-uncovered">
<span class="line-number">1067</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1068</span>
</div>
<div class="line-context">
<span class="line-number">1069</span>        <span class="comment"># Get union tag <span class="function">name</span>(optional)</span>
</div>
<div class="line-context">
<span class="line-number">1070</span>        union_tag = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1071</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">1072</span>            union_tag = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">1073</span>
</div>
<div class="line-context">
<span class="line-number">1074</span>        <span class="comment"># Find opening brace</span>
</div>
<div class="line-context">
<span class="line-number">1075</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1076</span>            TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1077</span>        ):
</div>
</div>
<h4>Line 1072</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1062</span>
</div>
<div class="line-context">
<span class="line-number">1063</span>        <span class="comment"># Skip whitespace</span>
</div>
<div class="line-context">
<span class="line-number">1064</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1065</span>            TokenType.WHITESPACE
</div>
<div class="line-context">
<span class="line-number">1066</span>        ):
</div>
<div class="line-context">
<span class="line-number">1067</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1068</span>
</div>
<div class="line-context">
<span class="line-number">1069</span>        <span class="comment"># Get union tag <span class="function">name</span>(optional)</span>
</div>
<div class="line-context">
<span class="line-number">1070</span>        union_tag = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1071</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-uncovered">
<span class="line-number">1072</span>            union_tag = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">1073</span>
</div>
<div class="line-context">
<span class="line-number">1074</span>        <span class="comment"># Find opening brace</span>
</div>
<div class="line-context">
<span class="line-number">1075</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1076</span>            TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1077</span>        ):
</div>
<div class="line-context">
<span class="line-number">1078</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1079</span>
</div>
<div class="line-context">
<span class="line-number">1080</span>        <span class=<span class="string">"keyword"</span>>if</span> self.pos >= <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">1081</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1082</span>
</div>
</div>
<h4>Line 1078</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1068</span>
</div>
<div class="line-context">
<span class="line-number">1069</span>        <span class="comment"># Get union tag <span class="function">name</span>(optional)</span>
</div>
<div class="line-context">
<span class="line-number">1070</span>        union_tag = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1071</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">1072</span>            union_tag = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">1073</span>
</div>
<div class="line-context">
<span class="line-number">1074</span>        <span class="comment"># Find opening brace</span>
</div>
<div class="line-context">
<span class="line-number">1075</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1076</span>            TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1077</span>        ):
</div>
<div class="line-uncovered">
<span class="line-number">1078</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1079</span>
</div>
<div class="line-context">
<span class="line-number">1080</span>        <span class=<span class="string">"keyword"</span>>if</span> self.pos >= <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">1081</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1082</span>
</div>
<div class="line-context">
<span class="line-number">1083</span>        <span class="comment"># Find matching closing brace</span>
</div>
<div class="line-context">
<span class="line-number">1084</span>        end_pos = self.<span class="function">_find_matching_brace</span>(self.pos)
</div>
<div class="line-context">
<span class="line-number">1085</span>        <span class=<span class="string">"keyword"</span>>if</span> end_pos <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">1086</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1087</span>
</div>
<div class="line-context">
<span class="line-number">1088</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> typedef name after closing brace</span>
</div>
</div>
<h4>Line 1081</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1071</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">1072</span>            union_tag = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">1073</span>
</div>
<div class="line-context">
<span class="line-number">1074</span>        <span class="comment"># Find opening brace</span>
</div>
<div class="line-context">
<span class="line-number">1075</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1076</span>            TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1077</span>        ):
</div>
<div class="line-context">
<span class="line-number">1078</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1079</span>
</div>
<div class="line-context">
<span class="line-number">1080</span>        <span class=<span class="string">"keyword"</span>>if</span> self.pos >= <span class="function">len</span>(self.tokens):
</div>
<div class="line-uncovered">
<span class="line-number">1081</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1082</span>
</div>
<div class="line-context">
<span class="line-number">1083</span>        <span class="comment"># Find matching closing brace</span>
</div>
<div class="line-context">
<span class="line-number">1084</span>        end_pos = self.<span class="function">_find_matching_brace</span>(self.pos)
</div>
<div class="line-context">
<span class="line-number">1085</span>        <span class=<span class="string">"keyword"</span>>if</span> end_pos <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">1086</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1087</span>
</div>
<div class="line-context">
<span class="line-number">1088</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> typedef name after closing brace</span>
</div>
<div class="line-context">
<span class="line-number">1089</span>        typedef_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1090</span>        self.pos = end_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1091</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
</div>
<h4>Line 1086</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1076</span>            TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1077</span>        ):
</div>
<div class="line-context">
<span class="line-number">1078</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1079</span>
</div>
<div class="line-context">
<span class="line-number">1080</span>        <span class=<span class="string">"keyword"</span>>if</span> self.pos >= <span class="function">len</span>(self.tokens):
</div>
<div class="line-context">
<span class="line-number">1081</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1082</span>
</div>
<div class="line-context">
<span class="line-number">1083</span>        <span class="comment"># Find matching closing brace</span>
</div>
<div class="line-context">
<span class="line-number">1084</span>        end_pos = self.<span class="function">_find_matching_brace</span>(self.pos)
</div>
<div class="line-context">
<span class="line-number">1085</span>        <span class=<span class="string">"keyword"</span>>if</span> end_pos <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number">1086</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1087</span>
</div>
<div class="line-context">
<span class="line-number">1088</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> typedef name after closing brace</span>
</div>
<div class="line-context">
<span class="line-number">1089</span>        typedef_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1090</span>        self.pos = end_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1091</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1092</span>            TokenType.SEMICOLON
</div>
<div class="line-context">
<span class="line-number">1093</span>        ):
</div>
<div class="line-context">
<span class="line-number">1094</span>            <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">1095</span>                typedef_name = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">1096</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
</div>
<h4>Line 1097</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1087</span>
</div>
<div class="line-context">
<span class="line-number">1088</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> typedef name after closing brace</span>
</div>
<div class="line-context">
<span class="line-number">1089</span>        typedef_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1090</span>        self.pos = end_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1091</span>        <span class=<span class="string">"keyword"</span>>while</span> self.pos < <span class="function">len</span>(self.tokens) <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_current_token_is</span>(
</div>
<div class="line-context">
<span class="line-number">1092</span>            TokenType.SEMICOLON
</div>
<div class="line-context">
<span class="line-number">1093</span>        ):
</div>
<div class="line-context">
<span class="line-number">1094</span>            <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_current_token_is</span>(TokenType.IDENTIFIER):
</div>
<div class="line-context">
<span class="line-number">1095</span>                typedef_name = self.<span class="function">_advance</span>().value
</div>
<div class="line-context">
<span class="line-number">1096</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-uncovered">
<span class="line-number">1097</span>            self.pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1098</span>
</div>
<div class="line-context">
<span class="line-number">1099</span>        <span class=<span class="string">"keyword"</span>>return</span> (start_pos, end_pos, typedef_name)
</div>
<div class="line-context">
<span class="line-number">1100</span>
</div>
<div class="line-context">
<span class="line-number">1101</span>
</div>
<div class="line-context">
<span class="line-number">1102</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">extract_token_range</span>(tokens: List[Token], start: int, end: int) -> str:
</div>
<div class="line-context">
<span class="line-number">1103</span>    <span class="string">""</span><span class="string">"Extract raw text <span class="</span>keyword<span class="string">">from</span> token range, excluding whitespace, comments, <span class="</span>keyword<span class="string">">and</span> newlines"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1104</span>    <span class=<span class="string">"keyword"</span>>if</span> start >= <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>or</span> end >= <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>or</span> start > end:
</div>
<div class="line-context">
<span class="line-number">1105</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1106</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class="string">" "</span>.<span class="function">join</span>(
</div>
<div class="line-context">
<span class="line-number">1107</span>        token.value
</div>
</div>
<h4>Line 1126</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1116</span>) -> List[Tuple[str, str]]:
</div>
<div class="line-context">
<span class="line-number">1117</span>    <span class="string">""</span><span class="string">"Extract field information <span class="</span>keyword">from</span> struct token range
</div>
<div class="line-context">
<span class="line-number">1118</span>    Returns:
</div>
<div class="line-context">
<span class="line-number">1119</span>        List of <span class="function">tuples</span>(field_name, field_type)
</div>
<div class="line-context">
<span class="line-number">1120</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number">1121</span>    fields = []
</div>
<div class="line-context">
<span class="line-number">1122</span>    pos = struct_start
</div>
<div class="line-context">
<span class="line-number">1123</span>    <span class=<span class="string">"keyword"</span>>while</span> pos <= struct_end <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type != TokenType.LBRACE:
</div>
<div class="line-context">
<span class="line-number">1124</span>        pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1125</span>    <span class=<span class="string">"keyword"</span>>if</span> pos > struct_end:
</div>
<div class="line-uncovered">
<span class="line-number">1126</span>        <span class=<span class="string">"keyword"</span>>return</span> fields
</div>
<div class="line-context">
<span class="line-number">1127</span>    pos += <span class="number">1</span>  <span class="comment"># Skip opening brace</span>
</div>
<div class="line-context">
<span class="line-number">1128</span>
</div>
<div class="line-context">
<span class="line-number">1129</span>    <span class="comment"># Find the closing brace position</span>
</div>
<div class="line-context">
<span class="line-number">1130</span>    closing_brace_pos = pos
</div>
<div class="line-context">
<span class="line-number">1131</span>    <span class=<span class="string">"keyword"</span>>while</span> (
</div>
<div class="line-context">
<span class="line-number">1132</span>        closing_brace_pos <= struct_end
</div>
<div class="line-context">
<span class="line-number">1133</span>        <span class=<span class="string">"keyword"</span>>and</span> tokens[closing_brace_pos].type != TokenType.RBRACE
</div>
<div class="line-context">
<span class="line-number">1134</span>    ):
</div>
<div class="line-context">
<span class="line-number">1135</span>        closing_brace_pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1136</span>
</div>
</div>
<h4>Line 1155</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1145</span>        <span class="comment"># Parse field <span class=<span class="string">"keyword"</span>>from</span> collected tokens</span>
</div>
<div class="line-context">
<span class="line-number">1146</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">len</span>(field_tokens) >= <span class="number">2</span>:
</div>
<div class="line-context">
<span class="line-number">1147</span>            <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a nested struct field</span>
</div>
<div class="line-context">
<span class="line-number">1148</span>            <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1149</span>                <span class="function">len</span>(field_tokens) >= <span class="number">3</span>
</div>
<div class="line-context">
<span class="line-number">1150</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">0</span>].type == TokenType.STRUCT
</div>
<div class="line-context">
<span class="line-number">1151</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">1</span>].type == TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1152</span>            ):
</div>
<div class="line-context">
<span class="line-number">1153</span>                <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a nested anonymous struct</span>
</div>
<div class="line-context">
<span class="line-number">1154</span>                <span class="comment"># Find the struct <span class="function">name</span>(last token before semicolon)</span>
</div>
<div class="line-uncovered">
<span class="line-number">1155</span>                field_name = field_tokens[-<span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">1156</span>                <span class="comment"># Create a simplified type representation <span class=<span class="string">"keyword"</span>>for</span> nested struct</span>
</div>
<div class="line-context">
<span class="line-number">1157</span>                field_type = <span class="string">"struct { ... }"</span>
</div>
<div class="line-context">
<span class="line-number">1158</span>                <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1159</span>                    field_name
</div>
<div class="line-context">
<span class="line-number">1160</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1161</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"["</span>, <span class="string">"]"</span>, <span class="string">";"</span>, <span class="string">"}"</span>]
</div>
<div class="line-context">
<span class="line-number">1162</span>                ):
</div>
<div class="line-context">
<span class="line-number">1163</span>                    stripped_name = field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1164</span>                    <span class=<span class="string">"keyword"</span>>if</span> stripped_name:
</div>
<div class="line-context">
<span class="line-number">1165</span>                        fields.<span class="function">append</span>((stripped_name, field_type))
</div>
</div>
<h4>Lines 1157-1158</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1147</span>            <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a nested struct field</span>
</div>
<div class="line-context">
<span class="line-number">1148</span>            <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1149</span>                <span class="function">len</span>(field_tokens) >= <span class="number">3</span>
</div>
<div class="line-context">
<span class="line-number">1150</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">0</span>].type == TokenType.STRUCT
</div>
<div class="line-context">
<span class="line-number">1151</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">1</span>].type == TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1152</span>            ):
</div>
<div class="line-context">
<span class="line-number">1153</span>                <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a nested anonymous struct</span>
</div>
<div class="line-context">
<span class="line-number">1154</span>                <span class="comment"># Find the struct <span class="function">name</span>(last token before semicolon)</span>
</div>
<div class="line-context">
<span class="line-number">1155</span>                field_name = field_tokens[-<span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">1156</span>                <span class="comment"># Create a simplified type representation <span class=<span class="string">"keyword"</span>>for</span> nested struct</span>
</div>
<div class="line-uncovered">
<span class="line-number">1157</span>                field_type = <span class="string">"struct { ... }"</span>
</div>
<div class="line-uncovered">
<span class="line-number">1158</span>                <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1159</span>                    field_name
</div>
<div class="line-context">
<span class="line-number">1160</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1161</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"["</span>, <span class="string">"]"</span>, <span class="string">";"</span>, <span class="string">"}"</span>]
</div>
<div class="line-context">
<span class="line-number">1162</span>                ):
</div>
<div class="line-context">
<span class="line-number">1163</span>                    stripped_name = field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1164</span>                    <span class=<span class="string">"keyword"</span>>if</span> stripped_name:
</div>
<div class="line-context">
<span class="line-number">1165</span>                        fields.<span class="function">append</span>((stripped_name, field_type))
</div>
<div class="line-context">
<span class="line-number">1166</span>                        <span class="comment"># Skip parsing the nested struct's fields <span class=<span class="string">"keyword"</span>>as</span> separate fields</span>
</div>
<div class="line-context">
<span class="line-number">1167</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">1168</span>            <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a nested struct field <span class=<span class="string">"keyword"</span>>with</span> more complex structure</span>
</div>
</div>
<h4>Lines 1163-1165</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1153</span>                <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a nested anonymous struct</span>
</div>
<div class="line-context">
<span class="line-number">1154</span>                <span class="comment"># Find the struct <span class="function">name</span>(last token before semicolon)</span>
</div>
<div class="line-context">
<span class="line-number">1155</span>                field_name = field_tokens[-<span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">1156</span>                <span class="comment"># Create a simplified type representation <span class=<span class="string">"keyword"</span>>for</span> nested struct</span>
</div>
<div class="line-context">
<span class="line-number">1157</span>                field_type = <span class="string">"struct { ... }"</span>
</div>
<div class="line-context">
<span class="line-number">1158</span>                <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1159</span>                    field_name
</div>
<div class="line-context">
<span class="line-number">1160</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1161</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"["</span>, <span class="string">"]"</span>, <span class="string">";"</span>, <span class="string">"}"</span>]
</div>
<div class="line-context">
<span class="line-number">1162</span>                ):
</div>
<div class="line-uncovered">
<span class="line-number">1163</span>                    stripped_name = field_name.<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">1164</span>                    <span class=<span class="string">"keyword"</span>>if</span> stripped_name:
</div>
<div class="line-uncovered">
<span class="line-number">1165</span>                        fields.<span class="function">append</span>((stripped_name, field_type))
</div>
<div class="line-context">
<span class="line-number">1166</span>                        <span class="comment"># Skip parsing the nested struct's fields <span class=<span class="string">"keyword"</span>>as</span> separate fields</span>
</div>
<div class="line-context">
<span class="line-number">1167</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">1168</span>            <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a nested struct field <span class=<span class="string">"keyword"</span>>with</span> more complex structure</span>
</div>
<div class="line-context">
<span class="line-number">1169</span>            <span class=<span class="string">"keyword"</span>>elif</span> (
</div>
<div class="line-context">
<span class="line-number">1170</span>                <span class="function">len</span>(field_tokens) >= <span class="number">4</span>
</div>
<div class="line-context">
<span class="line-number">1171</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">0</span>].type == TokenType.STRUCT
</div>
<div class="line-context">
<span class="line-number">1172</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">1</span>].type == TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1173</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[-<span class="number">1</span>].type == TokenType.IDENTIFIER
</div>
<div class="line-context">
<span class="line-number">1174</span>            ):
</div>
<div class="line-context">
<span class="line-number">1175</span>                <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a nested anonymous struct <span class=<span class="string">"keyword"</span>>with</span> a name</span>
</div>
</div>
<h4>Line 1167</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1157</span>                field_type = <span class="string">"struct { ... }"</span>
</div>
<div class="line-context">
<span class="line-number">1158</span>                <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1159</span>                    field_name
</div>
<div class="line-context">
<span class="line-number">1160</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1161</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"["</span>, <span class="string">"]"</span>, <span class="string">";"</span>, <span class="string">"}"</span>]
</div>
<div class="line-context">
<span class="line-number">1162</span>                ):
</div>
<div class="line-context">
<span class="line-number">1163</span>                    stripped_name = field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1164</span>                    <span class=<span class="string">"keyword"</span>>if</span> stripped_name:
</div>
<div class="line-context">
<span class="line-number">1165</span>                        fields.<span class="function">append</span>((stripped_name, field_type))
</div>
<div class="line-context">
<span class="line-number">1166</span>                        <span class="comment"># Skip parsing the nested struct's fields <span class=<span class="string">"keyword"</span>>as</span> separate fields</span>
</div>
<div class="line-uncovered">
<span class="line-number">1167</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">1168</span>            <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a nested struct field <span class=<span class="string">"keyword"</span>>with</span> more complex structure</span>
</div>
<div class="line-context">
<span class="line-number">1169</span>            <span class=<span class="string">"keyword"</span>>elif</span> (
</div>
<div class="line-context">
<span class="line-number">1170</span>                <span class="function">len</span>(field_tokens) >= <span class="number">4</span>
</div>
<div class="line-context">
<span class="line-number">1171</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">0</span>].type == TokenType.STRUCT
</div>
<div class="line-context">
<span class="line-number">1172</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">1</span>].type == TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1173</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[-<span class="number">1</span>].type == TokenType.IDENTIFIER
</div>
<div class="line-context">
<span class="line-number">1174</span>            ):
</div>
<div class="line-context">
<span class="line-number">1175</span>                <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a nested anonymous struct <span class=<span class="string">"keyword"</span>>with</span> a name</span>
</div>
<div class="line-context">
<span class="line-number">1176</span>                field_name = field_tokens[-<span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">1177</span>                field_type = <span class="string">"struct { ... }"</span>
</div>
</div>
<h4>Lines 1176-1178</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1166</span>                        <span class="comment"># Skip parsing the nested struct's fields <span class=<span class="string">"keyword"</span>>as</span> separate fields</span>
</div>
<div class="line-context">
<span class="line-number">1167</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">1168</span>            <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a nested struct field <span class=<span class="string">"keyword"</span>>with</span> more complex structure</span>
</div>
<div class="line-context">
<span class="line-number">1169</span>            <span class=<span class="string">"keyword"</span>>elif</span> (
</div>
<div class="line-context">
<span class="line-number">1170</span>                <span class="function">len</span>(field_tokens) >= <span class="number">4</span>
</div>
<div class="line-context">
<span class="line-number">1171</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">0</span>].type == TokenType.STRUCT
</div>
<div class="line-context">
<span class="line-number">1172</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[<span class="number">1</span>].type == TokenType.LBRACE
</div>
<div class="line-context">
<span class="line-number">1173</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[-<span class="number">1</span>].type == TokenType.IDENTIFIER
</div>
<div class="line-context">
<span class="line-number">1174</span>            ):
</div>
<div class="line-context">
<span class="line-number">1175</span>                <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a nested anonymous struct <span class=<span class="string">"keyword"</span>>with</span> a name</span>
</div>
<div class="line-uncovered">
<span class="line-number">1176</span>                field_name = field_tokens[-<span class="number">1</span>].value
</div>
<div class="line-uncovered">
<span class="line-number">1177</span>                field_type = <span class="string">"struct { ... }"</span>
</div>
<div class="line-uncovered">
<span class="line-number">1178</span>                <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1179</span>                    field_name
</div>
<div class="line-context">
<span class="line-number">1180</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1181</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"["</span>, <span class="string">"]"</span>, <span class="string">";"</span>, <span class="string">"}"</span>]
</div>
<div class="line-context">
<span class="line-number">1182</span>                ):
</div>
<div class="line-context">
<span class="line-number">1183</span>                    stripped_name = field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1184</span>                    <span class=<span class="string">"keyword"</span>>if</span> stripped_name:
</div>
<div class="line-context">
<span class="line-number">1185</span>                        fields.<span class="function">append</span>((stripped_name, field_type))
</div>
<div class="line-context">
<span class="line-number">1186</span>                        <span class="comment"># Skip parsing the nested struct's fields <span class=<span class="string">"keyword"</span>>as</span> separate fields</span>
</div>
<div class="line-context">
<span class="line-number">1187</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">1188</span>            <span class="comment"># Array field: type name [ size ]</span>
</div>
</div>
<h4>Lines 1183-1185</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1173</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[-<span class="number">1</span>].type == TokenType.IDENTIFIER
</div>
<div class="line-context">
<span class="line-number">1174</span>            ):
</div>
<div class="line-context">
<span class="line-number">1175</span>                <span class="comment"># This <span class=<span class="string">"keyword"</span>>is</span> a nested anonymous struct <span class=<span class="string">"keyword"</span>>with</span> a name</span>
</div>
<div class="line-context">
<span class="line-number">1176</span>                field_name = field_tokens[-<span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">1177</span>                field_type = <span class="string">"struct { ... }"</span>
</div>
<div class="line-context">
<span class="line-number">1178</span>                <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1179</span>                    field_name
</div>
<div class="line-context">
<span class="line-number">1180</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1181</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"["</span>, <span class="string">"]"</span>, <span class="string">";"</span>, <span class="string">"}"</span>]
</div>
<div class="line-context">
<span class="line-number">1182</span>                ):
</div>
<div class="line-uncovered">
<span class="line-number">1183</span>                    stripped_name = field_name.<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">1184</span>                    <span class=<span class="string">"keyword"</span>>if</span> stripped_name:
</div>
<div class="line-uncovered">
<span class="line-number">1185</span>                        fields.<span class="function">append</span>((stripped_name, field_type))
</div>
<div class="line-context">
<span class="line-number">1186</span>                        <span class="comment"># Skip parsing the nested struct's fields <span class=<span class="string">"keyword"</span>>as</span> separate fields</span>
</div>
<div class="line-context">
<span class="line-number">1187</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">1188</span>            <span class="comment"># Array field: type name [ size ]</span>
</div>
<div class="line-context">
<span class="line-number">1189</span>            <span class=<span class="string">"keyword"</span>>elif</span> (
</div>
<div class="line-context">
<span class="line-number">1190</span>                <span class="function">len</span>(field_tokens) >= <span class="number">4</span>
</div>
<div class="line-context">
<span class="line-number">1191</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[-<span class="number">3</span>].type == TokenType.LBRACKET
</div>
<div class="line-context">
<span class="line-number">1192</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[-<span class="number">1</span>].type == TokenType.RBRACKET
</div>
<div class="line-context">
<span class="line-number">1193</span>            ):
</div>
<div class="line-context">
<span class="line-number">1194</span>                field_name = field_tokens[-<span class="number">4</span>].value
</div>
<div class="line-context">
<span class="line-number">1195</span>                <span class="comment"># Fix: Put the size inside the brackets, <span class=<span class="string">"keyword"</span>>not</span> before them</span>
</div>
</div>
<h4>Line 1187</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1177</span>                field_type = <span class="string">"struct { ... }"</span>
</div>
<div class="line-context">
<span class="line-number">1178</span>                <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">1179</span>                    field_name
</div>
<div class="line-context">
<span class="line-number">1180</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1181</span>                    <span class=<span class="string">"keyword"</span>>and</span> field_name <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"["</span>, <span class="string">"]"</span>, <span class="string">";"</span>, <span class="string">"}"</span>]
</div>
<div class="line-context">
<span class="line-number">1182</span>                ):
</div>
<div class="line-context">
<span class="line-number">1183</span>                    stripped_name = field_name.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">1184</span>                    <span class=<span class="string">"keyword"</span>>if</span> stripped_name:
</div>
<div class="line-context">
<span class="line-number">1185</span>                        fields.<span class="function">append</span>((stripped_name, field_type))
</div>
<div class="line-context">
<span class="line-number">1186</span>                        <span class="comment"># Skip parsing the nested struct's fields <span class=<span class="string">"keyword"</span>>as</span> separate fields</span>
</div>
<div class="line-uncovered">
<span class="line-number">1187</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">1188</span>            <span class="comment"># Array field: type name [ size ]</span>
</div>
<div class="line-context">
<span class="line-number">1189</span>            <span class=<span class="string">"keyword"</span>>elif</span> (
</div>
<div class="line-context">
<span class="line-number">1190</span>                <span class="function">len</span>(field_tokens) >= <span class="number">4</span>
</div>
<div class="line-context">
<span class="line-number">1191</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[-<span class="number">3</span>].type == TokenType.LBRACKET
</div>
<div class="line-context">
<span class="line-number">1192</span>                <span class=<span class="string">"keyword"</span>>and</span> field_tokens[-<span class="number">1</span>].type == TokenType.RBRACKET
</div>
<div class="line-context">
<span class="line-number">1193</span>            ):
</div>
<div class="line-context">
<span class="line-number">1194</span>                field_name = field_tokens[-<span class="number">4</span>].value
</div>
<div class="line-context">
<span class="line-number">1195</span>                <span class="comment"># Fix: Put the size inside the brackets, <span class=<span class="string">"keyword"</span>>not</span> before them</span>
</div>
<div class="line-context">
<span class="line-number">1196</span>                field_type = (
</div>
<div class="line-context">
<span class="line-number">1197</span>                    <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> field_tokens[:-<span class="number">4</span>])
</div>
</div>
<h4>Line 1240</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1230</span>    <span class=<span class="string">"keyword"</span>>return</span> fields
</div>
<div class="line-context">
<span class="line-number">1231</span>
</div>
<div class="line-context">
<span class="line-number">1232</span>
</div>
<div class="line-context">
<span class="line-number">1233</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">find_enum_values</span>(tokens: List[Token], enum_start: int, enum_end: int) -> List[str]:
</div>
<div class="line-context">
<span class="line-number">1234</span>    <span class="string">""</span><span class="string">"Extract enum values <span class="</span>keyword<span class="string">">from</span> enum token range"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1235</span>    values = []
</div>
<div class="line-context">
<span class="line-number">1236</span>    pos = enum_start
</div>
<div class="line-context">
<span class="line-number">1237</span>    <span class=<span class="string">"keyword"</span>>while</span> pos <= enum_end <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type != TokenType.LBRACE:
</div>
<div class="line-context">
<span class="line-number">1238</span>        pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1239</span>    <span class=<span class="string">"keyword"</span>>if</span> pos > enum_end:
</div>
<div class="line-uncovered">
<span class="line-number">1240</span>        <span class=<span class="string">"keyword"</span>>return</span> values
</div>
<div class="line-context">
<span class="line-number">1241</span>    pos += <span class="number">1</span>  <span class="comment"># Skip opening brace</span>
</div>
<div class="line-context">
<span class="line-number">1242</span>    current_value = []
</div>
<div class="line-context">
<span class="line-number">1243</span>    <span class=<span class="string">"keyword"</span>>while</span> pos <= enum_end <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type != TokenType.RBRACE:
</div>
<div class="line-context">
<span class="line-number">1244</span>        token = tokens[pos]
</div>
<div class="line-context">
<span class="line-number">1245</span>        <span class=<span class="string">"keyword"</span>>if</span> token.type == TokenType.COMMA:
</div>
<div class="line-context">
<span class="line-number">1246</span>            <span class=<span class="string">"keyword"</span>>if</span> current_value:
</div>
<div class="line-context">
<span class="line-number">1247</span>                filtered_value = [
</div>
<div class="line-context">
<span class="line-number">1248</span>                    t
</div>
<div class="line-context">
<span class="line-number">1249</span>                    <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> current_value
</div>
<div class="line-context">
<span class="line-number">1250</span>                    <span class=<span class="string">"keyword"</span>>if</span> t.type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [TokenType.WHITESPACE, TokenType.COMMENT]
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/main.py
<span class="coverage-info">53.61% (52/97 lines covered)</span>
</div>
<h4>Line 38</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 28</span>        format=<span class="string">"%(asctime)s - %(name)s - %(levelname)s - %(message)s"</span>,
</div>
<div class="line-context">
<span class="line-number"> 29</span>        handlers=[logging.<span class="function">StreamHandler</span>(sys.stdout)],
</div>
<div class="line-context">
<span class="line-number"> 30</span>    )
</div>
<div class="line-context">
<span class="line-number"> 31</span>
</div>
<div class="line-context">
<span class="line-number"> 32</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">load_config_from_path</span>(config_path: str) -> dict:
</div>
<div class="line-context">
<span class="line-number"> 34</span>    path = <span class="function">Path</span>(config_path)
</div>
<div class="line-context">
<span class="line-number"> 35</span>    <span class=<span class="string">"keyword"</span>>if</span> path.<span class="function">is_file</span>():
</div>
<div class="line-context">
<span class="line-number"> 36</span>        <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(path, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number"> 37</span>            <span class=<span class="string">"keyword"</span>>return</span> json.<span class="function">load</span>(f)
</div>
<div class="line-uncovered">
<span class="line-number"> 38</span>    <span class=<span class="string">"keyword"</span>>elif</span> path.<span class="function">is_dir</span>():
</div>
<div class="line-context">
<span class="line-number"> 39</span>        <span class="comment"># Merge all .json files <span class=<span class="string">"keyword"</span>>in</span> the folder</span>
</div>
<div class="line-context">
<span class="line-number"> 40</span>        config = {}
</div>
<div class="line-context">
<span class="line-number"> 41</span>        <span class=<span class="string">"keyword"</span>>for</span> file <span class=<span class="string">"keyword"</span>>in</span> path.<span class="function">glob</span>(<span class="string">"*.json"</span>):
</div>
<div class="line-context">
<span class="line-number"> 42</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number"> 43</span>                data = json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number"> 44</span>                config.<span class="function">update</span>(data)
</div>
<div class="line-context">
<span class="line-number"> 45</span>        <span class=<span class="string">"keyword"</span>>return</span> config
</div>
<div class="line-context">
<span class="line-number"> 46</span>    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number"> 47</span>        <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">FileNotFoundError</span>(f<span class="string">"Config path <span class="</span>keyword<span class="string">">not</span> found: {config_path}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 48</span>
</div>
</div>
<h4>Lines 40-45</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 30</span>    )
</div>
<div class="line-context">
<span class="line-number"> 31</span>
</div>
<div class="line-context">
<span class="line-number"> 32</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">load_config_from_path</span>(config_path: str) -> dict:
</div>
<div class="line-context">
<span class="line-number"> 34</span>    path = <span class="function">Path</span>(config_path)
</div>
<div class="line-context">
<span class="line-number"> 35</span>    <span class=<span class="string">"keyword"</span>>if</span> path.<span class="function">is_file</span>():
</div>
<div class="line-context">
<span class="line-number"> 36</span>        <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(path, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number"> 37</span>            <span class=<span class="string">"keyword"</span>>return</span> json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number"> 38</span>    <span class=<span class="string">"keyword"</span>>elif</span> path.<span class="function">is_dir</span>():
</div>
<div class="line-context">
<span class="line-number"> 39</span>        <span class="comment"># Merge all .json files <span class=<span class="string">"keyword"</span>>in</span> the folder</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 40</span>        config = {}
</div>
<div class="line-uncovered">
<span class="line-number"> 41</span>        <span class=<span class="string">"keyword"</span>>for</span> file <span class=<span class="string">"keyword"</span>>in</span> path.<span class="function">glob</span>(<span class="string">"*.json"</span>):
</div>
<div class="line-uncovered">
<span class="line-number"> 42</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-uncovered">
<span class="line-number"> 43</span>                data = json.<span class="function">load</span>(f)
</div>
<div class="line-uncovered">
<span class="line-number"> 44</span>                config.<span class="function">update</span>(data)
</div>
<div class="line-uncovered">
<span class="line-number"> 45</span>        <span class=<span class="string">"keyword"</span>>return</span> config
</div>
<div class="line-context">
<span class="line-number"> 46</span>    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number"> 47</span>        <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">FileNotFoundError</span>(f<span class="string">"Config path <span class="</span>keyword<span class="string">">not</span> found: {config_path}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 48</span>
</div>
<div class="line-context">
<span class="line-number"> 49</span>
</div>
<div class="line-context">
<span class="line-number"> 50</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">main</span>() -> int:
</div>
<div class="line-context">
<span class="line-number"> 51</span>    parser = argparse.<span class="function">ArgumentParser</span>(
</div>
<div class="line-context">
<span class="line-number"> 52</span>        description=<span class="string">"C to PlantUML <span class="function">Converter</span>(Simplified CLI)"</span>,
</div>
<div class="line-context">
<span class="line-number"> 53</span>        formatter_class=argparse.RawDescriptionHelpFormatter,
</div>
<div class="line-context">
<span class="line-number"> 54</span>        epilog=<span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 55</span>Usage:
</div>
</div>
<h4>Line 47</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 37</span>            <span class=<span class="string">"keyword"</span>>return</span> json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number"> 38</span>    <span class=<span class="string">"keyword"</span>>elif</span> path.<span class="function">is_dir</span>():
</div>
<div class="line-context">
<span class="line-number"> 39</span>        <span class="comment"># Merge all .json files <span class=<span class="string">"keyword"</span>>in</span> the folder</span>
</div>
<div class="line-context">
<span class="line-number"> 40</span>        config = {}
</div>
<div class="line-context">
<span class="line-number"> 41</span>        <span class=<span class="string">"keyword"</span>>for</span> file <span class=<span class="string">"keyword"</span>>in</span> path.<span class="function">glob</span>(<span class="string">"*.json"</span>):
</div>
<div class="line-context">
<span class="line-number"> 42</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number"> 43</span>                data = json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number"> 44</span>                config.<span class="function">update</span>(data)
</div>
<div class="line-context">
<span class="line-number"> 45</span>        <span class=<span class="string">"keyword"</span>>return</span> config
</div>
<div class="line-context">
<span class="line-number"> 46</span>    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number"> 47</span>        <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">FileNotFoundError</span>(f<span class="string">"Config path <span class="</span>keyword<span class="string">">not</span> found: {config_path}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 48</span>
</div>
<div class="line-context">
<span class="line-number"> 49</span>
</div>
<div class="line-context">
<span class="line-number"> 50</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">main</span>() -> int:
</div>
<div class="line-context">
<span class="line-number"> 51</span>    parser = argparse.<span class="function">ArgumentParser</span>(
</div>
<div class="line-context">
<span class="line-number"> 52</span>        description=<span class="string">"C to PlantUML <span class="function">Converter</span>(Simplified CLI)"</span>,
</div>
<div class="line-context">
<span class="line-number"> 53</span>        formatter_class=argparse.RawDescriptionHelpFormatter,
</div>
<div class="line-context">
<span class="line-number"> 54</span>        epilog=<span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 55</span>Usage:
</div>
<div class="line-context">
<span class="line-number"> 56</span>  %(prog)s --config config.json [parse|transform|generate]
</div>
<div class="line-context">
<span class="line-number"> 57</span>  %(prog)s config_folder [parse|transform|generate]
</div>
</div>
<h4>Line 85</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 75</span>    parser.<span class="function">add_argument</span>(
</div>
<div class="line-context">
<span class="line-number"> 76</span>        <span class="string">"--verbose"</span>, <span class="string">"-v"</span>, action=<span class="string">"store_true"</span>, help=<span class="string">"Enable verbose output"</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span>    )
</div>
<div class="line-context">
<span class="line-number"> 78</span>    args = parser.<span class="function">parse_args</span>()
</div>
<div class="line-context">
<span class="line-number"> 79</span>
</div>
<div class="line-context">
<span class="line-number"> 80</span>    <span class="function">setup_logging</span>(args.verbose)
</div>
<div class="line-context">
<span class="line-number"> 81</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>    <span class="comment"># Determine config path</span>
</div>
<div class="line-context">
<span class="line-number"> 83</span>    config_path = args.config
</div>
<div class="line-context">
<span class="line-number"> 84</span>    <span class=<span class="string">"keyword"</span>>if</span> config_path <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number"> 85</span>        config_path = os.<span class="function">getcwd</span>()
</div>
<div class="line-context">
<span class="line-number"> 86</span>
</div>
<div class="line-context">
<span class="line-number"> 87</span>    logging.<span class="function">info</span>(<span class="string">"Using config: %s"</span>, config_path)
</div>
<div class="line-context">
<span class="line-number"> 88</span>
</div>
<div class="line-context">
<span class="line-number"> 89</span>    <span class="comment"># Load config</span>
</div>
<div class="line-context">
<span class="line-number"> 90</span>    <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 91</span>        config_data = <span class="function">load_config_from_path</span>(config_path)
</div>
<div class="line-context">
<span class="line-number"> 92</span>        config = <span class="function">Config</span>(**config_data)
</div>
<div class="line-context">
<span class="line-number"> 93</span>    <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number"> 94</span>        logging.<span class="function">error</span>(<span class="string">"Failed to load configuration: %s"</span>, e)
</div>
<div class="line-context">
<span class="line-number"> 95</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
</div>
<h4>Lines 93-95</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 83</span>    config_path = args.config
</div>
<div class="line-context">
<span class="line-number"> 84</span>    <span class=<span class="string">"keyword"</span>>if</span> config_path <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number"> 85</span>        config_path = os.<span class="function">getcwd</span>()
</div>
<div class="line-context">
<span class="line-number"> 86</span>
</div>
<div class="line-context">
<span class="line-number"> 87</span>    logging.<span class="function">info</span>(<span class="string">"Using config: %s"</span>, config_path)
</div>
<div class="line-context">
<span class="line-number"> 88</span>
</div>
<div class="line-context">
<span class="line-number"> 89</span>    <span class="comment"># Load config</span>
</div>
<div class="line-context">
<span class="line-number"> 90</span>    <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 91</span>        config_data = <span class="function">load_config_from_path</span>(config_path)
</div>
<div class="line-context">
<span class="line-number"> 92</span>        config = <span class="function">Config</span>(**config_data)
</div>
<div class="line-uncovered">
<span class="line-number"> 93</span>    <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number"> 94</span>        logging.<span class="function">error</span>(<span class="string">"Failed to load configuration: %s"</span>, e)
</div>
<div class="line-uncovered">
<span class="line-number"> 95</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number"> 96</span>
</div>
<div class="line-context">
<span class="line-number"> 97</span>    <span class="comment"># Determine output folder <span class=<span class="string">"keyword"</span>>from</span> config, default to ./output</span>
</div>
<div class="line-context">
<span class="line-number"> 98</span>    output_folder = <span class="function">getattr</span>(config, <span class="string">"output_dir"</span>, <span class=<span class="string">"keyword"</span>>None</span>) <span class=<span class="string">"keyword"</span>>or</span> os.path.<span class="function">join</span>(
</div>
<div class="line-context">
<span class="line-number"> 99</span>        os.<span class="function">getcwd</span>(), <span class="string">"output"</span>
</div>
<div class="line-context">
<span class="line-number">100</span>    )
</div>
<div class="line-context">
<span class="line-number">101</span>    output_folder = os.path.<span class="function">abspath</span>(output_folder)
</div>
<div class="line-context">
<span class="line-number">102</span>    os.<span class="function">makedirs</span>(output_folder, exist_ok=<span class=<span class="string">"keyword"</span>>True</span>)
</div>
<div class="line-context">
<span class="line-number">103</span>    logging.<span class="function">info</span>(<span class="string">"Output folder: %s"</span>, output_folder)
</div>
<div class="line-context">
<span class="line-number">104</span>
</div>
<div class="line-context">
<span class="line-number">105</span>    model_file = os.path.<span class="function">join</span>(output_folder, <span class="string">"model.json"</span>)
</div>
</div>
<h4>Lines 110-111</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">100</span>    )
</div>
<div class="line-context">
<span class="line-number">101</span>    output_folder = os.path.<span class="function">abspath</span>(output_folder)
</div>
<div class="line-context">
<span class="line-number">102</span>    os.<span class="function">makedirs</span>(output_folder, exist_ok=<span class=<span class="string">"keyword"</span>>True</span>)
</div>
<div class="line-context">
<span class="line-number">103</span>    logging.<span class="function">info</span>(<span class="string">"Output folder: %s"</span>, output_folder)
</div>
<div class="line-context">
<span class="line-number">104</span>
</div>
<div class="line-context">
<span class="line-number">105</span>    model_file = os.path.<span class="function">join</span>(output_folder, <span class="string">"model.json"</span>)
</div>
<div class="line-context">
<span class="line-number">106</span>    transformed_model_file = os.path.<span class="function">join</span>(output_folder, <span class="string">"model_transformed.json"</span>)
</div>
<div class="line-context">
<span class="line-number">107</span>
</div>
<div class="line-context">
<span class="line-number">108</span>    <span class="comment"># Parse command</span>
</div>
<div class="line-context">
<span class="line-number">109</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"parse"</span>:
</div>
<div class="line-uncovered">
<span class="line-number">110</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-uncovered">
<span class="line-number">111</span>            parser_obj = <span class="function">Parser</span>()
</div>
<div class="line-context">
<span class="line-number">112</span>            <span class="comment"># Use the refactored parse function that handles both single <span class=<span class="string">"keyword"</span>>and</span> multiple source folders</span>
</div>
<div class="line-context">
<span class="line-number">113</span>            parser_obj.<span class="function">parse</span>(
</div>
<div class="line-context">
<span class="line-number">114</span>                project_root=config.source_folders,
</div>
<div class="line-context">
<span class="line-number">115</span>                output_file=model_file,
</div>
<div class="line-context">
<span class="line-number">116</span>                recursive_search=<span class="function">getattr</span>(config, <span class="string">"recursive_search"</span>, <span class=<span class="string">"keyword"</span>>True</span>),
</div>
<div class="line-context">
<span class="line-number">117</span>                config=config,
</div>
<div class="line-context">
<span class="line-number">118</span>            )
</div>
<div class="line-context">
<span class="line-number">119</span>            logging.<span class="function">info</span>(<span class="string">"Model saved to: %s"</span>, model_file)
</div>
<div class="line-context">
<span class="line-number">120</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">121</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
</div>
<h4>Line 113</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">103</span>    logging.<span class="function">info</span>(<span class="string">"Output folder: %s"</span>, output_folder)
</div>
<div class="line-context">
<span class="line-number">104</span>
</div>
<div class="line-context">
<span class="line-number">105</span>    model_file = os.path.<span class="function">join</span>(output_folder, <span class="string">"model.json"</span>)
</div>
<div class="line-context">
<span class="line-number">106</span>    transformed_model_file = os.path.<span class="function">join</span>(output_folder, <span class="string">"model_transformed.json"</span>)
</div>
<div class="line-context">
<span class="line-number">107</span>
</div>
<div class="line-context">
<span class="line-number">108</span>    <span class="comment"># Parse command</span>
</div>
<div class="line-context">
<span class="line-number">109</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"parse"</span>:
</div>
<div class="line-context">
<span class="line-number">110</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">111</span>            parser_obj = <span class="function">Parser</span>()
</div>
<div class="line-context">
<span class="line-number">112</span>            <span class="comment"># Use the refactored parse function that handles both single <span class=<span class="string">"keyword"</span>>and</span> multiple source folders</span>
</div>
<div class="line-uncovered">
<span class="line-number">113</span>            parser_obj.<span class="function">parse</span>(
</div>
<div class="line-context">
<span class="line-number">114</span>                project_root=config.source_folders,
</div>
<div class="line-context">
<span class="line-number">115</span>                output_file=model_file,
</div>
<div class="line-context">
<span class="line-number">116</span>                recursive_search=<span class="function">getattr</span>(config, <span class="string">"recursive_search"</span>, <span class=<span class="string">"keyword"</span>>True</span>),
</div>
<div class="line-context">
<span class="line-number">117</span>                config=config,
</div>
<div class="line-context">
<span class="line-number">118</span>            )
</div>
<div class="line-context">
<span class="line-number">119</span>            logging.<span class="function">info</span>(<span class="string">"Model saved to: %s"</span>, model_file)
</div>
<div class="line-context">
<span class="line-number">120</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">121</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">122</span>            logging.<span class="function">error</span>(<span class="string">"Error during parsing: %s"</span>, e)
</div>
<div class="line-context">
<span class="line-number">123</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
</div>
<h4>Lines 119-123</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">109</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"parse"</span>:
</div>
<div class="line-context">
<span class="line-number">110</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">111</span>            parser_obj = <span class="function">Parser</span>()
</div>
<div class="line-context">
<span class="line-number">112</span>            <span class="comment"># Use the refactored parse function that handles both single <span class=<span class="string">"keyword"</span>>and</span> multiple source folders</span>
</div>
<div class="line-context">
<span class="line-number">113</span>            parser_obj.<span class="function">parse</span>(
</div>
<div class="line-context">
<span class="line-number">114</span>                project_root=config.source_folders,
</div>
<div class="line-context">
<span class="line-number">115</span>                output_file=model_file,
</div>
<div class="line-context">
<span class="line-number">116</span>                recursive_search=<span class="function">getattr</span>(config, <span class="string">"recursive_search"</span>, <span class=<span class="string">"keyword"</span>>True</span>),
</div>
<div class="line-context">
<span class="line-number">117</span>                config=config,
</div>
<div class="line-context">
<span class="line-number">118</span>            )
</div>
<div class="line-uncovered">
<span class="line-number">119</span>            logging.<span class="function">info</span>(<span class="string">"Model saved to: %s"</span>, model_file)
</div>
<div class="line-uncovered">
<span class="line-number">120</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-uncovered">
<span class="line-number">121</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">122</span>            logging.<span class="function">error</span>(<span class="string">"Error during parsing: %s"</span>, e)
</div>
<div class="line-uncovered">
<span class="line-number">123</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">124</span>
</div>
<div class="line-context">
<span class="line-number">125</span>    <span class="comment"># Transform command</span>
</div>
<div class="line-context">
<span class="line-number">126</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"transform"</span>:
</div>
<div class="line-context">
<span class="line-number">127</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">128</span>            transformer = <span class="function">Transformer</span>()
</div>
<div class="line-context">
<span class="line-number">129</span>            transformer.<span class="function">transform</span>(
</div>
<div class="line-context">
<span class="line-number">130</span>                model_file=model_file,
</div>
<div class="line-context">
<span class="line-number">131</span>                config_file=(
</div>
<div class="line-context">
<span class="line-number">132</span>                    config_path
</div>
<div class="line-context">
<span class="line-number">133</span>                    <span class=<span class="string">"keyword"</span>>if</span> <span class="function">Path</span>(config_path).<span class="function">is_file</span>()
</div>
</div>
<h4>Lines 127-129</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">117</span>                config=config,
</div>
<div class="line-context">
<span class="line-number">118</span>            )
</div>
<div class="line-context">
<span class="line-number">119</span>            logging.<span class="function">info</span>(<span class="string">"Model saved to: %s"</span>, model_file)
</div>
<div class="line-context">
<span class="line-number">120</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">121</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">122</span>            logging.<span class="function">error</span>(<span class="string">"Error during parsing: %s"</span>, e)
</div>
<div class="line-context">
<span class="line-number">123</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">124</span>
</div>
<div class="line-context">
<span class="line-number">125</span>    <span class="comment"># Transform command</span>
</div>
<div class="line-context">
<span class="line-number">126</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"transform"</span>:
</div>
<div class="line-uncovered">
<span class="line-number">127</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-uncovered">
<span class="line-number">128</span>            transformer = <span class="function">Transformer</span>()
</div>
<div class="line-uncovered">
<span class="line-number">129</span>            transformer.<span class="function">transform</span>(
</div>
<div class="line-context">
<span class="line-number">130</span>                model_file=model_file,
</div>
<div class="line-context">
<span class="line-number">131</span>                config_file=(
</div>
<div class="line-context">
<span class="line-number">132</span>                    config_path
</div>
<div class="line-context">
<span class="line-number">133</span>                    <span class=<span class="string">"keyword"</span>>if</span> <span class="function">Path</span>(config_path).<span class="function">is_file</span>()
</div>
<div class="line-context">
<span class="line-number">134</span>                    <span class=<span class="string">"keyword"</span>>else</span> <span class="function">str</span>(<span class="function">list</span>(<span class="function">Path</span>(config_path).<span class="function">glob</span>(<span class="string">"*.json"</span>))[<span class="number">0</span>])
</div>
<div class="line-context">
<span class="line-number">135</span>                ),
</div>
<div class="line-context">
<span class="line-number">136</span>                output_file=transformed_model_file,
</div>
<div class="line-context">
<span class="line-number">137</span>            )
</div>
<div class="line-context">
<span class="line-number">138</span>            logging.<span class="function">info</span>(<span class="string">"Transformed model saved to: %s"</span>, transformed_model_file)
</div>
<div class="line-context">
<span class="line-number">139</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
</div>
<h4>Lines 138-142</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">128</span>            transformer = <span class="function">Transformer</span>()
</div>
<div class="line-context">
<span class="line-number">129</span>            transformer.<span class="function">transform</span>(
</div>
<div class="line-context">
<span class="line-number">130</span>                model_file=model_file,
</div>
<div class="line-context">
<span class="line-number">131</span>                config_file=(
</div>
<div class="line-context">
<span class="line-number">132</span>                    config_path
</div>
<div class="line-context">
<span class="line-number">133</span>                    <span class=<span class="string">"keyword"</span>>if</span> <span class="function">Path</span>(config_path).<span class="function">is_file</span>()
</div>
<div class="line-context">
<span class="line-number">134</span>                    <span class=<span class="string">"keyword"</span>>else</span> <span class="function">str</span>(<span class="function">list</span>(<span class="function">Path</span>(config_path).<span class="function">glob</span>(<span class="string">"*.json"</span>))[<span class="number">0</span>])
</div>
<div class="line-context">
<span class="line-number">135</span>                ),
</div>
<div class="line-context">
<span class="line-number">136</span>                output_file=transformed_model_file,
</div>
<div class="line-context">
<span class="line-number">137</span>            )
</div>
<div class="line-uncovered">
<span class="line-number">138</span>            logging.<span class="function">info</span>(<span class="string">"Transformed model saved to: %s"</span>, transformed_model_file)
</div>
<div class="line-uncovered">
<span class="line-number">139</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-uncovered">
<span class="line-number">140</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">141</span>            logging.<span class="function">error</span>(<span class="string">"Error during transformation: %s"</span>, e)
</div>
<div class="line-uncovered">
<span class="line-number">142</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">143</span>
</div>
<div class="line-context">
<span class="line-number">144</span>    <span class="comment"># Generate command</span>
</div>
<div class="line-context">
<span class="line-number">145</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"generate"</span>:
</div>
<div class="line-context">
<span class="line-number">146</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">147</span>            generator = <span class="function">Generator</span>()
</div>
<div class="line-context">
<span class="line-number">148</span>            <span class="comment"># Prefer transformed model, <span class=<span class="string">"keyword"</span>>else</span> fallback to model.json</span>
</div>
<div class="line-context">
<span class="line-number">149</span>            <span class=<span class="string">"keyword"</span>>if</span> os.path.<span class="function">exists</span>(transformed_model_file):
</div>
<div class="line-context">
<span class="line-number">150</span>                model_to_use = transformed_model_file
</div>
<div class="line-context">
<span class="line-number">151</span>            <span class=<span class="string">"keyword"</span>>elif</span> os.path.<span class="function">exists</span>(model_file):
</div>
<div class="line-context">
<span class="line-number">152</span>                model_to_use = model_file
</div>
</div>
<h4>Lines 146-147</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">136</span>                output_file=transformed_model_file,
</div>
<div class="line-context">
<span class="line-number">137</span>            )
</div>
<div class="line-context">
<span class="line-number">138</span>            logging.<span class="function">info</span>(<span class="string">"Transformed model saved to: %s"</span>, transformed_model_file)
</div>
<div class="line-context">
<span class="line-number">139</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">140</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">141</span>            logging.<span class="function">error</span>(<span class="string">"Error during transformation: %s"</span>, e)
</div>
<div class="line-context">
<span class="line-number">142</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">143</span>
</div>
<div class="line-context">
<span class="line-number">144</span>    <span class="comment"># Generate command</span>
</div>
<div class="line-context">
<span class="line-number">145</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"generate"</span>:
</div>
<div class="line-uncovered">
<span class="line-number">146</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-uncovered">
<span class="line-number">147</span>            generator = <span class="function">Generator</span>()
</div>
<div class="line-context">
<span class="line-number">148</span>            <span class="comment"># Prefer transformed model, <span class=<span class="string">"keyword"</span>>else</span> fallback to model.json</span>
</div>
<div class="line-context">
<span class="line-number">149</span>            <span class=<span class="string">"keyword"</span>>if</span> os.path.<span class="function">exists</span>(transformed_model_file):
</div>
<div class="line-context">
<span class="line-number">150</span>                model_to_use = transformed_model_file
</div>
<div class="line-context">
<span class="line-number">151</span>            <span class=<span class="string">"keyword"</span>>elif</span> os.path.<span class="function">exists</span>(model_file):
</div>
<div class="line-context">
<span class="line-number">152</span>                model_to_use = model_file
</div>
<div class="line-context">
<span class="line-number">153</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">154</span>                logging.<span class="function">error</span>(<span class="string">"No model file found <span class="</span>keyword<span class="string">">for</span> generation."</span>)
</div>
<div class="line-context">
<span class="line-number">155</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">156</span>            generator.<span class="function">generate</span>(
</div>
<div class="line-context">
<span class="line-number">157</span>                model_file=model_to_use,
</div>
</div>
<h4>Lines 149-152</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">139</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">140</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">141</span>            logging.<span class="function">error</span>(<span class="string">"Error during transformation: %s"</span>, e)
</div>
<div class="line-context">
<span class="line-number">142</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">143</span>
</div>
<div class="line-context">
<span class="line-number">144</span>    <span class="comment"># Generate command</span>
</div>
<div class="line-context">
<span class="line-number">145</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"generate"</span>:
</div>
<div class="line-context">
<span class="line-number">146</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">147</span>            generator = <span class="function">Generator</span>()
</div>
<div class="line-context">
<span class="line-number">148</span>            <span class="comment"># Prefer transformed model, <span class=<span class="string">"keyword"</span>>else</span> fallback to model.json</span>
</div>
<div class="line-uncovered">
<span class="line-number">149</span>            <span class=<span class="string">"keyword"</span>>if</span> os.path.<span class="function">exists</span>(transformed_model_file):
</div>
<div class="line-uncovered">
<span class="line-number">150</span>                model_to_use = transformed_model_file
</div>
<div class="line-uncovered">
<span class="line-number">151</span>            <span class=<span class="string">"keyword"</span>>elif</span> os.path.<span class="function">exists</span>(model_file):
</div>
<div class="line-uncovered">
<span class="line-number">152</span>                model_to_use = model_file
</div>
<div class="line-context">
<span class="line-number">153</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">154</span>                logging.<span class="function">error</span>(<span class="string">"No model file found <span class="</span>keyword<span class="string">">for</span> generation."</span>)
</div>
<div class="line-context">
<span class="line-number">155</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">156</span>            generator.<span class="function">generate</span>(
</div>
<div class="line-context">
<span class="line-number">157</span>                model_file=model_to_use,
</div>
<div class="line-context">
<span class="line-number">158</span>                output_dir=output_folder,
</div>
<div class="line-context">
<span class="line-number">159</span>                include_depth=<span class="function">getattr</span>(config, <span class="string">"include_depth"</span>, <span class="number">1</span>),
</div>
<div class="line-context">
<span class="line-number">160</span>            )
</div>
<div class="line-context">
<span class="line-number">161</span>            logging.<span class="function">info</span>(<span class="string">"PlantUML generation complete! Output <span class="</span>keyword<span class="string">">in</span>: %s"</span>, output_folder)
</div>
<div class="line-context">
<span class="line-number">162</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
</div>
<h4>Lines 154-156</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">144</span>    <span class="comment"># Generate command</span>
</div>
<div class="line-context">
<span class="line-number">145</span>    <span class=<span class="string">"keyword"</span>>if</span> args.command == <span class="string">"generate"</span>:
</div>
<div class="line-context">
<span class="line-number">146</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">147</span>            generator = <span class="function">Generator</span>()
</div>
<div class="line-context">
<span class="line-number">148</span>            <span class="comment"># Prefer transformed model, <span class=<span class="string">"keyword"</span>>else</span> fallback to model.json</span>
</div>
<div class="line-context">
<span class="line-number">149</span>            <span class=<span class="string">"keyword"</span>>if</span> os.path.<span class="function">exists</span>(transformed_model_file):
</div>
<div class="line-context">
<span class="line-number">150</span>                model_to_use = transformed_model_file
</div>
<div class="line-context">
<span class="line-number">151</span>            <span class=<span class="string">"keyword"</span>>elif</span> os.path.<span class="function">exists</span>(model_file):
</div>
<div class="line-context">
<span class="line-number">152</span>                model_to_use = model_file
</div>
<div class="line-context">
<span class="line-number">153</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">154</span>                logging.<span class="function">error</span>(<span class="string">"No model file found <span class="</span>keyword<span class="string">">for</span> generation."</span>)
</div>
<div class="line-uncovered">
<span class="line-number">155</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">156</span>            generator.<span class="function">generate</span>(
</div>
<div class="line-context">
<span class="line-number">157</span>                model_file=model_to_use,
</div>
<div class="line-context">
<span class="line-number">158</span>                output_dir=output_folder,
</div>
<div class="line-context">
<span class="line-number">159</span>                include_depth=<span class="function">getattr</span>(config, <span class="string">"include_depth"</span>, <span class="number">1</span>),
</div>
<div class="line-context">
<span class="line-number">160</span>            )
</div>
<div class="line-context">
<span class="line-number">161</span>            logging.<span class="function">info</span>(<span class="string">"PlantUML generation complete! Output <span class="</span>keyword<span class="string">">in</span>: %s"</span>, output_folder)
</div>
<div class="line-context">
<span class="line-number">162</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">163</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">164</span>            logging.<span class="function">error</span>(<span class="string">"Error generating PlantUML: %s"</span>, e)
</div>
<div class="line-context">
<span class="line-number">165</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">166</span>
</div>
</div>
<h4>Lines 161-165</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">151</span>            <span class=<span class="string">"keyword"</span>>elif</span> os.path.<span class="function">exists</span>(model_file):
</div>
<div class="line-context">
<span class="line-number">152</span>                model_to_use = model_file
</div>
<div class="line-context">
<span class="line-number">153</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">154</span>                logging.<span class="function">error</span>(<span class="string">"No model file found <span class="</span>keyword<span class="string">">for</span> generation."</span>)
</div>
<div class="line-context">
<span class="line-number">155</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">156</span>            generator.<span class="function">generate</span>(
</div>
<div class="line-context">
<span class="line-number">157</span>                model_file=model_to_use,
</div>
<div class="line-context">
<span class="line-number">158</span>                output_dir=output_folder,
</div>
<div class="line-context">
<span class="line-number">159</span>                include_depth=<span class="function">getattr</span>(config, <span class="string">"include_depth"</span>, <span class="number">1</span>),
</div>
<div class="line-context">
<span class="line-number">160</span>            )
</div>
<div class="line-uncovered">
<span class="line-number">161</span>            logging.<span class="function">info</span>(<span class="string">"PlantUML generation complete! Output <span class="</span>keyword<span class="string">">in</span>: %s"</span>, output_folder)
</div>
<div class="line-uncovered">
<span class="line-number">162</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-uncovered">
<span class="line-number">163</span>        <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">164</span>            logging.<span class="function">error</span>(<span class="string">"Error generating PlantUML: %s"</span>, e)
</div>
<div class="line-uncovered">
<span class="line-number">165</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">166</span>
</div>
<div class="line-context">
<span class="line-number">167</span>    <span class="comment"># Default: full workflow</span>
</div>
<div class="line-context">
<span class="line-number">168</span>    <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">169</span>        <span class="comment"># Step <span class="number">1</span>: Parse</span>
</div>
<div class="line-context">
<span class="line-number">170</span>        parser_obj = <span class="function">Parser</span>()
</div>
<div class="line-context">
<span class="line-number">171</span>        <span class="comment"># Use the refactored parse function that handles both single <span class=<span class="string">"keyword"</span>>and</span> multiple source folders</span>
</div>
<div class="line-context">
<span class="line-number">172</span>        parser_obj.<span class="function">parse</span>(
</div>
<div class="line-context">
<span class="line-number">173</span>            project_root=config.source_folders,
</div>
<div class="line-context">
<span class="line-number">174</span>            output_file=model_file,
</div>
<div class="line-context">
<span class="line-number">175</span>            recursive_search=<span class="function">getattr</span>(config, <span class="string">"recursive_search"</span>, <span class=<span class="string">"keyword"</span>>True</span>),
</div>
</div>
<h4>Lines 201-203</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">191</span>        <span class="comment"># Step <span class="number">3</span>: Generate</span>
</div>
<div class="line-context">
<span class="line-number">192</span>        generator = <span class="function">Generator</span>()
</div>
<div class="line-context">
<span class="line-number">193</span>        generator.<span class="function">generate</span>(
</div>
<div class="line-context">
<span class="line-number">194</span>            model_file=transformed_model_file,
</div>
<div class="line-context">
<span class="line-number">195</span>            output_dir=output_folder,
</div>
<div class="line-context">
<span class="line-number">196</span>            include_depth=<span class="function">getattr</span>(config, <span class="string">"include_depth"</span>, <span class="number">1</span>),
</div>
<div class="line-context">
<span class="line-number">197</span>        )
</div>
<div class="line-context">
<span class="line-number">198</span>        logging.<span class="function">info</span>(<span class="string">"PlantUML generation complete! Output <span class="</span>keyword<span class="string">">in</span>: %s"</span>, output_folder)
</div>
<div class="line-context">
<span class="line-number">199</span>        logging.<span class="function">info</span>(<span class="string">"Complete workflow finished successfully!"</span>)
</div>
<div class="line-context">
<span class="line-number">200</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="number">0</span>
</div>
<div class="line-uncovered">
<span class="line-number">201</span>    <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError, RuntimeError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">202</span>        logging.<span class="function">error</span>(<span class="string">"Error <span class="</span>keyword<span class="string">">in</span> workflow: %s"</span>, e)
</div>
<div class="line-uncovered">
<span class="line-number">203</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">204</span>
</div>
<div class="line-context">
<span class="line-number">205</span>
</div>
<div class="line-context">
<span class="line-number">206</span><span class=<span class="string">"keyword"</span>>if</span> __name__ == <span class="string">"__main__"</span>:
</div>
<div class="line-context">
<span class="line-number">207</span>    sys.<span class="function">exit</span>(<span class="function">main</span>())
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/verifier.py
<span class="coverage-info">84.17% (117/139 lines covered)</span>
</div>
<h4>Line 67</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 57</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> model.project_root <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> model.project_root.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 58</span>            self.issues.<span class="function">append</span>(<span class="string">"Project root <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">or</span> whitespace"</span>)
</div>
<div class="line-context">
<span class="line-number"> 59</span>
</div>
<div class="line-context">
<span class="line-number"> 60</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> model.files:
</div>
<div class="line-context">
<span class="line-number"> 61</span>            self.issues.<span class="function">append</span>(<span class="string">"No files found <span class="</span>keyword<span class="string">">in</span> project"</span>)
</div>
<div class="line-context">
<span class="line-number"> 62</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_file</span>(self, file_path: str, file_model: FileModel) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number"> 64</span>        <span class="string">""</span><span class="string">"Verify a single file model"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class="comment"># Verify file-level data</span>
</div>
<div class="line-context">
<span class="line-number"> 66</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> file_model.file_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> file_model.file_path.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number"> 67</span>            self.issues.<span class="function">append</span>(f<span class="string">"File path <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 68</span>
</div>
<div class="line-context">
<span class="line-number"> 69</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> file_model.relative_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> file_model.relative_path.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 70</span>            self.issues.<span class="function">append</span>(f<span class="string">"Relative path <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 71</span>
</div>
<div class="line-context">
<span class="line-number"> 72</span>        <span class="comment"># Verify structs</span>
</div>
<div class="line-context">
<span class="line-number"> 73</span>        <span class=<span class="string">"keyword"</span>>for</span> struct_name, struct <span class=<span class="string">"keyword"</span>>in</span> file_model.structs.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number"> 74</span>            self.<span class="function">_verify_struct</span>(file_path, struct_name, struct)
</div>
<div class="line-context">
<span class="line-number"> 75</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>        <span class="comment"># Verify enums</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span>        <span class=<span class="string">"keyword"</span>>for</span> enum_name, enum <span class=<span class="string">"keyword"</span>>in</span> file_model.enums.<span class="function">items</span>():
</div>
</div>
<h4>Line 70</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 60</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> model.files:
</div>
<div class="line-context">
<span class="line-number"> 61</span>            self.issues.<span class="function">append</span>(<span class="string">"No files found <span class="</span>keyword<span class="string">">in</span> project"</span>)
</div>
<div class="line-context">
<span class="line-number"> 62</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_file</span>(self, file_path: str, file_model: FileModel) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number"> 64</span>        <span class="string">""</span><span class="string">"Verify a single file model"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class="comment"># Verify file-level data</span>
</div>
<div class="line-context">
<span class="line-number"> 66</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> file_model.file_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> file_model.file_path.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 67</span>            self.issues.<span class="function">append</span>(f<span class="string">"File path <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 68</span>
</div>
<div class="line-context">
<span class="line-number"> 69</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> file_model.relative_path <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> file_model.relative_path.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number"> 70</span>            self.issues.<span class="function">append</span>(f<span class="string">"Relative path <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 71</span>
</div>
<div class="line-context">
<span class="line-number"> 72</span>        <span class="comment"># Verify structs</span>
</div>
<div class="line-context">
<span class="line-number"> 73</span>        <span class=<span class="string">"keyword"</span>>for</span> struct_name, struct <span class=<span class="string">"keyword"</span>>in</span> file_model.structs.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number"> 74</span>            self.<span class="function">_verify_struct</span>(file_path, struct_name, struct)
</div>
<div class="line-context">
<span class="line-number"> 75</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>        <span class="comment"># Verify enums</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span>        <span class=<span class="string">"keyword"</span>>for</span> enum_name, enum <span class=<span class="string">"keyword"</span>>in</span> file_model.enums.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number"> 78</span>            self.<span class="function">_verify_enum</span>(file_path, enum_name, enum)
</div>
<div class="line-context">
<span class="line-number"> 79</span>
</div>
<div class="line-context">
<span class="line-number"> 80</span>        <span class="comment"># Verify unions</span>
</div>
</div>
<h4>Line 111</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">101</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> struct.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> struct.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">102</span>            self.issues.<span class="function">append</span>(f<span class="string">"Struct name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">103</span>
</div>
<div class="line-context">
<span class="line-number">104</span>        <span class="comment"># Verify fields</span>
</div>
<div class="line-context">
<span class="line-number">105</span>        <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> struct.fields:
</div>
<div class="line-context">
<span class="line-number">106</span>            self.<span class="function">_verify_field</span>(file_path, f<span class="string">"struct {struct_name}"</span>, field)
</div>
<div class="line-context">
<span class="line-number">107</span>
</div>
<div class="line-context">
<span class="line-number">108</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_enum</span>(self, file_path: str, enum_name: str, enum: Enum) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">109</span>        <span class="string">""</span><span class="string">"Verify an enum definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">110</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(enum_name):
</div>
<div class="line-uncovered">
<span class="line-number">111</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid enum name <span class="string">'{enum_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">112</span>
</div>
<div class="line-context">
<span class="line-number">113</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> enum.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">114</span>            self.issues.<span class="function">append</span>(f<span class="string">"Enum name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">115</span>
</div>
<div class="line-context">
<span class="line-number">116</span>        <span class="comment"># Verify enum values</span>
</div>
<div class="line-context">
<span class="line-number">117</span>        <span class=<span class="string">"keyword"</span>>for</span> enum_value <span class=<span class="string">"keyword"</span>>in</span> enum.values:
</div>
<div class="line-context">
<span class="line-number">118</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum_value.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> enum_value.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">119</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">120</span>                    f<span class="string">"Enum value name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">121</span>                )
</div>
</div>
<h4>Line 114</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">104</span>        <span class="comment"># Verify fields</span>
</div>
<div class="line-context">
<span class="line-number">105</span>        <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> struct.fields:
</div>
<div class="line-context">
<span class="line-number">106</span>            self.<span class="function">_verify_field</span>(file_path, f<span class="string">"struct {struct_name}"</span>, field)
</div>
<div class="line-context">
<span class="line-number">107</span>
</div>
<div class="line-context">
<span class="line-number">108</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_enum</span>(self, file_path: str, enum_name: str, enum: Enum) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">109</span>        <span class="string">""</span><span class="string">"Verify an enum definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">110</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(enum_name):
</div>
<div class="line-context">
<span class="line-number">111</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid enum name <span class="string">'{enum_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">112</span>
</div>
<div class="line-context">
<span class="line-number">113</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> enum.name.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">114</span>            self.issues.<span class="function">append</span>(f<span class="string">"Enum name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">115</span>
</div>
<div class="line-context">
<span class="line-number">116</span>        <span class="comment"># Verify enum values</span>
</div>
<div class="line-context">
<span class="line-number">117</span>        <span class=<span class="string">"keyword"</span>>for</span> enum_value <span class=<span class="string">"keyword"</span>>in</span> enum.values:
</div>
<div class="line-context">
<span class="line-number">118</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum_value.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> enum_value.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">119</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">120</span>                    f<span class="string">"Enum value name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">121</span>                )
</div>
<div class="line-context">
<span class="line-number">122</span>            <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(enum_value.name):
</div>
<div class="line-context">
<span class="line-number">123</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">124</span>                    f<span class="string">"Invalid enum value name <span class="string">'{enum_value.name}'</span> <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
</div>
<h4>Line 119</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">109</span>        <span class="string">""</span><span class="string">"Verify an enum definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">110</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(enum_name):
</div>
<div class="line-context">
<span class="line-number">111</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid enum name <span class="string">'{enum_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">112</span>
</div>
<div class="line-context">
<span class="line-number">113</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> enum.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">114</span>            self.issues.<span class="function">append</span>(f<span class="string">"Enum name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">115</span>
</div>
<div class="line-context">
<span class="line-number">116</span>        <span class="comment"># Verify enum values</span>
</div>
<div class="line-context">
<span class="line-number">117</span>        <span class=<span class="string">"keyword"</span>>for</span> enum_value <span class=<span class="string">"keyword"</span>>in</span> enum.values:
</div>
<div class="line-context">
<span class="line-number">118</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum_value.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> enum_value.name.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">119</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">120</span>                    f<span class="string">"Enum value name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">121</span>                )
</div>
<div class="line-context">
<span class="line-number">122</span>            <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(enum_value.name):
</div>
<div class="line-context">
<span class="line-number">123</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">124</span>                    f<span class="string">"Invalid enum value name <span class="string">'{enum_value.name}'</span> <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">125</span>                )
</div>
<div class="line-context">
<span class="line-number">126</span>
</div>
<div class="line-context">
<span class="line-number">127</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_union</span>(self, file_path: str, union_name: str, union: Union) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">128</span>        <span class="string">""</span><span class="string">"Verify a union definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">129</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(union_name):
</div>
</div>
<h4>Line 123</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">113</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> enum.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">114</span>            self.issues.<span class="function">append</span>(f<span class="string">"Enum name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">115</span>
</div>
<div class="line-context">
<span class="line-number">116</span>        <span class="comment"># Verify enum values</span>
</div>
<div class="line-context">
<span class="line-number">117</span>        <span class=<span class="string">"keyword"</span>>for</span> enum_value <span class=<span class="string">"keyword"</span>>in</span> enum.values:
</div>
<div class="line-context">
<span class="line-number">118</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> enum_value.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> enum_value.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">119</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">120</span>                    f<span class="string">"Enum value name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">121</span>                )
</div>
<div class="line-context">
<span class="line-number">122</span>            <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(enum_value.name):
</div>
<div class="line-uncovered">
<span class="line-number">123</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">124</span>                    f<span class="string">"Invalid enum value name <span class="string">'{enum_value.name}'</span> <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">125</span>                )
</div>
<div class="line-context">
<span class="line-number">126</span>
</div>
<div class="line-context">
<span class="line-number">127</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_union</span>(self, file_path: str, union_name: str, union: Union) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">128</span>        <span class="string">""</span><span class="string">"Verify a union definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">129</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(union_name):
</div>
<div class="line-context">
<span class="line-number">130</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid union name <span class="string">'{union_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">131</span>
</div>
<div class="line-context">
<span class="line-number">132</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> union.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> union.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">133</span>            self.issues.<span class="function">append</span>(f<span class="string">"Union name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
</div>
<h4>Line 130</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">120</span>                    f<span class="string">"Enum value name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">121</span>                )
</div>
<div class="line-context">
<span class="line-number">122</span>            <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(enum_value.name):
</div>
<div class="line-context">
<span class="line-number">123</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">124</span>                    f<span class="string">"Invalid enum value name <span class="string">'{enum_value.name}'</span> <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">125</span>                )
</div>
<div class="line-context">
<span class="line-number">126</span>
</div>
<div class="line-context">
<span class="line-number">127</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_union</span>(self, file_path: str, union_name: str, union: Union) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">128</span>        <span class="string">""</span><span class="string">"Verify a union definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">129</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(union_name):
</div>
<div class="line-uncovered">
<span class="line-number">130</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid union name <span class="string">'{union_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">131</span>
</div>
<div class="line-context">
<span class="line-number">132</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> union.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> union.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">133</span>            self.issues.<span class="function">append</span>(f<span class="string">"Union name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">134</span>
</div>
<div class="line-context">
<span class="line-number">135</span>        <span class="comment"># Verify fields</span>
</div>
<div class="line-context">
<span class="line-number">136</span>        <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> union.fields:
</div>
<div class="line-context">
<span class="line-number">137</span>            self.<span class="function">_verify_field</span>(file_path, f<span class="string">"union {union_name}"</span>, field)
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_function</span>(self, file_path: str, function: Function) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">140</span>        <span class="string">""</span><span class="string">"Verify a function definition"</span><span class="string">""</span>
</div>
</div>
<h4>Line 133</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">123</span>                self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">124</span>                    f<span class="string">"Invalid enum value name <span class="string">'{enum_value.name}'</span> <span class="</span>keyword<span class="string">">in</span> enum {enum_name} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">125</span>                )
</div>
<div class="line-context">
<span class="line-number">126</span>
</div>
<div class="line-context">
<span class="line-number">127</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_union</span>(self, file_path: str, union_name: str, union: Union) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">128</span>        <span class="string">""</span><span class="string">"Verify a union definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">129</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(union_name):
</div>
<div class="line-context">
<span class="line-number">130</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid union name <span class="string">'{union_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">131</span>
</div>
<div class="line-context">
<span class="line-number">132</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> union.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> union.name.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">133</span>            self.issues.<span class="function">append</span>(f<span class="string">"Union name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">134</span>
</div>
<div class="line-context">
<span class="line-number">135</span>        <span class="comment"># Verify fields</span>
</div>
<div class="line-context">
<span class="line-number">136</span>        <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> union.fields:
</div>
<div class="line-context">
<span class="line-number">137</span>            self.<span class="function">_verify_field</span>(file_path, f<span class="string">"union {union_name}"</span>, field)
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_function</span>(self, file_path: str, function: Function) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">140</span>        <span class="string">""</span><span class="string">"Verify a function definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">141</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> function.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> function.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">142</span>            self.issues.<span class="function">append</span>(f<span class="string">"Function name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">143</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(function.name):
</div>
</div>
<h4>Line 142</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">132</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> union.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> union.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">133</span>            self.issues.<span class="function">append</span>(f<span class="string">"Union name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">134</span>
</div>
<div class="line-context">
<span class="line-number">135</span>        <span class="comment"># Verify fields</span>
</div>
<div class="line-context">
<span class="line-number">136</span>        <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> union.fields:
</div>
<div class="line-context">
<span class="line-number">137</span>            self.<span class="function">_verify_field</span>(file_path, f<span class="string">"union {union_name}"</span>, field)
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_function</span>(self, file_path: str, function: Function) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">140</span>        <span class="string">""</span><span class="string">"Verify a function definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">141</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> function.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> function.name.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">142</span>            self.issues.<span class="function">append</span>(f<span class="string">"Function name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">143</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(function.name):
</div>
<div class="line-context">
<span class="line-number">144</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">145</span>                f<span class="string">"Invalid function name <span class="string">'{function.name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">146</span>            )
</div>
<div class="line-context">
<span class="line-number">147</span>
</div>
<div class="line-context">
<span class="line-number">148</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> function.return_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> function.return_type.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">149</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">150</span>                f<span class="string">"Function <span class="</span>keyword<span class="string">">return</span> type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{function.name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">151</span>            )
</div>
<div class="line-context">
<span class="line-number">152</span>
</div>
</div>
<h4>Line 144</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">134</span>
</div>
<div class="line-context">
<span class="line-number">135</span>        <span class="comment"># Verify fields</span>
</div>
<div class="line-context">
<span class="line-number">136</span>        <span class=<span class="string">"keyword"</span>>for</span> field <span class=<span class="string">"keyword"</span>>in</span> union.fields:
</div>
<div class="line-context">
<span class="line-number">137</span>            self.<span class="function">_verify_field</span>(file_path, f<span class="string">"union {union_name}"</span>, field)
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_function</span>(self, file_path: str, function: Function) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">140</span>        <span class="string">""</span><span class="string">"Verify a function definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">141</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> function.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> function.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">142</span>            self.issues.<span class="function">append</span>(f<span class="string">"Function name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">143</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(function.name):
</div>
<div class="line-uncovered">
<span class="line-number">144</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">145</span>                f<span class="string">"Invalid function name <span class="string">'{function.name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">146</span>            )
</div>
<div class="line-context">
<span class="line-number">147</span>
</div>
<div class="line-context">
<span class="line-number">148</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> function.return_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> function.return_type.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">149</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">150</span>                f<span class="string">"Function <span class="</span>keyword<span class="string">">return</span> type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{function.name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">151</span>            )
</div>
<div class="line-context">
<span class="line-number">152</span>
</div>
<div class="line-context">
<span class="line-number">153</span>        <span class="comment"># Verify <span class="function">parameters</span>(skip variadic parameter <span class="string">'...'</span>)</span>
</div>
<div class="line-context">
<span class="line-number">154</span>        <span class=<span class="string">"keyword"</span>>for</span> param <span class=<span class="string">"keyword"</span>>in</span> function.parameters:
</div>
</div>
<h4>Line 149</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">139</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_function</span>(self, file_path: str, function: Function) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">140</span>        <span class="string">""</span><span class="string">"Verify a function definition"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">141</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> function.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> function.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">142</span>            self.issues.<span class="function">append</span>(f<span class="string">"Function name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">143</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(function.name):
</div>
<div class="line-context">
<span class="line-number">144</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">145</span>                f<span class="string">"Invalid function name <span class="string">'{function.name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">146</span>            )
</div>
<div class="line-context">
<span class="line-number">147</span>
</div>
<div class="line-context">
<span class="line-number">148</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> function.return_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> function.return_type.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">149</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">150</span>                f<span class="string">"Function <span class="</span>keyword<span class="string">">return</span> type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{function.name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">151</span>            )
</div>
<div class="line-context">
<span class="line-number">152</span>
</div>
<div class="line-context">
<span class="line-number">153</span>        <span class="comment"># Verify <span class="function">parameters</span>(skip variadic parameter <span class="string">'...'</span>)</span>
</div>
<div class="line-context">
<span class="line-number">154</span>        <span class=<span class="string">"keyword"</span>>for</span> param <span class=<span class="string">"keyword"</span>>in</span> function.parameters:
</div>
<div class="line-context">
<span class="line-number">155</span>            <span class=<span class="string">"keyword"</span>>if</span> param.name == <span class="string">"..."</span>:  <span class="comment"># Skip variadic parameter</span>
</div>
<div class="line-context">
<span class="line-number">156</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">157</span>            self.<span class="function">_verify_field</span>(file_path, f<span class="string">"function {function.name}"</span>, param)
</div>
<div class="line-context">
<span class="line-number">158</span>
</div>
<div class="line-context">
<span class="line-number">159</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_global</span>(self, file_path: str, global_var: Field) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
</div>
<h4>Line 166</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">156</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">157</span>            self.<span class="function">_verify_field</span>(file_path, f<span class="string">"function {function.name}"</span>, param)
</div>
<div class="line-context">
<span class="line-number">158</span>
</div>
<div class="line-context">
<span class="line-number">159</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_global</span>(self, file_path: str, global_var: Field) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">160</span>        <span class="string">""</span><span class="string">"Verify a <span class="</span>keyword<span class="string">">global</span> variable"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">161</span>        self.<span class="function">_verify_field</span>(file_path, <span class="string">"<span class="</span>keyword<span class="string">">global</span>"</span>, global_var)
</div>
<div class="line-context">
<span class="line-number">162</span>
</div>
<div class="line-context">
<span class="line-number">163</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_alias</span>(self, file_path: str, alias_name: str, alias: Alias) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">164</span>        <span class="string">""</span><span class="string">"Verify a type <span class="function">alias</span>(typedef)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">165</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(alias_name):
</div>
<div class="line-uncovered">
<span class="line-number">166</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid alias name <span class="string">'{alias_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">167</span>
</div>
<div class="line-context">
<span class="line-number">168</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> alias.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> alias.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">169</span>            self.issues.<span class="function">append</span>(f<span class="string">"Alias name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">170</span>
</div>
<div class="line-context">
<span class="line-number">171</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> alias.original_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> alias.original_type.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">172</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">173</span>                f<span class="string">"Alias original type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{alias_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">174</span>            )
</div>
<div class="line-context">
<span class="line-number">175</span>
</div>
<div class="line-context">
<span class="line-number">176</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_field</span>(self, file_path: str, context: str, field: Field) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
</div>
<h4>Line 169</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">159</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_global</span>(self, file_path: str, global_var: Field) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">160</span>        <span class="string">""</span><span class="string">"Verify a <span class="</span>keyword<span class="string">">global</span> variable"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">161</span>        self.<span class="function">_verify_field</span>(file_path, <span class="string">"<span class="</span>keyword<span class="string">">global</span>"</span>, global_var)
</div>
<div class="line-context">
<span class="line-number">162</span>
</div>
<div class="line-context">
<span class="line-number">163</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_alias</span>(self, file_path: str, alias_name: str, alias: Alias) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">164</span>        <span class="string">""</span><span class="string">"Verify a type <span class="function">alias</span>(typedef)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">165</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(alias_name):
</div>
<div class="line-context">
<span class="line-number">166</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid alias name <span class="string">'{alias_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">167</span>
</div>
<div class="line-context">
<span class="line-number">168</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> alias.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> alias.name.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">169</span>            self.issues.<span class="function">append</span>(f<span class="string">"Alias name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">170</span>
</div>
<div class="line-context">
<span class="line-number">171</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> alias.original_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> alias.original_type.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">172</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">173</span>                f<span class="string">"Alias original type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{alias_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">174</span>            )
</div>
<div class="line-context">
<span class="line-number">175</span>
</div>
<div class="line-context">
<span class="line-number">176</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_field</span>(self, file_path: str, context: str, field: Field) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">177</span>        <span class="string">""</span><span class="string">"Verify a <span class="function">field</span>(struct field, function parameter, <span class="</span>keyword<span class="string">">global</span> variable)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">178</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> invalid names</span>
</div>
<div class="line-context">
<span class="line-number">179</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> field.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> field.name.<span class="function">strip</span>():
</div>
</div>
<h4>Line 172</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">162</span>
</div>
<div class="line-context">
<span class="line-number">163</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_alias</span>(self, file_path: str, alias_name: str, alias: Alias) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">164</span>        <span class="string">""</span><span class="string">"Verify a type <span class="function">alias</span>(typedef)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">165</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(alias_name):
</div>
<div class="line-context">
<span class="line-number">166</span>            self.issues.<span class="function">append</span>(f<span class="string">"Invalid alias name <span class="string">'{alias_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">167</span>
</div>
<div class="line-context">
<span class="line-number">168</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> alias.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> alias.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">169</span>            self.issues.<span class="function">append</span>(f<span class="string">"Alias name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">170</span>
</div>
<div class="line-context">
<span class="line-number">171</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> alias.original_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> alias.original_type.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">172</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">173</span>                f<span class="string">"Alias original type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{alias_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">174</span>            )
</div>
<div class="line-context">
<span class="line-number">175</span>
</div>
<div class="line-context">
<span class="line-number">176</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_field</span>(self, file_path: str, context: str, field: Field) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">177</span>        <span class="string">""</span><span class="string">"Verify a <span class="function">field</span>(struct field, function parameter, <span class="</span>keyword<span class="string">">global</span> variable)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">178</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> invalid names</span>
</div>
<div class="line-context">
<span class="line-number">179</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> field.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> field.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">180</span>            self.issues.<span class="function">append</span>(f<span class="string">"Field name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {context} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">181</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(field.name):
</div>
<div class="line-context">
<span class="line-number">182</span>            self.issues.<span class="function">append</span>(
</div>
</div>
<h4>Line 180</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">170</span>
</div>
<div class="line-context">
<span class="line-number">171</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> alias.original_type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> alias.original_type.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">172</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">173</span>                f<span class="string">"Alias original type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{alias_name}'</span> <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">174</span>            )
</div>
<div class="line-context">
<span class="line-number">175</span>
</div>
<div class="line-context">
<span class="line-number">176</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_verify_field</span>(self, file_path: str, context: str, field: Field) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">177</span>        <span class="string">""</span><span class="string">"Verify a <span class="function">field</span>(struct field, function parameter, <span class="</span>keyword<span class="string">">global</span> variable)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">178</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> invalid names</span>
</div>
<div class="line-context">
<span class="line-number">179</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> field.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> field.name.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">180</span>            self.issues.<span class="function">append</span>(f<span class="string">"Field name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {context} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">181</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(field.name):
</div>
<div class="line-context">
<span class="line-number">182</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">183</span>                f<span class="string">"Invalid field name <span class="string">'{field.name}'</span> <span class="</span>keyword<span class="string">">in</span> {context} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">184</span>            )
</div>
<div class="line-context">
<span class="line-number">185</span>
</div>
<div class="line-context">
<span class="line-number">186</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> invalid types</span>
</div>
<div class="line-context">
<span class="line-number">187</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> field.type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> field.type.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">188</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">189</span>                f<span class="string">"Field type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{field.name}'</span> <span class="</span>keyword<span class="string">">in</span> {context} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">190</span>            )
</div>
</div>
<h4>Line 188</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">178</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> invalid names</span>
</div>
<div class="line-context">
<span class="line-number">179</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> field.name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> field.name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">180</span>            self.issues.<span class="function">append</span>(f<span class="string">"Field name <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">in</span> {context} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>)
</div>
<div class="line-context">
<span class="line-number">181</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_is_valid_identifier</span>(field.name):
</div>
<div class="line-context">
<span class="line-number">182</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">183</span>                f<span class="string">"Invalid field name <span class="string">'{field.name}'</span> <span class="</span>keyword<span class="string">">in</span> {context} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">184</span>            )
</div>
<div class="line-context">
<span class="line-number">185</span>
</div>
<div class="line-context">
<span class="line-number">186</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> invalid types</span>
</div>
<div class="line-context">
<span class="line-number">187</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> field.type <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> field.type.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">188</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">189</span>                f<span class="string">"Field type <span class="</span>keyword<span class="string">">is</span> empty <span class="</span>keyword<span class="string">">for</span> <span class="string">'{field.name}'</span> <span class="</span>keyword<span class="string">">in</span> {context} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">190</span>            )
</div>
<div class="line-context">
<span class="line-number">191</span>        <span class=<span class="string">"keyword"</span>>elif</span> self.<span class="function">_is_suspicious_type</span>(field.type):
</div>
<div class="line-context">
<span class="line-number">192</span>            self.issues.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">193</span>                f<span class="string">"Suspicious field type <span class="string">'{field.type}'</span> <span class="</span>keyword<span class="string">">for</span> <span class="string">'{field.name}'</span> <span class="</span>keyword<span class="string">">in</span> {context} <span class="</span>keyword<span class="string">">in</span> {file_path}"</span>
</div>
<div class="line-context">
<span class="line-number">194</span>            )
</div>
<div class="line-context">
<span class="line-number">195</span>
</div>
<div class="line-context">
<span class="line-number">196</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> suspicious values</span>
</div>
<div class="line-context">
<span class="line-number">197</span>        <span class=<span class="string">"keyword"</span>>if</span> field.value <span class=<span class="string">"keyword"</span>>and</span> self.<span class="function">_is_suspicious_value</span>(field.value):
</div>
<div class="line-context">
<span class="line-number">198</span>            self.issues.<span class="function">append</span>(
</div>
</div>
<h4>Line 213</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">203</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a name <span class="</span>keyword<span class="string">">is</span> a valid C identifier"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">204</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> name <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> name.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">205</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">206</span>
</div>
<div class="line-context">
<span class="line-number">207</span>        <span class="comment"># C identifier rules: start <span class=<span class="string">"keyword"</span>>with</span> letter <span class=<span class="string">"keyword"</span>>or</span> underscore, then letters, digits, <span class=<span class="string">"keyword"</span>>or</span> underscores</span>
</div>
<div class="line-context">
<span class="line-number">208</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">bool</span>(re.<span class="function">match</span>(r<span class="string">"^[a-zA-Z_][a-zA-Z0-9_]*$"</span>, name.<span class="function">strip</span>()))
</div>
<div class="line-context">
<span class="line-number">209</span>
</div>
<div class="line-context">
<span class="line-number">210</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_is_suspicious_type</span>(self, type_str: str) -> bool:
</div>
<div class="line-context">
<span class="line-number">211</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a type string looks suspicious"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">212</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> type_str <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> type_str.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">213</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">214</span>
</div>
<div class="line-context">
<span class="line-number">215</span>        type_str = type_str.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">216</span>
</div>
<div class="line-context">
<span class="line-number">217</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> obvious parsing errors</span>
</div>
<div class="line-context">
<span class="line-number">218</span>        suspicious_patterns = [
</div>
<div class="line-context">
<span class="line-number">219</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]+$"</span>,  <span class="comment"># Only brackets, spaces, backslashes, newlines</span>
</div>
<div class="line-context">
<span class="line-number">220</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]+$"</span>,  <span class="comment"># Mostly brackets <span class=<span class="string">"keyword"</span>>and</span> whitespace</span>
</div>
<div class="line-context">
<span class="line-number">221</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]*$"</span>,  <span class="comment"># All brackets <span class=<span class="string">"keyword"</span>>and</span> whitespace</span>
</div>
<div class="line-context">
<span class="line-number">222</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]*$"</span>,  <span class="comment"># Excessive brackets/whitespace</span>
</div>
<div class="line-context">
<span class="line-number">223</span>        ]
</div>
</div>
<h4>Line 227</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">217</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> obvious parsing errors</span>
</div>
<div class="line-context">
<span class="line-number">218</span>        suspicious_patterns = [
</div>
<div class="line-context">
<span class="line-number">219</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]+$"</span>,  <span class="comment"># Only brackets, spaces, backslashes, newlines</span>
</div>
<div class="line-context">
<span class="line-number">220</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]+$"</span>,  <span class="comment"># Mostly brackets <span class=<span class="string">"keyword"</span>>and</span> whitespace</span>
</div>
<div class="line-context">
<span class="line-number">221</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]*$"</span>,  <span class="comment"># All brackets <span class=<span class="string">"keyword"</span>>and</span> whitespace</span>
</div>
<div class="line-context">
<span class="line-number">222</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]*$"</span>,  <span class="comment"># Excessive brackets/whitespace</span>
</div>
<div class="line-context">
<span class="line-number">223</span>        ]
</div>
<div class="line-context">
<span class="line-number">224</span>
</div>
<div class="line-context">
<span class="line-number">225</span>        <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> suspicious_patterns:
</div>
<div class="line-context">
<span class="line-number">226</span>            <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(pattern, type_str):
</div>
<div class="line-uncovered">
<span class="line-number">227</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">228</span>
</div>
<div class="line-context">
<span class="line-number">229</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> unbalanced brackets</span>
</div>
<div class="line-context">
<span class="line-number">230</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_has_unbalanced_brackets</span>(type_str):
</div>
<div class="line-context">
<span class="line-number">231</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">232</span>
</div>
<div class="line-context">
<span class="line-number">233</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> excessive newlines <span class=<span class="string">"keyword"</span>>or</span> backslashes</span>
</div>
<div class="line-context">
<span class="line-number">234</span>        <span class=<span class="string">"keyword"</span>>if</span> type_str.<span class="function">count</span>(<span class="string">"\n"</span>) > <span class="number">5</span> <span class=<span class="string">"keyword"</span>>or</span> type_str.<span class="function">count</span>(<span class="string">"\\"</span>) > <span class="number">10</span>:
</div>
<div class="line-context">
<span class="line-number">235</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">236</span>
</div>
<div class="line-context">
<span class="line-number">237</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
</div>
<h4>Line 235</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">225</span>        <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> suspicious_patterns:
</div>
<div class="line-context">
<span class="line-number">226</span>            <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(pattern, type_str):
</div>
<div class="line-context">
<span class="line-number">227</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">228</span>
</div>
<div class="line-context">
<span class="line-number">229</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> unbalanced brackets</span>
</div>
<div class="line-context">
<span class="line-number">230</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_has_unbalanced_brackets</span>(type_str):
</div>
<div class="line-context">
<span class="line-number">231</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">232</span>
</div>
<div class="line-context">
<span class="line-number">233</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> excessive newlines <span class=<span class="string">"keyword"</span>>or</span> backslashes</span>
</div>
<div class="line-context">
<span class="line-number">234</span>        <span class=<span class="string">"keyword"</span>>if</span> type_str.<span class="function">count</span>(<span class="string">"\n"</span>) > <span class="number">5</span> <span class=<span class="string">"keyword"</span>>or</span> type_str.<span class="function">count</span>(<span class="string">"\\"</span>) > <span class="number">10</span>:
</div>
<div class="line-uncovered">
<span class="line-number">235</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">236</span>
</div>
<div class="line-context">
<span class="line-number">237</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">238</span>
</div>
<div class="line-context">
<span class="line-number">239</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_is_suspicious_value</span>(self, value: str) -> bool:
</div>
<div class="line-context">
<span class="line-number">240</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a value string looks suspicious"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">241</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> value <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> value.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">242</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">243</span>
</div>
<div class="line-context">
<span class="line-number">244</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">245</span>
</div>
</div>
<h4>Line 242</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">232</span>
</div>
<div class="line-context">
<span class="line-number">233</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> excessive newlines <span class=<span class="string">"keyword"</span>>or</span> backslashes</span>
</div>
<div class="line-context">
<span class="line-number">234</span>        <span class=<span class="string">"keyword"</span>>if</span> type_str.<span class="function">count</span>(<span class="string">"\n"</span>) > <span class="number">5</span> <span class=<span class="string">"keyword"</span>>or</span> type_str.<span class="function">count</span>(<span class="string">"\\"</span>) > <span class="number">10</span>:
</div>
<div class="line-context">
<span class="line-number">235</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">236</span>
</div>
<div class="line-context">
<span class="line-number">237</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">238</span>
</div>
<div class="line-context">
<span class="line-number">239</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_is_suspicious_value</span>(self, value: str) -> bool:
</div>
<div class="line-context">
<span class="line-number">240</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a value string looks suspicious"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">241</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> value <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>not</span> value.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">242</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">243</span>
</div>
<div class="line-context">
<span class="line-number">244</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">245</span>
</div>
<div class="line-context">
<span class="line-number">246</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> obvious parsing errors</span>
</div>
<div class="line-context">
<span class="line-number">247</span>        suspicious_patterns = [
</div>
<div class="line-context">
<span class="line-number">248</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]+$"</span>,  <span class="comment"># Only brackets, spaces, backslashes, newlines</span>
</div>
<div class="line-context">
<span class="line-number">249</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]+$"</span>,  <span class="comment"># Mostly brackets <span class=<span class="string">"keyword"</span>>and</span> whitespace</span>
</div>
<div class="line-context">
<span class="line-number">250</span>        ]
</div>
<div class="line-context">
<span class="line-number">251</span>
</div>
<div class="line-context">
<span class="line-number">252</span>        <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> suspicious_patterns:
</div>
</div>
<h4>Line 254</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">244</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">245</span>
</div>
<div class="line-context">
<span class="line-number">246</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> obvious parsing errors</span>
</div>
<div class="line-context">
<span class="line-number">247</span>        suspicious_patterns = [
</div>
<div class="line-context">
<span class="line-number">248</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]+$"</span>,  <span class="comment"># Only brackets, spaces, backslashes, newlines</span>
</div>
<div class="line-context">
<span class="line-number">249</span>            r<span class="string">"^[\[\]\{\}\(\)\s\\\n]*[\[\]\{\}\(\)\s\\\n]+$"</span>,  <span class="comment"># Mostly brackets <span class=<span class="string">"keyword"</span>>and</span> whitespace</span>
</div>
<div class="line-context">
<span class="line-number">250</span>        ]
</div>
<div class="line-context">
<span class="line-number">251</span>
</div>
<div class="line-context">
<span class="line-number">252</span>        <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> suspicious_patterns:
</div>
<div class="line-context">
<span class="line-number">253</span>            <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(pattern, value):
</div>
<div class="line-uncovered">
<span class="line-number">254</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">255</span>
</div>
<div class="line-context">
<span class="line-number">256</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> unbalanced brackets</span>
</div>
<div class="line-context">
<span class="line-number">257</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_has_unbalanced_brackets</span>(value):
</div>
<div class="line-context">
<span class="line-number">258</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">259</span>
</div>
<div class="line-context">
<span class="line-number">260</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> excessive newlines <span class=<span class="string">"keyword"</span>>or</span> backslashes</span>
</div>
<div class="line-context">
<span class="line-number">261</span>        <span class=<span class="string">"keyword"</span>>if</span> value.<span class="function">count</span>(<span class="string">"\n"</span>) > <span class="number">3</span> <span class=<span class="string">"keyword"</span>>or</span> value.<span class="function">count</span>(<span class="string">"\\"</span>) > <span class="number">5</span>:
</div>
<div class="line-context">
<span class="line-number">262</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">263</span>
</div>
<div class="line-context">
<span class="line-number">264</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
</div>
<h4>Line 262</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">252</span>        <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> suspicious_patterns:
</div>
<div class="line-context">
<span class="line-number">253</span>            <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(pattern, value):
</div>
<div class="line-context">
<span class="line-number">254</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">255</span>
</div>
<div class="line-context">
<span class="line-number">256</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> unbalanced brackets</span>
</div>
<div class="line-context">
<span class="line-number">257</span>        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_has_unbalanced_brackets</span>(value):
</div>
<div class="line-context">
<span class="line-number">258</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">259</span>
</div>
<div class="line-context">
<span class="line-number">260</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>for</span> excessive newlines <span class=<span class="string">"keyword"</span>>or</span> backslashes</span>
</div>
<div class="line-context">
<span class="line-number">261</span>        <span class=<span class="string">"keyword"</span>>if</span> value.<span class="function">count</span>(<span class="string">"\n"</span>) > <span class="number">3</span> <span class=<span class="string">"keyword"</span>>or</span> value.<span class="function">count</span>(<span class="string">"\\"</span>) > <span class="number">5</span>:
</div>
<div class="line-uncovered">
<span class="line-number">262</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">263</span>
</div>
<div class="line-context">
<span class="line-number">264</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">265</span>
</div>
<div class="line-context">
<span class="line-number">266</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_has_unbalanced_brackets</span>(self, text: str) -> bool:
</div>
<div class="line-context">
<span class="line-number">267</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> text has unbalanced brackets"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">268</span>        stack = []
</div>
<div class="line-context">
<span class="line-number">269</span>        bracket_pairs = {<span class="string">")"</span>: <span class="string">"("</span>, <span class="string">"]"</span>: <span class="string">"["</span>, <span class="string">"}"</span>: <span class="string">"{"</span>}
</div>
<div class="line-context">
<span class="line-number">270</span>
</div>
<div class="line-context">
<span class="line-number">271</span>        <span class=<span class="string">"keyword"</span>>for</span> char <span class=<span class="string">"keyword"</span>>in</span> text:
</div>
<div class="line-context">
<span class="line-number">272</span>            <span class=<span class="string">"keyword"</span>>if</span> char <span class=<span class="string">"keyword"</span>>in</span> <span class="string">"([{"</span>:
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/transformer.py
<span class="coverage-info">96.02% (241/251 lines covered)</span>
</div>
<h4>Lines 103-104</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 93</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">Path</span>(config_file).<span class="function">exists</span>():
</div>
<div class="line-context">
<span class="line-number"> 94</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">FileNotFoundError</span>(f<span class="string">"Configuration file <span class="</span>keyword<span class="string">">not</span> found: {config_file}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 95</span>
</div>
<div class="line-context">
<span class="line-number"> 96</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 97</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(config_file, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number"> 98</span>                config = json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number"> 99</span>
</div>
<div class="line-context">
<span class="line-number">100</span>            self.logger.<span class="function">debug</span>(<span class="string">"Loaded configuration <span class="</span>keyword<span class="string">">from</span>: %s"</span>, config_file)
</div>
<div class="line-context">
<span class="line-number">101</span>            <span class=<span class="string">"keyword"</span>>return</span> config
</div>
<div class="line-context">
<span class="line-number">102</span>
</div>
<div class="line-uncovered">
<span class="line-number">103</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">104</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number">105</span>                f<span class="string">"Failed to load configuration <span class="</span>keyword<span class="string">">from</span> {config_file}: {e}"</span>
</div>
<div class="line-context">
<span class="line-number">106</span>            ) <span class=<span class="string">"keyword"</span>>from</span> e
</div>
<div class="line-context">
<span class="line-number">107</span>
</div>
<div class="line-context">
<span class="line-number">108</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_apply_transformations</span>(
</div>
<div class="line-context">
<span class="line-number">109</span>        self, model: ProjectModel, config: Dict[str, Any]
</div>
<div class="line-context">
<span class="line-number">110</span>    ) -> ProjectModel:
</div>
<div class="line-context">
<span class="line-number">111</span>        <span class="string">""</span><span class="string">"Apply all configured transformations to the model"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">112</span>        self.logger.<span class="function">info</span>(<span class="string">"Applying transformations to model"</span>)
</div>
<div class="line-context">
<span class="line-number">113</span>
</div>
<div class="line-context">
<span class="line-number">114</span>        <span class="comment"># Apply comprehensive file <span class="function">filtering</span>(moved <span class=<span class="string">"keyword"</span>>from</span> parser)</span>
</div>
</div>
<h4>Line 344</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">334</span>            included_filename = self.<span class="function">_find_included_file</span>(
</div>
<div class="line-context">
<span class="line-number">335</span>                include_name, file_model.project_root
</div>
<div class="line-context">
<span class="line-number">336</span>            )
</div>
<div class="line-context">
<span class="line-number">337</span>
</div>
<div class="line-context">
<span class="line-number">338</span>            <span class=<span class="string">"keyword"</span>>if</span> included_filename:
</div>
<div class="line-context">
<span class="line-number">339</span>                <span class="comment"># Convert full path to filename <span class=<span class="string">"keyword"</span>>for</span> lookup</span>
</div>
<div class="line-context">
<span class="line-number">340</span>                included_filename_key = <span class="function">Path</span>(included_filename).name
</div>
<div class="line-context">
<span class="line-number">341</span>                <span class=<span class="string">"keyword"</span>>if</span> included_filename_key <span class=<span class="string">"keyword"</span>>in</span> file_map:
</div>
<div class="line-context">
<span class="line-number">342</span>                    <span class="comment"># Prevent self-referencing include relations</span>
</div>
<div class="line-context">
<span class="line-number">343</span>                    <span class=<span class="string">"keyword"</span>>if</span> file_model.relative_path == included_filename_key:
</div>
<div class="line-uncovered">
<span class="line-number">344</span>                        self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">345</span>                            <span class="string">"Skipping self-include relation <span class="</span>keyword<span class="string">">for</span> %s"</span>, file_model.relative_path
</div>
<div class="line-context">
<span class="line-number">346</span>                        )
</div>
<div class="line-context">
<span class="line-number">347</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">348</span>
</div>
<div class="line-context">
<span class="line-number">349</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this include relation already exists to prevent cycles</span>
</div>
<div class="line-context">
<span class="line-number">350</span>                relation_exists = <span class="function">any</span>(
</div>
<div class="line-context">
<span class="line-number">351</span>                    rel.source_file == file_model.relative_path
</div>
<div class="line-context">
<span class="line-number">352</span>                    <span class=<span class="string">"keyword"</span>>and</span> rel.included_file == included_filename_key
</div>
<div class="line-context">
<span class="line-number">353</span>                    <span class=<span class="string">"keyword"</span>>for</span> rel <span class=<span class="string">"keyword"</span>>in</span> file_model.include_relations
</div>
<div class="line-context">
<span class="line-number">354</span>                )
</div>
</div>
<h4>Line 347</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">337</span>
</div>
<div class="line-context">
<span class="line-number">338</span>            <span class=<span class="string">"keyword"</span>>if</span> included_filename:
</div>
<div class="line-context">
<span class="line-number">339</span>                <span class="comment"># Convert full path to filename <span class=<span class="string">"keyword"</span>>for</span> lookup</span>
</div>
<div class="line-context">
<span class="line-number">340</span>                included_filename_key = <span class="function">Path</span>(included_filename).name
</div>
<div class="line-context">
<span class="line-number">341</span>                <span class=<span class="string">"keyword"</span>>if</span> included_filename_key <span class=<span class="string">"keyword"</span>>in</span> file_map:
</div>
<div class="line-context">
<span class="line-number">342</span>                    <span class="comment"># Prevent self-referencing include relations</span>
</div>
<div class="line-context">
<span class="line-number">343</span>                    <span class=<span class="string">"keyword"</span>>if</span> file_model.relative_path == included_filename_key:
</div>
<div class="line-context">
<span class="line-number">344</span>                        self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">345</span>                            <span class="string">"Skipping self-include relation <span class="</span>keyword<span class="string">">for</span> %s"</span>, file_model.relative_path
</div>
<div class="line-context">
<span class="line-number">346</span>                        )
</div>
<div class="line-uncovered">
<span class="line-number">347</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">348</span>
</div>
<div class="line-context">
<span class="line-number">349</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this include relation already exists to prevent cycles</span>
</div>
<div class="line-context">
<span class="line-number">350</span>                relation_exists = <span class="function">any</span>(
</div>
<div class="line-context">
<span class="line-number">351</span>                    rel.source_file == file_model.relative_path
</div>
<div class="line-context">
<span class="line-number">352</span>                    <span class=<span class="string">"keyword"</span>>and</span> rel.included_file == included_filename_key
</div>
<div class="line-context">
<span class="line-number">353</span>                    <span class=<span class="string">"keyword"</span>>for</span> rel <span class=<span class="string">"keyword"</span>>in</span> file_model.include_relations
</div>
<div class="line-context">
<span class="line-number">354</span>                )
</div>
<div class="line-context">
<span class="line-number">355</span>
</div>
<div class="line-context">
<span class="line-number">356</span>                <span class=<span class="string">"keyword"</span>>if</span> relation_exists:
</div>
<div class="line-context">
<span class="line-number">357</span>                    self.logger.<span class="function">debug</span>(
</div>
</div>
<h4>Line 357</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">347</span>                        <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">348</span>
</div>
<div class="line-context">
<span class="line-number">349</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this include relation already exists to prevent cycles</span>
</div>
<div class="line-context">
<span class="line-number">350</span>                relation_exists = <span class="function">any</span>(
</div>
<div class="line-context">
<span class="line-number">351</span>                    rel.source_file == file_model.relative_path
</div>
<div class="line-context">
<span class="line-number">352</span>                    <span class=<span class="string">"keyword"</span>>and</span> rel.included_file == included_filename_key
</div>
<div class="line-context">
<span class="line-number">353</span>                    <span class=<span class="string">"keyword"</span>>for</span> rel <span class=<span class="string">"keyword"</span>>in</span> file_model.include_relations
</div>
<div class="line-context">
<span class="line-number">354</span>                )
</div>
<div class="line-context">
<span class="line-number">355</span>
</div>
<div class="line-context">
<span class="line-number">356</span>                <span class=<span class="string">"keyword"</span>>if</span> relation_exists:
</div>
<div class="line-uncovered">
<span class="line-number">357</span>                    self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">358</span>                        <span class="string">"Cyclic include detected <span class="</span>keyword<span class="string">">and</span> skipped: %s -> %s"</span>,
</div>
<div class="line-context">
<span class="line-number">359</span>                        file_model.relative_path,
</div>
<div class="line-context">
<span class="line-number">360</span>                        included_filename_key,
</div>
<div class="line-context">
<span class="line-number">361</span>                    )
</div>
<div class="line-context">
<span class="line-number">362</span>                    <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">363</span>
</div>
<div class="line-context">
<span class="line-number">364</span>                <span class="comment"># Create include relation using appropriate paths</span>
</div>
<div class="line-context">
<span class="line-number">365</span>                <span class="comment"># For <span class="function">tests</span>(tmp directories), use full paths; otherwise use filenames</span>
</div>
<div class="line-context">
<span class="line-number">366</span>                source_file = file_model.file_path <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"tmp"</span> <span class=<span class="string">"keyword"</span>>in</span> file_model.file_path <span class=<span class="string">"keyword"</span>>else</span> file_model.relative_path
</div>
<div class="line-context">
<span class="line-number">367</span>                included_file = included_filename <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"tmp"</span> <span class=<span class="string">"keyword"</span>>in</span> included_filename <span class=<span class="string">"keyword"</span>>else</span> included_filename_key
</div>
</div>
<h4>Line 362</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">352</span>                    <span class=<span class="string">"keyword"</span>>and</span> rel.included_file == included_filename_key
</div>
<div class="line-context">
<span class="line-number">353</span>                    <span class=<span class="string">"keyword"</span>>for</span> rel <span class=<span class="string">"keyword"</span>>in</span> file_model.include_relations
</div>
<div class="line-context">
<span class="line-number">354</span>                )
</div>
<div class="line-context">
<span class="line-number">355</span>
</div>
<div class="line-context">
<span class="line-number">356</span>                <span class=<span class="string">"keyword"</span>>if</span> relation_exists:
</div>
<div class="line-context">
<span class="line-number">357</span>                    self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">358</span>                        <span class="string">"Cyclic include detected <span class="</span>keyword<span class="string">">and</span> skipped: %s -> %s"</span>,
</div>
<div class="line-context">
<span class="line-number">359</span>                        file_model.relative_path,
</div>
<div class="line-context">
<span class="line-number">360</span>                        included_filename_key,
</div>
<div class="line-context">
<span class="line-number">361</span>                    )
</div>
<div class="line-uncovered">
<span class="line-number">362</span>                    <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">363</span>
</div>
<div class="line-context">
<span class="line-number">364</span>                <span class="comment"># Create include relation using appropriate paths</span>
</div>
<div class="line-context">
<span class="line-number">365</span>                <span class="comment"># For <span class="function">tests</span>(tmp directories), use full paths; otherwise use filenames</span>
</div>
<div class="line-context">
<span class="line-number">366</span>                source_file = file_model.file_path <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"tmp"</span> <span class=<span class="string">"keyword"</span>>in</span> file_model.file_path <span class=<span class="string">"keyword"</span>>else</span> file_model.relative_path
</div>
<div class="line-context">
<span class="line-number">367</span>                included_file = included_filename <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"tmp"</span> <span class=<span class="string">"keyword"</span>>in</span> included_filename <span class=<span class="string">"keyword"</span>>else</span> included_filename_key
</div>
<div class="line-context">
<span class="line-number">368</span>
</div>
<div class="line-context">
<span class="line-number">369</span>                include_relation = <span class="function">IncludeRelation</span>(
</div>
<div class="line-context">
<span class="line-number">370</span>                    source_file=source_file,
</div>
<div class="line-context">
<span class="line-number">371</span>                    included_file=included_file,
</div>
<div class="line-context">
<span class="line-number">372</span>                    depth=current_depth,
</div>
</div>
<h4>Line 418</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">408</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">409</span>
</div>
<div class="line-context">
<span class="line-number">410</span>            <span class=<span class="string">"keyword"</span>>for</span> ext <span class=<span class="string">"keyword"</span>>in</span> extensions:
</div>
<div class="line-context">
<span class="line-number">411</span>                file_path = search_path / f<span class="string">"{include_name}{ext}"</span>
</div>
<div class="line-context">
<span class="line-number">412</span>                <span class=<span class="string">"keyword"</span>>if</span> file_path.<span class="function">exists</span>():
</div>
<div class="line-context">
<span class="line-number">413</span>                    <span class="comment"># For backward compatibility <span class=<span class="string">"keyword"</span>>with</span> tests, <span class=<span class="string">"keyword"</span>>return</span> full path <span class=<span class="string">"keyword"</span>>if</span> it's a test</span>
</div>
<div class="line-context">
<span class="line-number">414</span>                    <span class="comment"># Otherwise <span class=<span class="string">"keyword"</span>>return</span> filename <span class=<span class="string">"keyword"</span>>for</span> simplified tracking</span>
</div>
<div class="line-context">
<span class="line-number">415</span>                    <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"tmp"</span> <span class=<span class="string">"keyword"</span>>in</span> <span class="function">str</span>(file_path):
</div>
<div class="line-context">
<span class="line-number">416</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">str</span>(file_path.<span class="function">resolve</span>())
</div>
<div class="line-context">
<span class="line-number">417</span>                    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">418</span>                        <span class=<span class="string">"keyword"</span>>return</span> file_path.name
</div>
<div class="line-context">
<span class="line-number">419</span>
</div>
<div class="line-context">
<span class="line-number">420</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">421</span>
</div>
<div class="line-context">
<span class="line-number">422</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_matches_pattern</span>(self, file_path: str, pattern: str) -> bool:
</div>
<div class="line-context">
<span class="line-number">423</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a file path matches a pattern"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">424</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">425</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">bool</span>(re.<span class="function">search</span>(pattern, file_path))
</div>
<div class="line-context">
<span class="line-number">426</span>        <span class=<span class="string">"keyword"</span>>except</span> re.error:
</div>
<div class="line-context">
<span class="line-number">427</span>            self.logger.<span class="function">warning</span>(<span class="string">"Invalid pattern <span class="string">'%s'</span> <span class="</span>keyword<span class="string">">for</span> file matching"</span>, pattern)
</div>
<div class="line-context">
<span class="line-number">428</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
</div>
<h4>Line 554</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">544</span>        aliases = {}
</div>
<div class="line-context">
<span class="line-number">545</span>        <span class=<span class="string">"keyword"</span>>for</span> name, alias_data <span class=<span class="string">"keyword"</span>>in</span> data.<span class="function">get</span>(<span class="string">"aliases"</span>, {}).<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number">546</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">isinstance</span>(alias_data, dict):
</div>
<div class="line-context">
<span class="line-number">547</span>                aliases[name] = <span class="function">Alias</span>(
</div>
<div class="line-context">
<span class="line-number">548</span>                    alias_data.<span class="function">get</span>(<span class="string">"name"</span>, name),
</div>
<div class="line-context">
<span class="line-number">549</span>                    alias_data.<span class="function">get</span>(<span class="string">"original_type"</span>, <span class="string">""</span>),
</div>
<div class="line-context">
<span class="line-number">550</span>                    alias_data.<span class="function">get</span>(<span class="string">"uses"</span>, []),
</div>
<div class="line-context">
<span class="line-number">551</span>                )
</div>
<div class="line-context">
<span class="line-number">552</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">553</span>                <span class="comment"># Handle legacy format where aliases was Dict[str, str]</span>
</div>
<div class="line-uncovered">
<span class="line-number">554</span>                aliases[name] = <span class="function">Alias</span>(name, alias_data, [])
</div>
<div class="line-context">
<span class="line-number">555</span>
</div>
<div class="line-context">
<span class="line-number">556</span>        <span class="comment"># Convert functions</span>
</div>
<div class="line-context">
<span class="line-number">557</span>        functions = []
</div>
<div class="line-context">
<span class="line-number">558</span>        <span class=<span class="string">"keyword"</span>>for</span> func_data <span class=<span class="string">"keyword"</span>>in</span> data.<span class="function">get</span>(<span class="string">"functions"</span>, []):
</div>
<div class="line-context">
<span class="line-number">559</span>            parameters = [
</div>
<div class="line-context">
<span class="line-number">560</span>                <span class="function">Field</span>(p[<span class="string">"name"</span>], p[<span class="string">"type"</span>]) <span class=<span class="string">"keyword"</span>>for</span> p <span class=<span class="string">"keyword"</span>>in</span> func_data.<span class="function">get</span>(<span class="string">"parameters"</span>, [])
</div>
<div class="line-context">
<span class="line-number">561</span>            ]
</div>
<div class="line-context">
<span class="line-number">562</span>            functions.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">563</span>                <span class="function">Function</span>(
</div>
<div class="line-context">
<span class="line-number">564</span>                    func_data[<span class="string">"name"</span>],
</div>
</div>
<h4>Lines 597-598</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">587</span>            includes=data.<span class="function">get</span>(<span class="string">"includes"</span>, []),
</div>
<div class="line-context">
<span class="line-number">588</span>            macros=data.<span class="function">get</span>(<span class="string">"macros"</span>, []),
</div>
<div class="line-context">
<span class="line-number">589</span>            aliases=aliases,
</div>
<div class="line-context">
<span class="line-number">590</span>        )
</div>
<div class="line-context">
<span class="line-number">591</span>
</div>
<div class="line-context">
<span class="line-number">592</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_save_model</span>(self, model: ProjectModel, output_file: str) -> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">593</span>        <span class="string">""</span><span class="string">"Save model to JSON file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">594</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">595</span>            model.<span class="function">save</span>(output_file)
</div>
<div class="line-context">
<span class="line-number">596</span>            self.logger.<span class="function">debug</span>(<span class="string">"Model saved to: %s"</span>, output_file)
</div>
<div class="line-uncovered">
<span class="line-number">597</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">598</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Failed to save model to {output_file}: {e}"</span>) <span class=<span class="string">"keyword"</span>>from</span> e
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/parser.py
<span class="coverage-info">87.39% (617/706 lines covered)</span>
</div>
<h4>Lines 21-22</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 11</span>    CTokenizer,
</div>
<div class="line-context">
<span class="line-number"> 12</span>    StructureFinder,
</div>
<div class="line-context">
<span class="line-number"> 13</span>    TokenType,
</div>
<div class="line-context">
<span class="line-number"> 14</span>    find_enum_values,
</div>
<div class="line-context">
<span class="line-number"> 15</span>    find_struct_fields,
</div>
<div class="line-context">
<span class="line-number"> 16</span>)
</div>
<div class="line-context">
<span class="line-number"> 17</span><span class=<span class="string">"keyword"</span>>from</span> .preprocessor <span class=<span class="string">"keyword"</span>>import</span> PreprocessorManager
</div>
<div class="line-context">
<span class="line-number"> 18</span><span class=<span class="string">"keyword"</span>>from</span> .utils <span class=<span class="string">"keyword"</span>>import</span> detect_file_encoding
</div>
<div class="line-context">
<span class="line-number"> 19</span>
</div>
<div class="line-context">
<span class="line-number"> 20</span><span class=<span class="string">"keyword"</span>>if</span> TYPE_CHECKING:
</div>
<div class="line-uncovered">
<span class="line-number"> 21</span>    <span class=<span class="string">"keyword"</span>>from</span> .models <span class=<span class="string">"keyword"</span>>import</span> Struct, Enum, Union, Function, Field, Alias
</div>
<div class="line-uncovered">
<span class="line-number"> 22</span>    <span class=<span class="string">"keyword"</span>>from</span> .config <span class=<span class="string">"keyword"</span>>import</span> Config
</div>
<div class="line-context">
<span class="line-number"> 23</span>
</div>
<div class="line-context">
<span class="line-number"> 24</span>
</div>
<div class="line-context">
<span class="line-number"> 25</span><span class=<span class="string">"keyword"</span>>class</span> CParser:
</div>
<div class="line-context">
<span class="line-number"> 26</span>    <span class="string">""</span><span class="string">"C/C++ parser <span class="</span>keyword<span class="string">">for</span> extracting structural information <span class="</span>keyword<span class="string">">from</span> source code using tokenization"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 27</span>
</div>
<div class="line-context">
<span class="line-number"> 28</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 29</span>        self.logger = logging.<span class="function">getLogger</span>(__name__)
</div>
<div class="line-context">
<span class="line-number"> 30</span>        self.tokenizer = <span class="function">CTokenizer</span>()
</div>
<div class="line-context">
<span class="line-number"> 31</span>        self.preprocessor = <span class="function">PreprocessorManager</span>()
</div>
<div class="line-context">
<span class="line-number"> 32</span>        <span class="comment"># Cache <span class=<span class="string">"keyword"</span>>for</span> failed include searches to avoid repeated lookups</span>
</div>
</div>
<h4>Line 45</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 35</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">parse_project</span>(
</div>
<div class="line-context">
<span class="line-number"> 36</span>        self, project_root: str, recursive_search: bool = <span class=<span class="string">"keyword"</span>>True</span>, config: <span class="string">"Config"</span> = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number"> 37</span>    ) -> ProjectModel:
</div>
<div class="line-context">
<span class="line-number"> 38</span>        <span class="string">""</span><span class="string">"Parse a C/C++ project <span class="</span>keyword<span class="string">">and</span> <span class="</span>keyword<span class="string">">return</span> a model"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 39</span>        project_root = <span class="function">Path</span>(project_root).<span class="function">resolve</span>()
</div>
<div class="line-context">
<span class="line-number"> 40</span>
</div>
<div class="line-context">
<span class="line-number"> 41</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> project_root.<span class="function">exists</span>():
</div>
<div class="line-context">
<span class="line-number"> 42</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Project root <span class="</span>keyword<span class="string">">not</span> found: {project_root}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 43</span>
</div>
<div class="line-context">
<span class="line-number"> 44</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> project_root.<span class="function">is_dir</span>():
</div>
<div class="line-uncovered">
<span class="line-number"> 45</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Project root must be a directory: {project_root}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 46</span>
</div>
<div class="line-context">
<span class="line-number"> 47</span>        <span class="comment"># Clear the failed includes cache <span class=<span class="string">"keyword"</span>>for</span> this new project</span>
</div>
<div class="line-context">
<span class="line-number"> 48</span>        cache_size_before = <span class="function">len</span>(self._failed_includes_cache)
</div>
<div class="line-context">
<span class="line-number"> 49</span>        self._failed_includes_cache.<span class="function">clear</span>()
</div>
<div class="line-context">
<span class="line-number"> 50</span>        <span class=<span class="string">"keyword"</span>>if</span> cache_size_before > <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number"> 51</span>            self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number"> 52</span>                <span class="string">"Cleared failed includes <span class="function">cache</span>(%d entries)"</span>, cache_size_before
</div>
<div class="line-context">
<span class="line-number"> 53</span>            )
</div>
<div class="line-context">
<span class="line-number"> 54</span>
</div>
<div class="line-context">
<span class="line-number"> 55</span>        self.logger.<span class="function">info</span>(<span class="string">"Parsing project: %s"</span>, project_root)
</div>
</div>
<h4>Line 51</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 41</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> project_root.<span class="function">exists</span>():
</div>
<div class="line-context">
<span class="line-number"> 42</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Project root <span class="</span>keyword<span class="string">">not</span> found: {project_root}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 43</span>
</div>
<div class="line-context">
<span class="line-number"> 44</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> project_root.<span class="function">is_dir</span>():
</div>
<div class="line-context">
<span class="line-number"> 45</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(f<span class="string">"Project root must be a directory: {project_root}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 46</span>
</div>
<div class="line-context">
<span class="line-number"> 47</span>        <span class="comment"># Clear the failed includes cache <span class=<span class="string">"keyword"</span>>for</span> this new project</span>
</div>
<div class="line-context">
<span class="line-number"> 48</span>        cache_size_before = <span class="function">len</span>(self._failed_includes_cache)
</div>
<div class="line-context">
<span class="line-number"> 49</span>        self._failed_includes_cache.<span class="function">clear</span>()
</div>
<div class="line-context">
<span class="line-number"> 50</span>        <span class=<span class="string">"keyword"</span>>if</span> cache_size_before > <span class="number">0</span>:
</div>
<div class="line-uncovered">
<span class="line-number"> 51</span>            self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number"> 52</span>                <span class="string">"Cleared failed includes <span class="function">cache</span>(%d entries)"</span>, cache_size_before
</div>
<div class="line-context">
<span class="line-number"> 53</span>            )
</div>
<div class="line-context">
<span class="line-number"> 54</span>
</div>
<div class="line-context">
<span class="line-number"> 55</span>        self.logger.<span class="function">info</span>(<span class="string">"Parsing project: %s"</span>, project_root)
</div>
<div class="line-context">
<span class="line-number"> 56</span>
</div>
<div class="line-context">
<span class="line-number"> 57</span>        <span class="comment"># Find C/C++ files based on configuration <span class=<span class="string">"keyword"</span>>and</span> include dependencies</span>
</div>
<div class="line-context">
<span class="line-number"> 58</span>        <span class=<span class="string">"keyword"</span>>if</span> config:
</div>
<div class="line-context">
<span class="line-number"> 59</span>            c_files = self.<span class="function">_find_files_with_include_dependencies</span>(
</div>
<div class="line-context">
<span class="line-number"> 60</span>                project_root, recursive_search, config
</div>
<div class="line-context">
<span class="line-number"> 61</span>            )
</div>
</div>
<h4>Lines 82-84</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 72</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 73</span>                <span class="comment"># Use relative path <span class=<span class="string">"keyword"</span>>as</span> key <span class=<span class="string">"keyword"</span>>for</span> better tracking of subdirectories</span>
</div>
<div class="line-context">
<span class="line-number"> 74</span>                relative_path = <span class="function">str</span>(file_path.<span class="function">relative_to</span>(project_root))
</div>
<div class="line-context">
<span class="line-number"> 75</span>                file_model = self.<span class="function">parse_file</span>(
</div>
<div class="line-context">
<span class="line-number"> 76</span>                    file_path, relative_path, <span class="function">str</span>(project_root)
</div>
<div class="line-context">
<span class="line-number"> 77</span>                )
</div>
<div class="line-context">
<span class="line-number"> 78</span>                files[relative_path] = file_model
</div>
<div class="line-context">
<span class="line-number"> 79</span>
</div>
<div class="line-context">
<span class="line-number"> 80</span>                self.logger.<span class="function">debug</span>(<span class="string">"Successfully parsed: %s"</span>, relative_path)
</div>
<div class="line-context">
<span class="line-number"> 81</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 82</span>            <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number"> 83</span>                self.logger.<span class="function">warning</span>(<span class="string">"Failed to parse %s: %s"</span>, file_path, e)
</div>
<div class="line-uncovered">
<span class="line-number"> 84</span>                failed_files.<span class="function">append</span>(<span class="function">str</span>(file_path))
</div>
<div class="line-context">
<span class="line-number"> 85</span>
</div>
<div class="line-context">
<span class="line-number"> 86</span>        <span class=<span class="string">"keyword"</span>>if</span> failed_files:
</div>
<div class="line-context">
<span class="line-number"> 87</span>            error_msg = (
</div>
<div class="line-context">
<span class="line-number"> 88</span>                f<span class="string">"Failed to parse {<span class="function">len</span>(failed_files)} files: {failed_files}. "</span>
</div>
<div class="line-context">
<span class="line-number"> 89</span>                <span class="string">"Stopping model processing."</span>
</div>
<div class="line-context">
<span class="line-number"> 90</span>            )
</div>
<div class="line-context">
<span class="line-number"> 91</span>            self.logger.<span class="function">error</span>(error_msg)
</div>
<div class="line-context">
<span class="line-number"> 92</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">RuntimeError</span>(error_msg)
</div>
<div class="line-context">
<span class="line-number"> 93</span>
</div>
<div class="line-context">
<span class="line-number"> 94</span>        model = <span class="function">ProjectModel</span>(
</div>
</div>
<h4>Line 87</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 77</span>                )
</div>
<div class="line-context">
<span class="line-number"> 78</span>                files[relative_path] = file_model
</div>
<div class="line-context">
<span class="line-number"> 79</span>
</div>
<div class="line-context">
<span class="line-number"> 80</span>                self.logger.<span class="function">debug</span>(<span class="string">"Successfully parsed: %s"</span>, relative_path)
</div>
<div class="line-context">
<span class="line-number"> 81</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>            <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number"> 83</span>                self.logger.<span class="function">warning</span>(<span class="string">"Failed to parse %s: %s"</span>, file_path, e)
</div>
<div class="line-context">
<span class="line-number"> 84</span>                failed_files.<span class="function">append</span>(<span class="function">str</span>(file_path))
</div>
<div class="line-context">
<span class="line-number"> 85</span>
</div>
<div class="line-context">
<span class="line-number"> 86</span>        <span class=<span class="string">"keyword"</span>>if</span> failed_files:
</div>
<div class="line-uncovered">
<span class="line-number"> 87</span>            error_msg = (
</div>
<div class="line-context">
<span class="line-number"> 88</span>                f<span class="string">"Failed to parse {<span class="function">len</span>(failed_files)} files: {failed_files}. "</span>
</div>
<div class="line-context">
<span class="line-number"> 89</span>                <span class="string">"Stopping model processing."</span>
</div>
<div class="line-context">
<span class="line-number"> 90</span>            )
</div>
<div class="line-context">
<span class="line-number"> 91</span>            self.logger.<span class="function">error</span>(error_msg)
</div>
<div class="line-context">
<span class="line-number"> 92</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">RuntimeError</span>(error_msg)
</div>
<div class="line-context">
<span class="line-number"> 93</span>
</div>
<div class="line-context">
<span class="line-number"> 94</span>        model = <span class="function">ProjectModel</span>(
</div>
<div class="line-context">
<span class="line-number"> 95</span>            project_name=project_root.name,
</div>
<div class="line-context">
<span class="line-number"> 96</span>            project_root=<span class="function">str</span>(project_root),
</div>
<div class="line-context">
<span class="line-number"> 97</span>            files=files,
</div>
</div>
<h4>Lines 91-92</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 81</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>            <span class=<span class="string">"keyword"</span>>except</span> (OSError, ValueError) <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number"> 83</span>                self.logger.<span class="function">warning</span>(<span class="string">"Failed to parse %s: %s"</span>, file_path, e)
</div>
<div class="line-context">
<span class="line-number"> 84</span>                failed_files.<span class="function">append</span>(<span class="function">str</span>(file_path))
</div>
<div class="line-context">
<span class="line-number"> 85</span>
</div>
<div class="line-context">
<span class="line-number"> 86</span>        <span class=<span class="string">"keyword"</span>>if</span> failed_files:
</div>
<div class="line-context">
<span class="line-number"> 87</span>            error_msg = (
</div>
<div class="line-context">
<span class="line-number"> 88</span>                f<span class="string">"Failed to parse {<span class="function">len</span>(failed_files)} files: {failed_files}. "</span>
</div>
<div class="line-context">
<span class="line-number"> 89</span>                <span class="string">"Stopping model processing."</span>
</div>
<div class="line-context">
<span class="line-number"> 90</span>            )
</div>
<div class="line-uncovered">
<span class="line-number"> 91</span>            self.logger.<span class="function">error</span>(error_msg)
</div>
<div class="line-uncovered">
<span class="line-number"> 92</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">RuntimeError</span>(error_msg)
</div>
<div class="line-context">
<span class="line-number"> 93</span>
</div>
<div class="line-context">
<span class="line-number"> 94</span>        model = <span class="function">ProjectModel</span>(
</div>
<div class="line-context">
<span class="line-number"> 95</span>            project_name=project_root.name,
</div>
<div class="line-context">
<span class="line-number"> 96</span>            project_root=<span class="function">str</span>(project_root),
</div>
<div class="line-context">
<span class="line-number"> 97</span>            files=files,
</div>
<div class="line-context">
<span class="line-number"> 98</span>        )
</div>
<div class="line-context">
<span class="line-number"> 99</span>
</div>
<div class="line-context">
<span class="line-number">100</span>        <span class="comment"># Update all uses fields across the entire project</span>
</div>
<div class="line-context">
<span class="line-number">101</span>        model.<span class="function">update_uses_fields</span>()
</div>
<div class="line-context">
<span class="line-number">102</span>
</div>
</div>
<h4>Lines 206-207</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">196</span>
</div>
<div class="line-context">
<span class="line-number">197</span>            <span class=<span class="string">"keyword"</span>>if</span> original_start <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>None</span> <span class=<span class="string">"keyword"</span>>and</span> original_end <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">198</span>                <span class="comment"># Extract field information <span class=<span class="string">"keyword"</span>>from</span> original token range</span>
</div>
<div class="line-context">
<span class="line-number">199</span>                field_tuples = <span class="function">find_struct_fields</span>(tokens, original_start, original_end)
</div>
<div class="line-context">
<span class="line-number">200</span>
</div>
<div class="line-context">
<span class="line-number">201</span>                <span class="comment"># Convert to Field objects</span>
</div>
<div class="line-context">
<span class="line-number">202</span>                fields = []
</div>
<div class="line-context">
<span class="line-number">203</span>                <span class=<span class="string">"keyword"</span>>for</span> field_name, field_type <span class=<span class="string">"keyword"</span>>in</span> field_tuples:
</div>
<div class="line-context">
<span class="line-number">204</span>                    <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">205</span>                        fields.<span class="function">append</span>(<span class="function">Field</span>(field_name, field_type))
</div>
<div class="line-uncovered">
<span class="line-number">206</span>                    <span class=<span class="string">"keyword"</span>>except</span> ValueError <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">207</span>                        self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">208</span>                            <span class="string">"Error creating field %s: %s"</span>, field_name, e
</div>
<div class="line-context">
<span class="line-number">209</span>                        )
</div>
<div class="line-context">
<span class="line-number">210</span>
</div>
<div class="line-context">
<span class="line-number">211</span>                <span class="comment"># For anonymous structs, use a special key that can be mapped later</span>
</div>
<div class="line-context">
<span class="line-number">212</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> struct_name:
</div>
<div class="line-context">
<span class="line-number">213</span>                    struct_name = <span class="string">"__anonymous_struct__"</span>
</div>
<div class="line-context">
<span class="line-number">214</span>
</div>
<div class="line-context">
<span class="line-number">215</span>                <span class="comment"># Extract tag name <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a typedef struct</span>
</div>
<div class="line-context">
<span class="line-number">216</span>                tag_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">217</span>                <span class=<span class="string">"keyword"</span>>if</span> struct_name <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> struct_name.<span class="function">startswith</span>(<span class="string">"__anonymous"</span>):
</div>
</div>
<h4>Lines 306-307</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">296</span>
</div>
<div class="line-context">
<span class="line-number">297</span>            <span class=<span class="string">"keyword"</span>>if</span> original_start <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>None</span> <span class=<span class="string">"keyword"</span>>and</span> original_end <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">298</span>                <span class="comment"># Extract field information <span class=<span class="string">"keyword"</span>>from</span> original token range</span>
</div>
<div class="line-context">
<span class="line-number">299</span>                field_tuples = <span class="function">find_struct_fields</span>(tokens, original_start, original_end)
</div>
<div class="line-context">
<span class="line-number">300</span>
</div>
<div class="line-context">
<span class="line-number">301</span>                <span class="comment"># Convert to Field objects</span>
</div>
<div class="line-context">
<span class="line-number">302</span>                fields = []
</div>
<div class="line-context">
<span class="line-number">303</span>                <span class=<span class="string">"keyword"</span>>for</span> field_name, field_type <span class=<span class="string">"keyword"</span>>in</span> field_tuples:
</div>
<div class="line-context">
<span class="line-number">304</span>                    <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">305</span>                        fields.<span class="function">append</span>(<span class="function">Field</span>(field_name, field_type))
</div>
<div class="line-uncovered">
<span class="line-number">306</span>                    <span class=<span class="string">"keyword"</span>>except</span> ValueError <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">307</span>                        self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">308</span>                            <span class="string">"Error creating union field %s: %s"</span>, field_name, e
</div>
<div class="line-context">
<span class="line-number">309</span>                        )
</div>
<div class="line-context">
<span class="line-number">310</span>
</div>
<div class="line-context">
<span class="line-number">311</span>                <span class="comment"># For anonymous unions, use a special key that can be mapped later</span>
</div>
<div class="line-context">
<span class="line-number">312</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> union_name:
</div>
<div class="line-context">
<span class="line-number">313</span>                    union_name = <span class="string">"__anonymous_union__"</span>
</div>
<div class="line-context">
<span class="line-number">314</span>
</div>
<div class="line-context">
<span class="line-number">315</span>                <span class="comment"># Extract tag name <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a typedef union</span>
</div>
<div class="line-context">
<span class="line-number">316</span>                tag_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">317</span>                <span class=<span class="string">"keyword"</span>>if</span> union_name <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> union_name.<span class="function">startswith</span>(<span class="string">"__anonymous"</span>):
</div>
</div>
<h4>Line 313</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">303</span>                <span class=<span class="string">"keyword"</span>>for</span> field_name, field_type <span class=<span class="string">"keyword"</span>>in</span> field_tuples:
</div>
<div class="line-context">
<span class="line-number">304</span>                    <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">305</span>                        fields.<span class="function">append</span>(<span class="function">Field</span>(field_name, field_type))
</div>
<div class="line-context">
<span class="line-number">306</span>                    <span class=<span class="string">"keyword"</span>>except</span> ValueError <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">307</span>                        self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">308</span>                            <span class="string">"Error creating union field %s: %s"</span>, field_name, e
</div>
<div class="line-context">
<span class="line-number">309</span>                        )
</div>
<div class="line-context">
<span class="line-number">310</span>
</div>
<div class="line-context">
<span class="line-number">311</span>                <span class="comment"># For anonymous unions, use a special key that can be mapped later</span>
</div>
<div class="line-context">
<span class="line-number">312</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> union_name:
</div>
<div class="line-uncovered">
<span class="line-number">313</span>                    union_name = <span class="string">"__anonymous_union__"</span>
</div>
<div class="line-context">
<span class="line-number">314</span>
</div>
<div class="line-context">
<span class="line-number">315</span>                <span class="comment"># Extract tag name <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a typedef union</span>
</div>
<div class="line-context">
<span class="line-number">316</span>                tag_name = <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">317</span>                <span class=<span class="string">"keyword"</span>>if</span> union_name <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> union_name.<span class="function">startswith</span>(<span class="string">"__anonymous"</span>):
</div>
<div class="line-context">
<span class="line-number">318</span>                    <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> this union has a typedef</span>
</div>
<div class="line-context">
<span class="line-number">319</span>                    tag_name = self.<span class="function">_extract_tag_name_for_union</span>(tokens, union_name)
</div>
<div class="line-context">
<span class="line-number">320</span>
</div>
<div class="line-context">
<span class="line-number">321</span>                unions[union_name] = <span class="function">Union</span>(
</div>
<div class="line-context">
<span class="line-number">322</span>                    union_name, fields, tag_name=tag_name, uses=[]
</div>
<div class="line-context">
<span class="line-number">323</span>                )
</div>
</div>
<h4>Lines 370-371</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">360</span>
</div>
<div class="line-context">
<span class="line-number">361</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">362</span>                <span class="comment"># Create function <span class=<span class="string">"keyword"</span>>with</span> declaration flag</span>
</div>
<div class="line-context">
<span class="line-number">363</span>                function = <span class="function">Function</span>(func_name, return_type, parameters)
</div>
<div class="line-context">
<span class="line-number">364</span>                <span class="comment"># Add a custom attribute to track <span class=<span class="string">"keyword"</span>>if</span> this <span class=<span class="string">"keyword"</span>>is</span> a declaration</span>
</div>
<div class="line-context">
<span class="line-number">365</span>                function.is_declaration = is_declaration
</div>
<div class="line-context">
<span class="line-number">366</span>                functions.<span class="function">append</span>(function)
</div>
<div class="line-context">
<span class="line-number">367</span>                self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">368</span>                    f<span class="string">"Parsed function: {func_name} <span class="</span>keyword<span class="string">">with</span> {<span class="function">len</span>(parameters)} <span class="function">parameters</span>(declaration: {is_declaration})"</span>
</div>
<div class="line-context">
<span class="line-number">369</span>                )
</div>
<div class="line-uncovered">
<span class="line-number">370</span>            <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">371</span>                self.logger.<span class="function">warning</span>(<span class="string">"Error creating function %s: %s"</span>, func_name, e)
</div>
<div class="line-context">
<span class="line-number">372</span>
</div>
<div class="line-context">
<span class="line-number">373</span>        <span class=<span class="string">"keyword"</span>>return</span> functions
</div>
<div class="line-context">
<span class="line-number">374</span>
</div>
<div class="line-context">
<span class="line-number">375</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_globals_with_tokenizer</span>(self, tokens) -> List[<span class="string">"Field"</span>]:
</div>
<div class="line-context">
<span class="line-number">376</span>        <span class="string">""</span><span class="string">"Parse <span class="</span>keyword<span class="string">">global</span> variables using tokenizer"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">377</span>        <span class=<span class="string">"keyword"</span>>from</span> .models <span class=<span class="string">"keyword"</span>>import</span> Field
</div>
<div class="line-context">
<span class="line-number">378</span>
</div>
<div class="line-context">
<span class="line-number">379</span>        globals_list = []
</div>
<div class="line-context">
<span class="line-number">380</span>
</div>
<div class="line-context">
<span class="line-number">381</span>        i = <span class="number">0</span>
</div>
</div>
<h4>Lines 396-397</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">386</span>                TokenType.DEFINE,
</div>
<div class="line-context">
<span class="line-number">387</span>                TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">388</span>                TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">389</span>                TokenType.NEWLINE,
</div>
<div class="line-context">
<span class="line-number">390</span>            ]:
</div>
<div class="line-context">
<span class="line-number">391</span>                i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">392</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">393</span>
</div>
<div class="line-context">
<span class="line-number">394</span>            <span class="comment"># Skip preprocessor directives but keep their content</span>
</div>
<div class="line-context">
<span class="line-number">395</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type == TokenType.PREPROCESSOR:
</div>
<div class="line-uncovered">
<span class="line-number">396</span>                i = self.<span class="function">_skip_preprocessor_directives</span>(tokens, i)
</div>
<div class="line-uncovered">
<span class="line-number">397</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">398</span>
</div>
<div class="line-context">
<span class="line-number">399</span>            <span class="comment"># Skip function <span class="function">definitions</span>(look <span class=<span class="string">"keyword"</span>>for</span> parentheses)</span>
</div>
<div class="line-context">
<span class="line-number">400</span>            <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_looks_like_function</span>(tokens, i):
</div>
<div class="line-context">
<span class="line-number">401</span>                i = self.<span class="function">_skip_function</span>(tokens, i)
</div>
<div class="line-context">
<span class="line-number">402</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">403</span>
</div>
<div class="line-context">
<span class="line-number">404</span>            <span class="comment"># Skip struct/enum/union definitions</span>
</div>
<div class="line-context">
<span class="line-number">405</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">406</span>                TokenType.STRUCT,
</div>
<div class="line-context">
<span class="line-number">407</span>                TokenType.ENUM,
</div>
</div>
<h4>Lines 417-426</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">407</span>                TokenType.ENUM,
</div>
<div class="line-context">
<span class="line-number">408</span>                TokenType.UNION,
</div>
<div class="line-context">
<span class="line-number">409</span>                TokenType.TYPEDEF,
</div>
<div class="line-context">
<span class="line-number">410</span>            ]:
</div>
<div class="line-context">
<span class="line-number">411</span>                i = self.<span class="function">_skip_structure_definition</span>(tokens, i)
</div>
<div class="line-context">
<span class="line-number">412</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">413</span>
</div>
<div class="line-context">
<span class="line-number">414</span>            <span class="comment"># Skip <span class=<span class="string">"keyword"</span>>if</span> we're inside a struct <span class="function">definition</span>(look <span class=<span class="string">"keyword"</span>>for</span> opening brace)</span>
</div>
<div class="line-context">
<span class="line-number">415</span>            <span class=<span class="string">"keyword"</span>>if</span> i > <span class="number">0</span> <span class=<span class="string">"keyword"</span>>and</span> tokens[i - <span class="number">1</span>].type == TokenType.LBRACE:
</div>
<div class="line-context">
<span class="line-number">416</span>                <span class="comment"># We're inside a struct, skip until closing brace</span>
</div>
<div class="line-uncovered">
<span class="line-number">417</span>                brace_count = <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">418</span>                j = i
</div>
<div class="line-uncovered">
<span class="line-number">419</span>                <span class=<span class="string">"keyword"</span>>while</span> j < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> brace_count > <span class="number">0</span>:
</div>
<div class="line-uncovered">
<span class="line-number">420</span>                    <span class=<span class="string">"keyword"</span>>if</span> tokens[j].type == TokenType.LBRACE:
</div>
<div class="line-uncovered">
<span class="line-number">421</span>                        brace_count += <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">422</span>                    <span class=<span class="string">"keyword"</span>>elif</span> tokens[j].type == TokenType.RBRACE:
</div>
<div class="line-uncovered">
<span class="line-number">423</span>                        brace_count -= <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">424</span>                    j += <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">425</span>                i = j
</div>
<div class="line-uncovered">
<span class="line-number">426</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">427</span>
</div>
<div class="line-context">
<span class="line-number">428</span>            <span class="comment"># Skip macros <span class=<span class="string">"keyword"</span>>and</span> other preprocessor content</span>
</div>
<div class="line-context">
<span class="line-number">429</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type == TokenType.DEFINE:
</div>
<div class="line-context">
<span class="line-number">430</span>                <span class="comment"># Skip the entire macro <span class="function">content</span>(multi-line macros are now merged)</span>
</div>
<div class="line-context">
<span class="line-number">431</span>                i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">432</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">433</span>
</div>
<div class="line-context">
<span class="line-number">434</span>            <span class="comment"># Additional check: skip <span class=<span class="string">"keyword"</span>>if</span> we're inside any brace <span class="function">block</span>(struct, function, etc.)</span>
</div>
<div class="line-context">
<span class="line-number">435</span>            brace_count = <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">436</span>            j = i - <span class="number">1</span>
</div>
</div>
<h4>Lines 431-432</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">421</span>                        brace_count += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">422</span>                    <span class=<span class="string">"keyword"</span>>elif</span> tokens[j].type == TokenType.RBRACE:
</div>
<div class="line-context">
<span class="line-number">423</span>                        brace_count -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">424</span>                    j += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">425</span>                i = j
</div>
<div class="line-context">
<span class="line-number">426</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">427</span>
</div>
<div class="line-context">
<span class="line-number">428</span>            <span class="comment"># Skip macros <span class=<span class="string">"keyword"</span>>and</span> other preprocessor content</span>
</div>
<div class="line-context">
<span class="line-number">429</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type == TokenType.DEFINE:
</div>
<div class="line-context">
<span class="line-number">430</span>                <span class="comment"># Skip the entire macro <span class="function">content</span>(multi-line macros are now merged)</span>
</div>
<div class="line-uncovered">
<span class="line-number">431</span>                i += <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">432</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">433</span>
</div>
<div class="line-context">
<span class="line-number">434</span>            <span class="comment"># Additional check: skip <span class=<span class="string">"keyword"</span>>if</span> we're inside any brace <span class="function">block</span>(struct, function, etc.)</span>
</div>
<div class="line-context">
<span class="line-number">435</span>            brace_count = <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">436</span>            j = i - <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">437</span>            <span class=<span class="string">"keyword"</span>>while</span> j >= <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">438</span>                <span class=<span class="string">"keyword"</span>>if</span> tokens[j].type == TokenType.RBRACE:
</div>
<div class="line-context">
<span class="line-number">439</span>                    brace_count += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">440</span>                <span class=<span class="string">"keyword"</span>>elif</span> tokens[j].type == TokenType.LBRACE:
</div>
<div class="line-context">
<span class="line-number">441</span>                    brace_count -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">442</span>                    <span class=<span class="string">"keyword"</span>>if</span> brace_count < <span class="number">0</span>:
</div>
</div>
<h4>Lines 480-481</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">470</span>                                globals_list.<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">471</span>                                    <span class="function">Field</span>(
</div>
<div class="line-context">
<span class="line-number">472</span>                                        name=stripped_name,
</div>
<div class="line-context">
<span class="line-number">473</span>                                        type=stripped_type,
</div>
<div class="line-context">
<span class="line-number">474</span>                                        value=var_value,
</div>
<div class="line-context">
<span class="line-number">475</span>                                    )
</div>
<div class="line-context">
<span class="line-number">476</span>                                )
</div>
<div class="line-context">
<span class="line-number">477</span>                                self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">478</span>                                    f<span class="string">"Parsed <span class="</span>keyword<span class="string">">global</span>: {stripped_name} : {stripped_type}"</span>
</div>
<div class="line-context">
<span class="line-number">479</span>                                )
</div>
<div class="line-uncovered">
<span class="line-number">480</span>                        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">481</span>                            self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">482</span>                                f<span class="string">"Error creating <span class="</span>keyword<span class="string">">global</span> field {var_name}: {e}"</span>
</div>
<div class="line-context">
<span class="line-number">483</span>                            )
</div>
<div class="line-context">
<span class="line-number">484</span>                    i = self.<span class="function">_skip_to_semicolon</span>(tokens, i)
</div>
<div class="line-context">
<span class="line-number">485</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">486</span>                    i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">487</span>
</div>
<div class="line-context">
<span class="line-number">488</span>        <span class=<span class="string">"keyword"</span>>return</span> globals_list
</div>
<div class="line-context">
<span class="line-number">489</span>
</div>
<div class="line-context">
<span class="line-number">490</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_includes_with_tokenizer</span>(self, tokens) -> List[str]:
</div>
<div class="line-context">
<span class="line-number">491</span>        <span class="string">""</span><span class="string">"Parse <span class="comment">#include directives using tokenizer"</span><span class="string">""</span></span>
</div>
</div>
<h4>Line 609</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">599</span>                        <span class="comment"># Extract the tag name <span class=<span class="string">"keyword"</span>>from</span> the typedef</span>
</div>
<div class="line-context">
<span class="line-number">600</span>                        <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">_extract_tag_name_from_typedef</span>(tokens, i)
</div>
<div class="line-context">
<span class="line-number">601</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">602</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">603</span>
</div>
<div class="line-context">
<span class="line-number">604</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_extract_non_primitive_types</span>(
</div>
<div class="line-context">
<span class="line-number">605</span>        self, type_str: str, available_types: Set[str]
</div>
<div class="line-context">
<span class="line-number">606</span>    ) -> List[str]:
</div>
<div class="line-context">
<span class="line-number">607</span>        <span class="string">""</span><span class="string">"Extract non-primitive type names <span class="</span>keyword<span class="string">">from</span> a type string that exist <span class="</span>keyword<span class="string">">in</span> available_types"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">608</span>        <span class="comment"># Define primitive types</span>
</div>
<div class="line-uncovered">
<span class="line-number">609</span>        primitive_types = {
</div>
<div class="line-context">
<span class="line-number">610</span>            <span class="string">"void"</span>,
</div>
<div class="line-context">
<span class="line-number">611</span>            <span class="string">"char"</span>,
</div>
<div class="line-context">
<span class="line-number">612</span>            <span class="string">"short"</span>,
</div>
<div class="line-context">
<span class="line-number">613</span>            <span class="string">"int"</span>,
</div>
<div class="line-context">
<span class="line-number">614</span>            <span class="string">"long"</span>,
</div>
<div class="line-context">
<span class="line-number">615</span>            <span class="string">"float"</span>,
</div>
<div class="line-context">
<span class="line-number">616</span>            <span class="string">"double"</span>,
</div>
<div class="line-context">
<span class="line-number">617</span>            <span class="string">"signed"</span>,
</div>
<div class="line-context">
<span class="line-number">618</span>            <span class="string">"unsigned"</span>,
</div>
<div class="line-context">
<span class="line-number">619</span>            <span class="string">"const"</span>,
</div>
</div>
<h4>Line 647</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">637</span>            <span class="string">"intptr_t"</span>,
</div>
<div class="line-context">
<span class="line-number">638</span>            <span class="string">"uintptr_t"</span>,
</div>
<div class="line-context">
<span class="line-number">639</span>            <span class="string">"bool"</span>,
</div>
<div class="line-context">
<span class="line-number">640</span>            <span class="string">"true"</span>,
</div>
<div class="line-context">
<span class="line-number">641</span>            <span class="string">"false"</span>,
</div>
<div class="line-context">
<span class="line-number">642</span>            <span class="string">"NULL"</span>,
</div>
<div class="line-context">
<span class="line-number">643</span>            <span class="string">"nullptr"</span>,
</div>
<div class="line-context">
<span class="line-number">644</span>        }
</div>
<div class="line-context">
<span class="line-number">645</span>
</div>
<div class="line-context">
<span class="line-number">646</span>        <span class="comment"># Remove common C keywords <span class=<span class="string">"keyword"</span>>and</span> operators</span>
</div>
<div class="line-uncovered">
<span class="line-number">647</span>        <span class=<span class="string">"keyword"</span>>import</span> re
</div>
<div class="line-context">
<span class="line-number">648</span>
</div>
<div class="line-context">
<span class="line-number">649</span>        <span class="comment"># Split by common delimiters <span class=<span class="string">"keyword"</span>>and</span> operators</span>
</div>
<div class="line-context">
<span class="line-number">650</span>        parts = re.<span class="function">split</span>(r<span class="string">"[\[\]\(\)\{\}\s\*&,;]"</span>, type_str)
</div>
<div class="line-context">
<span class="line-number">651</span>
</div>
<div class="line-context">
<span class="line-number">652</span>        <span class="comment"># Extract potential type names that exist <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-context">
<span class="line-number">653</span>        types = []
</div>
<div class="line-context">
<span class="line-number">654</span>        <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts:
</div>
<div class="line-context">
<span class="line-number">655</span>            part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">656</span>            <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> <span class="function">len</span>(part) > <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> part <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> primitive_types:
</div>
<div class="line-context">
<span class="line-number">657</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it looks like a type <span class="function">name</span>(starts <span class=<span class="string">"keyword"</span>>with</span> letter, contains letters/numbers/underscores)</span>
</div>
</div>
<h4>Line 650</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">640</span>            <span class="string">"true"</span>,
</div>
<div class="line-context">
<span class="line-number">641</span>            <span class="string">"false"</span>,
</div>
<div class="line-context">
<span class="line-number">642</span>            <span class="string">"NULL"</span>,
</div>
<div class="line-context">
<span class="line-number">643</span>            <span class="string">"nullptr"</span>,
</div>
<div class="line-context">
<span class="line-number">644</span>        }
</div>
<div class="line-context">
<span class="line-number">645</span>
</div>
<div class="line-context">
<span class="line-number">646</span>        <span class="comment"># Remove common C keywords <span class=<span class="string">"keyword"</span>>and</span> operators</span>
</div>
<div class="line-context">
<span class="line-number">647</span>        <span class=<span class="string">"keyword"</span>>import</span> re
</div>
<div class="line-context">
<span class="line-number">648</span>
</div>
<div class="line-context">
<span class="line-number">649</span>        <span class="comment"># Split by common delimiters <span class=<span class="string">"keyword"</span>>and</span> operators</span>
</div>
<div class="line-uncovered">
<span class="line-number">650</span>        parts = re.<span class="function">split</span>(r<span class="string">"[\[\]\(\)\{\}\s\*&,;]"</span>, type_str)
</div>
<div class="line-context">
<span class="line-number">651</span>
</div>
<div class="line-context">
<span class="line-number">652</span>        <span class="comment"># Extract potential type names that exist <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-context">
<span class="line-number">653</span>        types = []
</div>
<div class="line-context">
<span class="line-number">654</span>        <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts:
</div>
<div class="line-context">
<span class="line-number">655</span>            part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">656</span>            <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> <span class="function">len</span>(part) > <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> part <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> primitive_types:
</div>
<div class="line-context">
<span class="line-number">657</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it looks like a type <span class="function">name</span>(starts <span class=<span class="string">"keyword"</span>>with</span> letter, contains letters/numbers/underscores)</span>
</div>
<div class="line-context">
<span class="line-number">658</span>                <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(r<span class="string">"^[a-zA-Z_][a-zA-Z0-9_]*$"</span>, part):
</div>
<div class="line-context">
<span class="line-number">659</span>                    <span class="comment"># Only include <span class=<span class="string">"keyword"</span>>if</span> it exists <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-context">
<span class="line-number">660</span>                    <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>in</span> available_types:
</div>
</div>
<h4>Lines 653-656</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">643</span>            <span class="string">"nullptr"</span>,
</div>
<div class="line-context">
<span class="line-number">644</span>        }
</div>
<div class="line-context">
<span class="line-number">645</span>
</div>
<div class="line-context">
<span class="line-number">646</span>        <span class="comment"># Remove common C keywords <span class=<span class="string">"keyword"</span>>and</span> operators</span>
</div>
<div class="line-context">
<span class="line-number">647</span>        <span class=<span class="string">"keyword"</span>>import</span> re
</div>
<div class="line-context">
<span class="line-number">648</span>
</div>
<div class="line-context">
<span class="line-number">649</span>        <span class="comment"># Split by common delimiters <span class=<span class="string">"keyword"</span>>and</span> operators</span>
</div>
<div class="line-context">
<span class="line-number">650</span>        parts = re.<span class="function">split</span>(r<span class="string">"[\[\]\(\)\{\}\s\*&,;]"</span>, type_str)
</div>
<div class="line-context">
<span class="line-number">651</span>
</div>
<div class="line-context">
<span class="line-number">652</span>        <span class="comment"># Extract potential type names that exist <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-uncovered">
<span class="line-number">653</span>        types = []
</div>
<div class="line-uncovered">
<span class="line-number">654</span>        <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts:
</div>
<div class="line-uncovered">
<span class="line-number">655</span>            part = part.<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">656</span>            <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> <span class="function">len</span>(part) > <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> part <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> primitive_types:
</div>
<div class="line-context">
<span class="line-number">657</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it looks like a type <span class="function">name</span>(starts <span class=<span class="string">"keyword"</span>>with</span> letter, contains letters/numbers/underscores)</span>
</div>
<div class="line-context">
<span class="line-number">658</span>                <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(r<span class="string">"^[a-zA-Z_][a-zA-Z0-9_]*$"</span>, part):
</div>
<div class="line-context">
<span class="line-number">659</span>                    <span class="comment"># Only include <span class=<span class="string">"keyword"</span>>if</span> it exists <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-context">
<span class="line-number">660</span>                    <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>in</span> available_types:
</div>
<div class="line-context">
<span class="line-number">661</span>                        types.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">662</span>
</div>
<div class="line-context">
<span class="line-number">663</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">list</span>(<span class="function">set</span>(types))  <span class="comment"># Remove duplicates</span>
</div>
<div class="line-context">
<span class="line-number">664</span>
</div>
<div class="line-context">
<span class="line-number">665</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_c_files</span>(self, project_root: Path, recursive_search: bool) -> List[Path]:
</div>
<div class="line-context">
<span class="line-number">666</span>        <span class="string">""</span><span class="string">"Find all C/C++ files <span class="</span>keyword<span class="string">">in</span> the project"</span><span class="string">""</span>
</div>
</div>
<h4>Line 658</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">648</span>
</div>
<div class="line-context">
<span class="line-number">649</span>        <span class="comment"># Split by common delimiters <span class=<span class="string">"keyword"</span>>and</span> operators</span>
</div>
<div class="line-context">
<span class="line-number">650</span>        parts = re.<span class="function">split</span>(r<span class="string">"[\[\]\(\)\{\}\s\*&,;]"</span>, type_str)
</div>
<div class="line-context">
<span class="line-number">651</span>
</div>
<div class="line-context">
<span class="line-number">652</span>        <span class="comment"># Extract potential type names that exist <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-context">
<span class="line-number">653</span>        types = []
</div>
<div class="line-context">
<span class="line-number">654</span>        <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts:
</div>
<div class="line-context">
<span class="line-number">655</span>            part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">656</span>            <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> <span class="function">len</span>(part) > <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> part <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> primitive_types:
</div>
<div class="line-context">
<span class="line-number">657</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it looks like a type <span class="function">name</span>(starts <span class=<span class="string">"keyword"</span>>with</span> letter, contains letters/numbers/underscores)</span>
</div>
<div class="line-uncovered">
<span class="line-number">658</span>                <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(r<span class="string">"^[a-zA-Z_][a-zA-Z0-9_]*$"</span>, part):
</div>
<div class="line-context">
<span class="line-number">659</span>                    <span class="comment"># Only include <span class=<span class="string">"keyword"</span>>if</span> it exists <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-context">
<span class="line-number">660</span>                    <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>in</span> available_types:
</div>
<div class="line-context">
<span class="line-number">661</span>                        types.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">662</span>
</div>
<div class="line-context">
<span class="line-number">663</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">list</span>(<span class="function">set</span>(types))  <span class="comment"># Remove duplicates</span>
</div>
<div class="line-context">
<span class="line-number">664</span>
</div>
<div class="line-context">
<span class="line-number">665</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_c_files</span>(self, project_root: Path, recursive_search: bool) -> List[Path]:
</div>
<div class="line-context">
<span class="line-number">666</span>        <span class="string">""</span><span class="string">"Find all C/C++ files <span class="</span>keyword<span class="string">">in</span> the project"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">667</span>        c_extensions = {<span class="string">".c"</span>, <span class="string">".h"</span>, <span class="string">".cpp"</span>, <span class="string">".cc"</span>, <span class="string">".cxx"</span>, <span class="string">".hpp"</span>, <span class="string">".hxx"</span>}
</div>
<div class="line-context">
<span class="line-number">668</span>        files = []
</div>
</div>
<h4>Lines 660-661</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">650</span>        parts = re.<span class="function">split</span>(r<span class="string">"[\[\]\(\)\{\}\s\*&,;]"</span>, type_str)
</div>
<div class="line-context">
<span class="line-number">651</span>
</div>
<div class="line-context">
<span class="line-number">652</span>        <span class="comment"># Extract potential type names that exist <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-context">
<span class="line-number">653</span>        types = []
</div>
<div class="line-context">
<span class="line-number">654</span>        <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts:
</div>
<div class="line-context">
<span class="line-number">655</span>            part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">656</span>            <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> <span class="function">len</span>(part) > <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> part <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> primitive_types:
</div>
<div class="line-context">
<span class="line-number">657</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it looks like a type <span class="function">name</span>(starts <span class=<span class="string">"keyword"</span>>with</span> letter, contains letters/numbers/underscores)</span>
</div>
<div class="line-context">
<span class="line-number">658</span>                <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(r<span class="string">"^[a-zA-Z_][a-zA-Z0-9_]*$"</span>, part):
</div>
<div class="line-context">
<span class="line-number">659</span>                    <span class="comment"># Only include <span class=<span class="string">"keyword"</span>>if</span> it exists <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-uncovered">
<span class="line-number">660</span>                    <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>in</span> available_types:
</div>
<div class="line-uncovered">
<span class="line-number">661</span>                        types.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">662</span>
</div>
<div class="line-context">
<span class="line-number">663</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">list</span>(<span class="function">set</span>(types))  <span class="comment"># Remove duplicates</span>
</div>
<div class="line-context">
<span class="line-number">664</span>
</div>
<div class="line-context">
<span class="line-number">665</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_c_files</span>(self, project_root: Path, recursive_search: bool) -> List[Path]:
</div>
<div class="line-context">
<span class="line-number">666</span>        <span class="string">""</span><span class="string">"Find all C/C++ files <span class="</span>keyword<span class="string">">in</span> the project"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">667</span>        c_extensions = {<span class="string">".c"</span>, <span class="string">".h"</span>, <span class="string">".cpp"</span>, <span class="string">".cc"</span>, <span class="string">".cxx"</span>, <span class="string">".hpp"</span>, <span class="string">".hxx"</span>}
</div>
<div class="line-context">
<span class="line-number">668</span>        files = []
</div>
<div class="line-context">
<span class="line-number">669</span>
</div>
<div class="line-context">
<span class="line-number">670</span>        self.logger.<span class="function">debug</span>(<span class="string">"Searching <span class="</span>keyword<span class="string">">for</span> files <span class="</span>keyword<span class="string">">with</span> extensions: %s"</span>, c_extensions)
</div>
<div class="line-context">
<span class="line-number">671</span>
</div>
</div>
<h4>Line 663</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">653</span>        types = []
</div>
<div class="line-context">
<span class="line-number">654</span>        <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts:
</div>
<div class="line-context">
<span class="line-number">655</span>            part = part.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">656</span>            <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>and</span> <span class="function">len</span>(part) > <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> part <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> primitive_types:
</div>
<div class="line-context">
<span class="line-number">657</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it looks like a type <span class="function">name</span>(starts <span class=<span class="string">"keyword"</span>>with</span> letter, contains letters/numbers/underscores)</span>
</div>
<div class="line-context">
<span class="line-number">658</span>                <span class=<span class="string">"keyword"</span>>if</span> re.<span class="function">match</span>(r<span class="string">"^[a-zA-Z_][a-zA-Z0-9_]*$"</span>, part):
</div>
<div class="line-context">
<span class="line-number">659</span>                    <span class="comment"># Only include <span class=<span class="string">"keyword"</span>>if</span> it exists <span class=<span class="string">"keyword"</span>>in</span> available_types</span>
</div>
<div class="line-context">
<span class="line-number">660</span>                    <span class=<span class="string">"keyword"</span>>if</span> part <span class=<span class="string">"keyword"</span>>in</span> available_types:
</div>
<div class="line-context">
<span class="line-number">661</span>                        types.<span class="function">append</span>(part)
</div>
<div class="line-context">
<span class="line-number">662</span>
</div>
<div class="line-uncovered">
<span class="line-number">663</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">list</span>(<span class="function">set</span>(types))  <span class="comment"># Remove duplicates</span>
</div>
<div class="line-context">
<span class="line-number">664</span>
</div>
<div class="line-context">
<span class="line-number">665</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_c_files</span>(self, project_root: Path, recursive_search: bool) -> List[Path]:
</div>
<div class="line-context">
<span class="line-number">666</span>        <span class="string">""</span><span class="string">"Find all C/C++ files <span class="</span>keyword<span class="string">">in</span> the project"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">667</span>        c_extensions = {<span class="string">".c"</span>, <span class="string">".h"</span>, <span class="string">".cpp"</span>, <span class="string">".cc"</span>, <span class="string">".cxx"</span>, <span class="string">".hpp"</span>, <span class="string">".hxx"</span>}
</div>
<div class="line-context">
<span class="line-number">668</span>        files = []
</div>
<div class="line-context">
<span class="line-number">669</span>
</div>
<div class="line-context">
<span class="line-number">670</span>        self.logger.<span class="function">debug</span>(<span class="string">"Searching <span class="</span>keyword<span class="string">">for</span> files <span class="</span>keyword<span class="string">">with</span> extensions: %s"</span>, c_extensions)
</div>
<div class="line-context">
<span class="line-number">671</span>
</div>
<div class="line-context">
<span class="line-number">672</span>        <span class=<span class="string">"keyword"</span>>if</span> recursive_search:
</div>
<div class="line-context">
<span class="line-number">673</span>            <span class=<span class="string">"keyword"</span>>for</span> ext <span class=<span class="string">"keyword"</span>>in</span> c_extensions:
</div>
</div>
<h4>Lines 676-677</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">666</span>        <span class="string">""</span><span class="string">"Find all C/C++ files <span class="</span>keyword<span class="string">">in</span> the project"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">667</span>        c_extensions = {<span class="string">".c"</span>, <span class="string">".h"</span>, <span class="string">".cpp"</span>, <span class="string">".cc"</span>, <span class="string">".cxx"</span>, <span class="string">".hpp"</span>, <span class="string">".hxx"</span>}
</div>
<div class="line-context">
<span class="line-number">668</span>        files = []
</div>
<div class="line-context">
<span class="line-number">669</span>
</div>
<div class="line-context">
<span class="line-number">670</span>        self.logger.<span class="function">debug</span>(<span class="string">"Searching <span class="</span>keyword<span class="string">">for</span> files <span class="</span>keyword<span class="string">">with</span> extensions: %s"</span>, c_extensions)
</div>
<div class="line-context">
<span class="line-number">671</span>
</div>
<div class="line-context">
<span class="line-number">672</span>        <span class=<span class="string">"keyword"</span>>if</span> recursive_search:
</div>
<div class="line-context">
<span class="line-number">673</span>            <span class=<span class="string">"keyword"</span>>for</span> ext <span class=<span class="string">"keyword"</span>>in</span> c_extensions:
</div>
<div class="line-context">
<span class="line-number">674</span>                files.<span class="function">extend</span>(project_root.<span class="function">rglob</span>(f<span class="string">"*{ext}"</span>))
</div>
<div class="line-context">
<span class="line-number">675</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">676</span>            <span class=<span class="string">"keyword"</span>>for</span> ext <span class=<span class="string">"keyword"</span>>in</span> c_extensions:
</div>
<div class="line-uncovered">
<span class="line-number">677</span>                files.<span class="function">extend</span>(project_root.<span class="function">glob</span>(f<span class="string">"*{ext}"</span>))
</div>
<div class="line-context">
<span class="line-number">678</span>
</div>
<div class="line-context">
<span class="line-number">679</span>        <span class="comment"># Filter out hidden files <span class=<span class="string">"keyword"</span>>and</span> common exclude patterns</span>
</div>
<div class="line-context">
<span class="line-number">680</span>        filtered_files = []
</div>
<div class="line-context">
<span class="line-number">681</span>        exclude_patterns = {<span class="string">".git"</span>, <span class="string">"__pycache__"</span>, <span class="string">"node_modules"</span>, <span class="string">".vscode"</span>, <span class="string">".idea"</span>}
</div>
<div class="line-context">
<span class="line-number">682</span>
</div>
<div class="line-context">
<span class="line-number">683</span>        <span class=<span class="string">"keyword"</span>>for</span> file_path <span class=<span class="string">"keyword"</span>>in</span> files:
</div>
<div class="line-context">
<span class="line-number">684</span>            <span class="comment"># Skip hidden files <span class=<span class="string">"keyword"</span>>and</span> directories</span>
</div>
<div class="line-context">
<span class="line-number">685</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">any</span>(part.<span class="function">startswith</span>(<span class="string">"."</span>) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> file_path.parts):
</div>
<div class="line-context">
<span class="line-number">686</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">687</span>
</div>
</div>
<h4>Line 686</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">676</span>            <span class=<span class="string">"keyword"</span>>for</span> ext <span class=<span class="string">"keyword"</span>>in</span> c_extensions:
</div>
<div class="line-context">
<span class="line-number">677</span>                files.<span class="function">extend</span>(project_root.<span class="function">glob</span>(f<span class="string">"*{ext}"</span>))
</div>
<div class="line-context">
<span class="line-number">678</span>
</div>
<div class="line-context">
<span class="line-number">679</span>        <span class="comment"># Filter out hidden files <span class=<span class="string">"keyword"</span>>and</span> common exclude patterns</span>
</div>
<div class="line-context">
<span class="line-number">680</span>        filtered_files = []
</div>
<div class="line-context">
<span class="line-number">681</span>        exclude_patterns = {<span class="string">".git"</span>, <span class="string">"__pycache__"</span>, <span class="string">"node_modules"</span>, <span class="string">".vscode"</span>, <span class="string">".idea"</span>}
</div>
<div class="line-context">
<span class="line-number">682</span>
</div>
<div class="line-context">
<span class="line-number">683</span>        <span class=<span class="string">"keyword"</span>>for</span> file_path <span class=<span class="string">"keyword"</span>>in</span> files:
</div>
<div class="line-context">
<span class="line-number">684</span>            <span class="comment"># Skip hidden files <span class=<span class="string">"keyword"</span>>and</span> directories</span>
</div>
<div class="line-context">
<span class="line-number">685</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">any</span>(part.<span class="function">startswith</span>(<span class="string">"."</span>) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> file_path.parts):
</div>
<div class="line-uncovered">
<span class="line-number">686</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">687</span>
</div>
<div class="line-context">
<span class="line-number">688</span>            <span class="comment"># Skip common exclude patterns</span>
</div>
<div class="line-context">
<span class="line-number">689</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">any</span>(pattern <span class=<span class="string">"keyword"</span>>in</span> file_path.parts <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> exclude_patterns):
</div>
<div class="line-context">
<span class="line-number">690</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">691</span>
</div>
<div class="line-context">
<span class="line-number">692</span>            filtered_files.<span class="function">append</span>(file_path)
</div>
<div class="line-context">
<span class="line-number">693</span>
</div>
<div class="line-context">
<span class="line-number">694</span>        self.logger.<span class="function">debug</span>(<span class="string">"Found %d C/C++ files after filtering"</span>, <span class="function">len</span>(filtered_files))
</div>
<div class="line-context">
<span class="line-number">695</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">sorted</span>(filtered_files)
</div>
<div class="line-context">
<span class="line-number">696</span>
</div>
</div>
<h4>Line 690</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">680</span>        filtered_files = []
</div>
<div class="line-context">
<span class="line-number">681</span>        exclude_patterns = {<span class="string">".git"</span>, <span class="string">"__pycache__"</span>, <span class="string">"node_modules"</span>, <span class="string">".vscode"</span>, <span class="string">".idea"</span>}
</div>
<div class="line-context">
<span class="line-number">682</span>
</div>
<div class="line-context">
<span class="line-number">683</span>        <span class=<span class="string">"keyword"</span>>for</span> file_path <span class=<span class="string">"keyword"</span>>in</span> files:
</div>
<div class="line-context">
<span class="line-number">684</span>            <span class="comment"># Skip hidden files <span class=<span class="string">"keyword"</span>>and</span> directories</span>
</div>
<div class="line-context">
<span class="line-number">685</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">any</span>(part.<span class="function">startswith</span>(<span class="string">"."</span>) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> file_path.parts):
</div>
<div class="line-context">
<span class="line-number">686</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">687</span>
</div>
<div class="line-context">
<span class="line-number">688</span>            <span class="comment"># Skip common exclude patterns</span>
</div>
<div class="line-context">
<span class="line-number">689</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="function">any</span>(pattern <span class=<span class="string">"keyword"</span>>in</span> file_path.parts <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> exclude_patterns):
</div>
<div class="line-uncovered">
<span class="line-number">690</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">691</span>
</div>
<div class="line-context">
<span class="line-number">692</span>            filtered_files.<span class="function">append</span>(file_path)
</div>
<div class="line-context">
<span class="line-number">693</span>
</div>
<div class="line-context">
<span class="line-number">694</span>        self.logger.<span class="function">debug</span>(<span class="string">"Found %d C/C++ files after filtering"</span>, <span class="function">len</span>(filtered_files))
</div>
<div class="line-context">
<span class="line-number">695</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">sorted</span>(filtered_files)
</div>
<div class="line-context">
<span class="line-number">696</span>
</div>
<div class="line-context">
<span class="line-number">697</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_files_with_include_dependencies</span>(
</div>
<div class="line-context">
<span class="line-number">698</span>        self, project_root: Path, recursive_search: bool, config: <span class="string">"Config"</span>
</div>
<div class="line-context">
<span class="line-number">699</span>    ) -> List[Path]:
</div>
<div class="line-context">
<span class="line-number">700</span>        <span class="string">""</span><span class="string">"Find C/C++ files based on configuration <span class="</span>keyword<span class="string">">and</span> include dependencies"</span><span class="string">""</span>
</div>
</div>
<h4>Line 704</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">694</span>        self.logger.<span class="function">debug</span>(<span class="string">"Found %d C/C++ files after filtering"</span>, <span class="function">len</span>(filtered_files))
</div>
<div class="line-context">
<span class="line-number">695</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">sorted</span>(filtered_files)
</div>
<div class="line-context">
<span class="line-number">696</span>
</div>
<div class="line-context">
<span class="line-number">697</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_files_with_include_dependencies</span>(
</div>
<div class="line-context">
<span class="line-number">698</span>        self, project_root: Path, recursive_search: bool, config: <span class="string">"Config"</span>
</div>
<div class="line-context">
<span class="line-number">699</span>    ) -> List[Path]:
</div>
<div class="line-context">
<span class="line-number">700</span>        <span class="string">""</span><span class="string">"Find C/C++ files based on configuration <span class="</span>keyword<span class="string">">and</span> include dependencies"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">701</span>
</div>
<div class="line-context">
<span class="line-number">702</span>        <span class="comment"># If no config provided, fall back to old behavior</span>
</div>
<div class="line-context">
<span class="line-number">703</span>        <span class=<span class="string">"keyword"</span>>if</span> config <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number">704</span>            <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">_find_c_files</span>(project_root, recursive_search)
</div>
<div class="line-context">
<span class="line-number">705</span>
</div>
<div class="line-context">
<span class="line-number">706</span>        <span class="comment"># Get include depth <span class=<span class="string">"keyword"</span>>from</span> config</span>
</div>
<div class="line-context">
<span class="line-number">707</span>        include_depth = <span class="function">getattr</span>(config, <span class="string">"include_depth"</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">708</span>        self.logger.<span class="function">info</span>(<span class="string">"Using include depth: %d"</span>, include_depth)
</div>
<div class="line-context">
<span class="line-number">709</span>
</div>
<div class="line-context">
<span class="line-number">710</span>        <span class="comment"># Step <span class="number">1</span>: Find all C/C++ files <span class=<span class="string">"keyword"</span>>in</span> the project</span>
</div>
<div class="line-context">
<span class="line-number">711</span>        all_c_files = self.<span class="function">_find_c_files</span>(project_root, recursive_search)
</div>
<div class="line-context">
<span class="line-number">712</span>        self.logger.<span class="function">debug</span>(<span class="string">"All C files found: %s"</span>, [f.name <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> all_c_files])
</div>
<div class="line-context">
<span class="line-number">713</span>
</div>
<div class="line-context">
<span class="line-number">714</span>        <span class="comment"># Step <span class="number">2</span>: Apply initial file <span class="function">filtering</span>(include/exclude patterns) <span class=<span class="string">"keyword"</span>>and</span> separate .c <span class=<span class="string">"keyword"</span>>and</span> .h files</span>
</div>
</div>
<h4>Line 739</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">729</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">730</span>                self.logger.<span class="function">debug</span>(<span class="string">"Excluded file after filtering: %s"</span>, relative_path)
</div>
<div class="line-context">
<span class="line-number">731</span>
</div>
<div class="line-context">
<span class="line-number">732</span>        self.logger.<span class="function">info</span>(
</div>
<div class="line-context">
<span class="line-number">733</span>            f<span class="string">"Initial C files after filtering: {<span class="function">len</span>(initial_c_files)} files"</span>
</div>
<div class="line-context">
<span class="line-number">734</span>        )
</div>
<div class="line-context">
<span class="line-number">735</span>        self.logger.<span class="function">debug</span>(<span class="string">"Initial C files: %s"</span>, [f.name <span class=<span class="string">"keyword"</span>>for</span> f <span class=<span class="string">"keyword"</span>>in</span> initial_c_files])
</div>
<div class="line-context">
<span class="line-number">736</span>
</div>
<div class="line-context">
<span class="line-number">737</span>        <span class="comment"># Step <span class="number">3</span>: If include_depth <span class=<span class="string">"keyword"</span>>is</span> <span class="number">0</span>, <span class=<span class="string">"keyword"</span>>return</span> only the initially filtered C files</span>
</div>
<div class="line-context">
<span class="line-number">738</span>        <span class=<span class="string">"keyword"</span>>if</span> include_depth == <span class="number">0</span>:
</div>
<div class="line-uncovered">
<span class="line-number">739</span>            <span class=<span class="string">"keyword"</span>>return</span> initial_c_files
</div>
<div class="line-context">
<span class="line-number">740</span>
</div>
<div class="line-context">
<span class="line-number">741</span>        <span class="comment"># Step <span class="number">4</span>: Process include dependencies <span class=<span class="string">"keyword"</span>>for</span> N iterations</span>
</div>
<div class="line-context">
<span class="line-number">742</span>        files_to_parse = <span class="function">set</span>(initial_c_files)
</div>
<div class="line-context">
<span class="line-number">743</span>
</div>
<div class="line-context">
<span class="line-number">744</span>        <span class=<span class="string">"keyword"</span>>for</span> iteration <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(include_depth):
</div>
<div class="line-context">
<span class="line-number">745</span>            self.logger.<span class="function">info</span>(<span class="string">"Processing include iteration %d"</span>, iteration + <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">746</span>
</div>
<div class="line-context">
<span class="line-number">747</span>            <span class="comment"># Get the files that were <span class=<span class="string">"keyword"</span>>in</span> the list at the start of this iteration</span>
</div>
<div class="line-context">
<span class="line-number">748</span>            files_at_start_of_iteration = <span class="function">list</span>(files_to_parse)
</div>
<div class="line-context">
<span class="line-number">749</span>            self.logger.<span class="function">debug</span>(
</div>
</div>
<h4>Line 776</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">766</span>                        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> the included file should be included based on config</span>
</div>
<div class="line-context">
<span class="line-number">767</span>                        relative_included_path = <span class="function">str</span>(
</div>
<div class="line-context">
<span class="line-number">768</span>                            included_file.<span class="function">relative_to</span>(project_root)
</div>
<div class="line-context">
<span class="line-number">769</span>                        )
</div>
<div class="line-context">
<span class="line-number">770</span>                        <span class=<span class="string">"keyword"</span>>if</span> self.<span class="function">_should_include_file</span>(relative_included_path, config):
</div>
<div class="line-context">
<span class="line-number">771</span>                            new_includes.<span class="function">add</span>(included_file)
</div>
<div class="line-context">
<span class="line-number">772</span>                            self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">773</span>                                f<span class="string">"Added included file <span class="</span>keyword<span class="string">">in</span> iteration {iteration + <span class="number">1</span>}: {relative_included_path}"</span>
</div>
<div class="line-context">
<span class="line-number">774</span>                            )
</div>
<div class="line-context">
<span class="line-number">775</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">776</span>                            self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">777</span>                                f<span class="string">"Excluded included file due to config: {relative_included_path}"</span>
</div>
<div class="line-context">
<span class="line-number">778</span>                            )
</div>
<div class="line-context">
<span class="line-number">779</span>                    <span class=<span class="string">"keyword"</span>>elif</span> included_file:
</div>
<div class="line-context">
<span class="line-number">780</span>                        self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">781</span>                            f<span class="string">"Included file already <span class="</span>keyword<span class="string">">in</span> list: {included_file.name}"</span>
</div>
<div class="line-context">
<span class="line-number">782</span>                        )
</div>
<div class="line-context">
<span class="line-number">783</span>                    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">784</span>                        self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">785</span>                            f<span class="string">"Could <span class="</span>keyword<span class="string">">not</span> find included file: {include_name}"</span>
</div>
<div class="line-context">
<span class="line-number">786</span>                        )
</div>
</div>
<h4>Line 848</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">838</span>        <span class="comment"># Try to find the file <span class=<span class="string">"keyword"</span>>in</span> subdirectories of the project root</span>
</div>
<div class="line-context">
<span class="line-number">839</span>        <span class=<span class="string">"keyword"</span>>if</span> project_root:
</div>
<div class="line-context">
<span class="line-number">840</span>            <span class=<span class="string">"keyword"</span>>for</span> ext <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">".h"</span>, <span class="string">".hpp"</span>, <span class="string">".c"</span>, <span class="string">".cpp"</span>]:
</div>
<div class="line-context">
<span class="line-number">841</span>                full_name = (
</div>
<div class="line-context">
<span class="line-number">842</span>                    include_name
</div>
<div class="line-context">
<span class="line-number">843</span>                    <span class=<span class="string">"keyword"</span>>if</span> include_name.<span class="function">endswith</span>(ext)
</div>
<div class="line-context">
<span class="line-number">844</span>                    <span class=<span class="string">"keyword"</span>>else</span> f<span class="string">"{include_name}{ext}"</span>
</div>
<div class="line-context">
<span class="line-number">845</span>                )
</div>
<div class="line-context">
<span class="line-number">846</span>                <span class="comment"># Search recursively <span class=<span class="string">"keyword"</span>>in</span> project root</span>
</div>
<div class="line-context">
<span class="line-number">847</span>                <span class=<span class="string">"keyword"</span>>for</span> found_file <span class=<span class="string">"keyword"</span>>in</span> project_root.<span class="function">rglob</span>(full_name):
</div>
<div class="line-uncovered">
<span class="line-number">848</span>                    <span class=<span class="string">"keyword"</span>>if</span> found_file.<span class="function">is_file</span>():
</div>
<div class="line-context">
<span class="line-number">849</span>                        <span class="comment"># For backward compatibility <span class=<span class="string">"keyword"</span>>with</span> tests, <span class=<span class="string">"keyword"</span>>return</span> full path <span class=<span class="string">"keyword"</span>>if</span> it's a test</span>
</div>
<div class="line-context">
<span class="line-number">850</span>                        <span class="comment"># Otherwise <span class=<span class="string">"keyword"</span>>return</span> filename <span class=<span class="string">"keyword"</span>>for</span> simplified tracking</span>
</div>
<div class="line-context">
<span class="line-number">851</span>                        <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"tmp"</span> <span class=<span class="string">"keyword"</span>>in</span> <span class="function">str</span>(found_file):
</div>
<div class="line-context">
<span class="line-number">852</span>                            <span class=<span class="string">"keyword"</span>>return</span> found_file
</div>
<div class="line-context">
<span class="line-number">853</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">854</span>                            <span class=<span class="string">"keyword"</span>>return</span> found_file
</div>
<div class="line-context">
<span class="line-number">855</span>
</div>
<div class="line-context">
<span class="line-number">856</span>        <span class="comment"># If we get here, the file was <span class=<span class="string">"keyword"</span>>not</span> found - cache this result</span>
</div>
<div class="line-context">
<span class="line-number">857</span>        self._failed_includes_cache.<span class="function">add</span>(cache_key)
</div>
<div class="line-context">
<span class="line-number">858</span>        self.logger.<span class="function">debug</span>(<span class="string">"Cached failed include search <span class="</span>keyword<span class="string">">for</span> <span class="string">'%s'</span>"</span>, include_name)
</div>
</div>
<h4>Lines 851-852</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">841</span>                full_name = (
</div>
<div class="line-context">
<span class="line-number">842</span>                    include_name
</div>
<div class="line-context">
<span class="line-number">843</span>                    <span class=<span class="string">"keyword"</span>>if</span> include_name.<span class="function">endswith</span>(ext)
</div>
<div class="line-context">
<span class="line-number">844</span>                    <span class=<span class="string">"keyword"</span>>else</span> f<span class="string">"{include_name}{ext}"</span>
</div>
<div class="line-context">
<span class="line-number">845</span>                )
</div>
<div class="line-context">
<span class="line-number">846</span>                <span class="comment"># Search recursively <span class=<span class="string">"keyword"</span>>in</span> project root</span>
</div>
<div class="line-context">
<span class="line-number">847</span>                <span class=<span class="string">"keyword"</span>>for</span> found_file <span class=<span class="string">"keyword"</span>>in</span> project_root.<span class="function">rglob</span>(full_name):
</div>
<div class="line-context">
<span class="line-number">848</span>                    <span class=<span class="string">"keyword"</span>>if</span> found_file.<span class="function">is_file</span>():
</div>
<div class="line-context">
<span class="line-number">849</span>                        <span class="comment"># For backward compatibility <span class=<span class="string">"keyword"</span>>with</span> tests, <span class=<span class="string">"keyword"</span>>return</span> full path <span class=<span class="string">"keyword"</span>>if</span> it's a test</span>
</div>
<div class="line-context">
<span class="line-number">850</span>                        <span class="comment"># Otherwise <span class=<span class="string">"keyword"</span>>return</span> filename <span class=<span class="string">"keyword"</span>>for</span> simplified tracking</span>
</div>
<div class="line-uncovered">
<span class="line-number">851</span>                        <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"tmp"</span> <span class=<span class="string">"keyword"</span>>in</span> <span class="function">str</span>(found_file):
</div>
<div class="line-uncovered">
<span class="line-number">852</span>                            <span class=<span class="string">"keyword"</span>>return</span> found_file
</div>
<div class="line-context">
<span class="line-number">853</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">854</span>                            <span class=<span class="string">"keyword"</span>>return</span> found_file
</div>
<div class="line-context">
<span class="line-number">855</span>
</div>
<div class="line-context">
<span class="line-number">856</span>        <span class="comment"># If we get here, the file was <span class=<span class="string">"keyword"</span>>not</span> found - cache this result</span>
</div>
<div class="line-context">
<span class="line-number">857</span>        self._failed_includes_cache.<span class="function">add</span>(cache_key)
</div>
<div class="line-context">
<span class="line-number">858</span>        self.logger.<span class="function">debug</span>(<span class="string">"Cached failed include search <span class="</span>keyword<span class="string">">for</span> <span class="string">'%s'</span>"</span>, include_name)
</div>
<div class="line-context">
<span class="line-number">859</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">860</span>
</div>
<div class="line-context">
<span class="line-number">861</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_extract_includes_from_file</span>(self, file_path: Path) -> List[str]:
</div>
<div class="line-context">
<span class="line-number">862</span>        <span class="string">""</span><span class="string">"Extract include statements <span class="</span>keyword<span class="string">">from</span> a file without full parsing"</span><span class="string">""</span>
</div>
</div>
<h4>Line 854</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">844</span>                    <span class=<span class="string">"keyword"</span>>else</span> f<span class="string">"{include_name}{ext}"</span>
</div>
<div class="line-context">
<span class="line-number">845</span>                )
</div>
<div class="line-context">
<span class="line-number">846</span>                <span class="comment"># Search recursively <span class=<span class="string">"keyword"</span>>in</span> project root</span>
</div>
<div class="line-context">
<span class="line-number">847</span>                <span class=<span class="string">"keyword"</span>>for</span> found_file <span class=<span class="string">"keyword"</span>>in</span> project_root.<span class="function">rglob</span>(full_name):
</div>
<div class="line-context">
<span class="line-number">848</span>                    <span class=<span class="string">"keyword"</span>>if</span> found_file.<span class="function">is_file</span>():
</div>
<div class="line-context">
<span class="line-number">849</span>                        <span class="comment"># For backward compatibility <span class=<span class="string">"keyword"</span>>with</span> tests, <span class=<span class="string">"keyword"</span>>return</span> full path <span class=<span class="string">"keyword"</span>>if</span> it's a test</span>
</div>
<div class="line-context">
<span class="line-number">850</span>                        <span class="comment"># Otherwise <span class=<span class="string">"keyword"</span>>return</span> filename <span class=<span class="string">"keyword"</span>>for</span> simplified tracking</span>
</div>
<div class="line-context">
<span class="line-number">851</span>                        <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"tmp"</span> <span class=<span class="string">"keyword"</span>>in</span> <span class="function">str</span>(found_file):
</div>
<div class="line-context">
<span class="line-number">852</span>                            <span class=<span class="string">"keyword"</span>>return</span> found_file
</div>
<div class="line-context">
<span class="line-number">853</span>                        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">854</span>                            <span class=<span class="string">"keyword"</span>>return</span> found_file
</div>
<div class="line-context">
<span class="line-number">855</span>
</div>
<div class="line-context">
<span class="line-number">856</span>        <span class="comment"># If we get here, the file was <span class=<span class="string">"keyword"</span>>not</span> found - cache this result</span>
</div>
<div class="line-context">
<span class="line-number">857</span>        self._failed_includes_cache.<span class="function">add</span>(cache_key)
</div>
<div class="line-context">
<span class="line-number">858</span>        self.logger.<span class="function">debug</span>(<span class="string">"Cached failed include search <span class="</span>keyword<span class="string">">for</span> <span class="string">'%s'</span>"</span>, include_name)
</div>
<div class="line-context">
<span class="line-number">859</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">860</span>
</div>
<div class="line-context">
<span class="line-number">861</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_extract_includes_from_file</span>(self, file_path: Path) -> List[str]:
</div>
<div class="line-context">
<span class="line-number">862</span>        <span class="string">""</span><span class="string">"Extract include statements <span class="</span>keyword<span class="string">">from</span> a file without full parsing"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">863</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">864</span>            encoding = self.<span class="function">_detect_encoding</span>(file_path)
</div>
</div>
<h4>Lines 872-874</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">862</span>        <span class="string">""</span><span class="string">"Extract include statements <span class="</span>keyword<span class="string">">from</span> a file without full parsing"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">863</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">864</span>            encoding = self.<span class="function">_detect_encoding</span>(file_path)
</div>
<div class="line-context">
<span class="line-number">865</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"r"</span>, encoding=encoding) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number">866</span>                content = f.<span class="function">read</span>()
</div>
<div class="line-context">
<span class="line-number">867</span>
</div>
<div class="line-context">
<span class="line-number">868</span>            <span class="comment"># Tokenize <span class=<span class="string">"keyword"</span>>and</span> extract includes</span>
</div>
<div class="line-context">
<span class="line-number">869</span>            tokens = self.tokenizer.<span class="function">tokenize</span>(content)
</div>
<div class="line-context">
<span class="line-number">870</span>            <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">_parse_includes_with_tokenizer</span>(tokens)
</div>
<div class="line-context">
<span class="line-number">871</span>
</div>
<div class="line-uncovered">
<span class="line-number">872</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">873</span>            self.logger.<span class="function">warning</span>(<span class="string">"Failed to extract includes <span class="</span>keyword<span class="string">">from</span> %s: %s"</span>, file_path, e)
</div>
<div class="line-uncovered">
<span class="line-number">874</span>            <span class=<span class="string">"keyword"</span>>return</span> []
</div>
<div class="line-context">
<span class="line-number">875</span>
</div>
<div class="line-context">
<span class="line-number">876</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_detect_encoding</span>(self, file_path: Path) -> str:
</div>
<div class="line-context">
<span class="line-number">877</span>        <span class="string">""</span><span class="string">"Detect file encoding <span class="</span>keyword<span class="string">">with</span> platform-aware fallbacks"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">878</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">detect_file_encoding</span>(file_path)
</div>
<div class="line-context">
<span class="line-number">879</span>
</div>
<div class="line-context">
<span class="line-number">880</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_find_original_token_pos</span>(self, all_tokens, filtered_tokens, filtered_pos):
</div>
<div class="line-context">
<span class="line-number">881</span>        <span class="string">""</span><span class="string">"Find the position <span class="</span>keyword<span class="string">">in</span> all_tokens that corresponds to filtered_tokens[filtered_pos]"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">882</span>        <span class=<span class="string">"keyword"</span>>if</span> filtered_pos >= <span class="function">len</span>(filtered_tokens):
</div>
<div class="line-context">
<span class="line-number">883</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">884</span>
</div>
</div>
<h4>Line 896</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">886</span>
</div>
<div class="line-context">
<span class="line-number">887</span>        <span class="comment"># Search <span class=<span class="string">"keyword"</span>>for</span> the token <span class=<span class="string">"keyword"</span>>in</span> all_tokens by line <span class=<span class="string">"keyword"</span>>and</span> column</span>
</div>
<div class="line-context">
<span class="line-number">888</span>        <span class=<span class="string">"keyword"</span>>for</span> i, token <span class=<span class="string">"keyword"</span>>in</span> <span class="function">enumerate</span>(all_tokens):
</div>
<div class="line-context">
<span class="line-number">889</span>            <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">890</span>                token.line == target_token.line
</div>
<div class="line-context">
<span class="line-number">891</span>                <span class=<span class="string">"keyword"</span>>and</span> token.column == target_token.column
</div>
<div class="line-context">
<span class="line-number">892</span>                <span class=<span class="string">"keyword"</span>>and</span> token.value == target_token.value
</div>
<div class="line-context">
<span class="line-number">893</span>            ):
</div>
<div class="line-context">
<span class="line-number">894</span>                <span class=<span class="string">"keyword"</span>>return</span> i
</div>
<div class="line-context">
<span class="line-number">895</span>
</div>
<div class="line-uncovered">
<span class="line-number">896</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">897</span>
</div>
<div class="line-context">
<span class="line-number">898</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_single_typedef</span>(self, tokens, start_pos):
</div>
<div class="line-context">
<span class="line-number">899</span>        <span class="string">""</span><span class="string">"Parse a single typedef starting at the given position"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">900</span>        <span class="comment"># Skip <span class="string">'typedef'</span> keyword</span>
</div>
<div class="line-context">
<span class="line-number">901</span>        pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">902</span>
</div>
<div class="line-context">
<span class="line-number">903</span>        <span class="comment"># Skip whitespace <span class=<span class="string">"keyword"</span>>and</span> comments</span>
</div>
<div class="line-context">
<span class="line-number">904</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">905</span>            TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">906</span>            TokenType.COMMENT,
</div>
</div>
<h4>Line 911</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">901</span>        pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">902</span>
</div>
<div class="line-context">
<span class="line-number">903</span>        <span class="comment"># Skip whitespace <span class=<span class="string">"keyword"</span>>and</span> comments</span>
</div>
<div class="line-context">
<span class="line-number">904</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">905</span>            TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">906</span>            TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">907</span>        ]:
</div>
<div class="line-context">
<span class="line-number">908</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">909</span>
</div>
<div class="line-context">
<span class="line-number">910</span>        <span class=<span class="string">"keyword"</span>>if</span> pos >= <span class="function">len</span>(tokens):
</div>
<div class="line-uncovered">
<span class="line-number">911</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">912</span>
</div>
<div class="line-context">
<span class="line-number">913</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it<span class="string">'s a struct/enum/union <span class="function">typedef</span>(we'</span>ll handle these separately)</span>
</div>
<div class="line-context">
<span class="line-number">914</span>        <span class=<span class="string">"keyword"</span>>if</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>in</span> [TokenType.STRUCT, TokenType.ENUM, TokenType.UNION]:
</div>
<div class="line-context">
<span class="line-number">915</span>            <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">_parse_complex_typedef</span>(tokens, pos)
</div>
<div class="line-context">
<span class="line-number">916</span>
</div>
<div class="line-context">
<span class="line-number">917</span>        <span class="comment"># Collect all non-whitespace/comment tokens until semicolon</span>
</div>
<div class="line-context">
<span class="line-number">918</span>        all_tokens = []
</div>
<div class="line-context">
<span class="line-number">919</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type != TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">920</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [TokenType.WHITESPACE, TokenType.COMMENT]:
</div>
<div class="line-context">
<span class="line-number">921</span>                all_tokens.<span class="function">append</span>(tokens[pos])
</div>
</div>
<h4>Line 925</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">915</span>            <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">_parse_complex_typedef</span>(tokens, pos)
</div>
<div class="line-context">
<span class="line-number">916</span>
</div>
<div class="line-context">
<span class="line-number">917</span>        <span class="comment"># Collect all non-whitespace/comment tokens until semicolon</span>
</div>
<div class="line-context">
<span class="line-number">918</span>        all_tokens = []
</div>
<div class="line-context">
<span class="line-number">919</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type != TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">920</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [TokenType.WHITESPACE, TokenType.COMMENT]:
</div>
<div class="line-context">
<span class="line-number">921</span>                all_tokens.<span class="function">append</span>(tokens[pos])
</div>
<div class="line-context">
<span class="line-number">922</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">923</span>
</div>
<div class="line-context">
<span class="line-number">924</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">len</span>(all_tokens) < <span class="number">2</span>:
</div>
<div class="line-uncovered">
<span class="line-number">925</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">926</span>
</div>
<div class="line-context">
<span class="line-number">927</span>        <span class="comment"># Function pointer typedef: typedef <span class="function">ret</span>(*name)(params);</span>
</div>
<div class="line-context">
<span class="line-number">928</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(<span class="function">len</span>(all_tokens) - <span class="number">3</span>):
</div>
<div class="line-context">
<span class="line-number">929</span>            <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">930</span>                all_tokens[i].type
</div>
<div class="line-context">
<span class="line-number">931</span>                <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">932</span>                    TokenType.IDENTIFIER,
</div>
<div class="line-context">
<span class="line-number">933</span>                    TokenType.INT,
</div>
<div class="line-context">
<span class="line-number">934</span>                    TokenType.VOID,
</div>
<div class="line-context">
<span class="line-number">935</span>                    TokenType.CHAR,
</div>
</div>
<h4>Lines 959-961</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">949</span>                original_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> all_tokens)
</div>
<div class="line-context">
<span class="line-number">950</span>                <span class=<span class="string">"keyword"</span>>return</span> (typedef_name, original_type)
</div>
<div class="line-context">
<span class="line-number">951</span>
</div>
<div class="line-context">
<span class="line-number">952</span>        <span class="comment"># Array typedef: typedef type name[size];</span>
</div>
<div class="line-context">
<span class="line-number">953</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(<span class="function">len</span>(all_tokens)):
</div>
<div class="line-context">
<span class="line-number">954</span>            <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">955</span>                all_tokens[i].type == TokenType.LBRACKET
</div>
<div class="line-context">
<span class="line-number">956</span>                <span class=<span class="string">"keyword"</span>>and</span> i > <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">957</span>                <span class=<span class="string">"keyword"</span>>and</span> all_tokens[i - <span class="number">1</span>].type == TokenType.IDENTIFIER
</div>
<div class="line-context">
<span class="line-number">958</span>            ):
</div>
<div class="line-uncovered">
<span class="line-number">959</span>                typedef_name = all_tokens[i - <span class="number">1</span>].value
</div>
<div class="line-uncovered">
<span class="line-number">960</span>                original_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> all_tokens)
</div>
<div class="line-uncovered">
<span class="line-number">961</span>                <span class=<span class="string">"keyword"</span>>return</span> (typedef_name, original_type)
</div>
<div class="line-context">
<span class="line-number">962</span>
</div>
<div class="line-context">
<span class="line-number">963</span>        <span class="comment"># Pointer typedef: typedef type * name;</span>
</div>
<div class="line-context">
<span class="line-number">964</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(<span class="function">len</span>(all_tokens) - <span class="number">2</span>):
</div>
<div class="line-context">
<span class="line-number">965</span>            <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">966</span>                all_tokens[i].type == TokenType.ASTERISK
</div>
<div class="line-context">
<span class="line-number">967</span>                <span class=<span class="string">"keyword"</span>>and</span> all_tokens[i + <span class="number">1</span>].type == TokenType.IDENTIFIER
</div>
<div class="line-context">
<span class="line-number">968</span>            ):
</div>
<div class="line-context">
<span class="line-number">969</span>                typedef_name = all_tokens[i + <span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">970</span>                original_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> all_tokens)
</div>
<div class="line-context">
<span class="line-number">971</span>                <span class=<span class="string">"keyword"</span>>return</span> (typedef_name, original_type)
</div>
</div>
<h4>Lines 969-971</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">959</span>                typedef_name = all_tokens[i - <span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">960</span>                original_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> all_tokens)
</div>
<div class="line-context">
<span class="line-number">961</span>                <span class=<span class="string">"keyword"</span>>return</span> (typedef_name, original_type)
</div>
<div class="line-context">
<span class="line-number">962</span>
</div>
<div class="line-context">
<span class="line-number">963</span>        <span class="comment"># Pointer typedef: typedef type * name;</span>
</div>
<div class="line-context">
<span class="line-number">964</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(<span class="function">len</span>(all_tokens) - <span class="number">2</span>):
</div>
<div class="line-context">
<span class="line-number">965</span>            <span class=<span class="string">"keyword"</span>>if</span> (
</div>
<div class="line-context">
<span class="line-number">966</span>                all_tokens[i].type == TokenType.ASTERISK
</div>
<div class="line-context">
<span class="line-number">967</span>                <span class=<span class="string">"keyword"</span>>and</span> all_tokens[i + <span class="number">1</span>].type == TokenType.IDENTIFIER
</div>
<div class="line-context">
<span class="line-number">968</span>            ):
</div>
<div class="line-uncovered">
<span class="line-number">969</span>                typedef_name = all_tokens[i + <span class="number">1</span>].value
</div>
<div class="line-uncovered">
<span class="line-number">970</span>                original_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> all_tokens)
</div>
<div class="line-uncovered">
<span class="line-number">971</span>                <span class=<span class="string">"keyword"</span>>return</span> (typedef_name, original_type)
</div>
<div class="line-context">
<span class="line-number">972</span>
</div>
<div class="line-context">
<span class="line-number">973</span>        <span class="comment"># Simple typedef: the last token should be the typedef name, everything <span class=<span class="string">"keyword"</span>>else</span> <span class=<span class="string">"keyword"</span>>is</span> the type</span>
</div>
<div class="line-context">
<span class="line-number">974</span>        typedef_name = all_tokens[-<span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">975</span>        type_tokens = all_tokens[:-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">976</span>        original_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> type_tokens)
</div>
<div class="line-context">
<span class="line-number">977</span>        <span class=<span class="string">"keyword"</span>>return</span> (typedef_name, original_type)
</div>
<div class="line-context">
<span class="line-number">978</span>
</div>
<div class="line-context">
<span class="line-number">979</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_complex_typedef</span>(self, tokens, start_pos):
</div>
<div class="line-context">
<span class="line-number">980</span>        <span class="string">""</span><span class="string">"Parse complex <span class="function">typedef</span>(struct/enum/union)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">981</span>        <span class="comment"># For now, <span class=<span class="string">"keyword"</span>>return</span> a simplified version</span>
</div>
</div>
<h4>Line 1007</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">997</span>        pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">998</span>
</div>
<div class="line-context">
<span class="line-number">999</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> brace_count > <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">1000</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[pos].type == TokenType.LBRACE:
</div>
<div class="line-context">
<span class="line-number">1001</span>                brace_count += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1002</span>            <span class=<span class="string">"keyword"</span>>elif</span> tokens[pos].type == TokenType.RBRACE:
</div>
<div class="line-context">
<span class="line-number">1003</span>                brace_count -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1004</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1005</span>
</div>
<div class="line-context">
<span class="line-number">1006</span>        <span class=<span class="string">"keyword"</span>>if</span> brace_count > <span class="number">0</span>:
</div>
<div class="line-uncovered">
<span class="line-number">1007</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1008</span>
</div>
<div class="line-context">
<span class="line-number">1009</span>        <span class="comment"># Find typedef name after closing brace</span>
</div>
<div class="line-context">
<span class="line-number">1010</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">1011</span>            TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">1012</span>            TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">1013</span>        ]:
</div>
<div class="line-context">
<span class="line-number">1014</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1015</span>
</div>
<div class="line-context">
<span class="line-number">1016</span>        <span class=<span class="string">"keyword"</span>>if</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type == TokenType.IDENTIFIER:
</div>
<div class="line-context">
<span class="line-number">1017</span>            typedef_name = tokens[pos].value
</div>
</div>
<h4>Line 1036</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1026</span>        pos = start_pos + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1027</span>
</div>
<div class="line-context">
<span class="line-number">1028</span>        <span class="comment"># Skip whitespace <span class=<span class="string">"keyword"</span>>and</span> comments</span>
</div>
<div class="line-context">
<span class="line-number">1029</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">1030</span>            TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">1031</span>            TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">1032</span>        ]:
</div>
<div class="line-context">
<span class="line-number">1033</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1034</span>
</div>
<div class="line-context">
<span class="line-number">1035</span>        <span class=<span class="string">"keyword"</span>>if</span> pos >= <span class="function">len</span>(tokens):
</div>
<div class="line-uncovered">
<span class="line-number">1036</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1037</span>
</div>
<div class="line-context">
<span class="line-number">1038</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it's a struct/enum/union</span>
</div>
<div class="line-context">
<span class="line-number">1039</span>        <span class=<span class="string">"keyword"</span>>if</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [TokenType.STRUCT, TokenType.ENUM, TokenType.UNION]:
</div>
<div class="line-context">
<span class="line-number">1040</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1041</span>
</div>
<div class="line-context">
<span class="line-number">1042</span>        <span class="comment"># Skip struct/enum/union keyword</span>
</div>
<div class="line-context">
<span class="line-number">1043</span>        pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1044</span>
</div>
<div class="line-context">
<span class="line-number">1045</span>        <span class="comment"># Skip whitespace <span class=<span class="string">"keyword"</span>>and</span> comments</span>
</div>
<div class="line-context">
<span class="line-number">1046</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>in</span> [
</div>
</div>
<h4>Line 1040</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1030</span>            TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">1031</span>            TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">1032</span>        ]:
</div>
<div class="line-context">
<span class="line-number">1033</span>            pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1034</span>
</div>
<div class="line-context">
<span class="line-number">1035</span>        <span class=<span class="string">"keyword"</span>>if</span> pos >= <span class="function">len</span>(tokens):
</div>
<div class="line-context">
<span class="line-number">1036</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1037</span>
</div>
<div class="line-context">
<span class="line-number">1038</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> it's a struct/enum/union</span>
</div>
<div class="line-context">
<span class="line-number">1039</span>        <span class=<span class="string">"keyword"</span>>if</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [TokenType.STRUCT, TokenType.ENUM, TokenType.UNION]:
</div>
<div class="line-uncovered">
<span class="line-number">1040</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1041</span>
</div>
<div class="line-context">
<span class="line-number">1042</span>        <span class="comment"># Skip struct/enum/union keyword</span>
</div>
<div class="line-context">
<span class="line-number">1043</span>        pos += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1044</span>
</div>
<div class="line-context">
<span class="line-number">1045</span>        <span class="comment"># Skip whitespace <span class=<span class="string">"keyword"</span>>and</span> comments</span>
</div>
<div class="line-context">
<span class="line-number">1046</span>        <span class=<span class="string">"keyword"</span>>while</span> pos < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[pos].type <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">1047</span>            TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">1048</span>            TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">1049</span>        ]:
</div>
<div class="line-context">
<span class="line-number">1050</span>            pos += <span class="number">1</span>
</div>
</div>
<h4>Line 1120</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1110</span>                brace_count -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1111</span>                <span class=<span class="string">"keyword"</span>>if</span> brace_count == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">1112</span>                    <span class="comment"># Continue until semicolon</span>
</div>
<div class="line-context">
<span class="line-number">1113</span>                    <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[i].type != TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">1114</span>                        i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1115</span>                    <span class=<span class="string">"keyword"</span>>return</span> i + <span class="number">1</span> <span class=<span class="string">"keyword"</span>>if</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>else</span> i
</div>
<div class="line-context">
<span class="line-number">1116</span>            <span class=<span class="string">"keyword"</span>>elif</span> tokens[i].type == TokenType.SEMICOLON <span class=<span class="string">"keyword"</span>>and</span> brace_count == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">1117</span>                <span class=<span class="string">"keyword"</span>>return</span> i + <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1118</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1119</span>
</div>
<div class="line-uncovered">
<span class="line-number">1120</span>        <span class=<span class="string">"keyword"</span>>return</span> i
</div>
<div class="line-context">
<span class="line-number">1121</span>
</div>
<div class="line-context">
<span class="line-number">1122</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_global_variable</span>(self, tokens, start_pos):
</div>
<div class="line-context">
<span class="line-number">1123</span>        <span class="string">""</span><span class="string">"Parse a <span class="</span>keyword<span class="string">">global</span> variable declaration starting at start_pos"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1124</span>        <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> pattern: [static/extern] type name [= value];</span>
</div>
<div class="line-context">
<span class="line-number">1125</span>        i = start_pos
</div>
<div class="line-context">
<span class="line-number">1126</span>        collected_tokens = []
</div>
<div class="line-context">
<span class="line-number">1127</span>
</div>
<div class="line-context">
<span class="line-number">1128</span>        <span class="comment"># Collect tokens until semicolon</span>
</div>
<div class="line-context">
<span class="line-number">1129</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[i].type != TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">1130</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [TokenType.WHITESPACE, TokenType.COMMENT]:
</div>
</div>
<h4>Line 1182</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1172</span>                    <span class="comment"># Array declaration: find the identifier before the opening bracket</span>
</div>
<div class="line-context">
<span class="line-number">1173</span>                    <span class=<span class="string">"keyword"</span>>for</span> j <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(bracket_idx - <span class="number">1</span>, start_idx, -<span class="number">1</span>):
</div>
<div class="line-context">
<span class="line-number">1174</span>                        <span class=<span class="string">"keyword"</span>>if</span> collected_tokens[j].type == TokenType.LBRACKET:
</div>
<div class="line-context">
<span class="line-number">1175</span>                            <span class="comment"># Found opening bracket, look <span class=<span class="string">"keyword"</span>>for</span> identifier before it</span>
</div>
<div class="line-context">
<span class="line-number">1176</span>                            <span class=<span class="string">"keyword"</span>>for</span> k <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(j - <span class="number">1</span>, start_idx, -<span class="number">1</span>):
</div>
<div class="line-context">
<span class="line-number">1177</span>                                <span class=<span class="string">"keyword"</span>>if</span> collected_tokens[k].type == TokenType.IDENTIFIER:
</div>
<div class="line-context">
<span class="line-number">1178</span>                                    var_name = collected_tokens[k].value
</div>
<div class="line-context">
<span class="line-number">1179</span>                                    type_tokens = collected_tokens[start_idx:k]
</div>
<div class="line-context">
<span class="line-number">1180</span>                                    var_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> type_tokens)
</div>
<div class="line-context">
<span class="line-number">1181</span>                                    <span class=<span class="string">"keyword"</span>>return</span> (var_name, var_type, <span class=<span class="string">"keyword"</span>>None</span>)
</div>
<div class="line-uncovered">
<span class="line-number">1182</span>                            <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1183</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">1184</span>                    <span class="comment"># Regular variable: last token <span class=<span class="string">"keyword"</span>>is</span> the name</span>
</div>
<div class="line-context">
<span class="line-number">1185</span>                    var_name = collected_tokens[-<span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">1186</span>                    type_tokens = collected_tokens[start_idx:-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">1187</span>                    var_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> type_tokens)
</div>
<div class="line-context">
<span class="line-number">1188</span>                    <span class=<span class="string">"keyword"</span>>return</span> (var_name, var_type, <span class=<span class="string">"keyword"</span>>None</span>)
</div>
<div class="line-context">
<span class="line-number">1189</span>
</div>
<div class="line-context">
<span class="line-number">1190</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1191</span>
</div>
<div class="line-context">
<span class="line-number">1192</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_skip_to_semicolon</span>(self, tokens, start_pos):
</div>
</div>
<h4>Lines 1202-1203</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1192</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_skip_to_semicolon</span>(self, tokens, start_pos):
</div>
<div class="line-context">
<span class="line-number">1193</span>        <span class="string">""</span><span class="string">"Skip to the next semicolon"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1194</span>        i = start_pos
</div>
<div class="line-context">
<span class="line-number">1195</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[i].type != TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">1196</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1197</span>        <span class=<span class="string">"keyword"</span>>return</span> i + <span class="number">1</span> <span class=<span class="string">"keyword"</span>>if</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>else</span> i
</div>
<div class="line-context">
<span class="line-number">1198</span>
</div>
<div class="line-context">
<span class="line-number">1199</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_skip_preprocessor_directives</span>(self, tokens, start_pos):
</div>
<div class="line-context">
<span class="line-number">1200</span>        <span class="string">""</span><span class="string">"Skip preprocessor directives but keep their content <span class="</span>keyword<span class="string">">for</span> parsing"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1201</span>        <span class="comment"># This method <span class=<span class="string">"keyword"</span>>is</span> deprecated - use the PreprocessorManager instead</span>
</div>
<div class="line-uncovered">
<span class="line-number">1202</span>        i = start_pos
</div>
<div class="line-uncovered">
<span class="line-number">1203</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[i].type == TokenType.PREPROCESSOR:
</div>
<div class="line-context">
<span class="line-number">1204</span>            <span class="comment"># Skip the preprocessor directive itself</span>
</div>
<div class="line-context">
<span class="line-number">1205</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1206</span>        <span class=<span class="string">"keyword"</span>>return</span> i
</div>
<div class="line-context">
<span class="line-number">1207</span>
</div>
<div class="line-context">
<span class="line-number">1208</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_function_parameters</span>(self, tokens, start_pos, end_pos, func_name):
</div>
<div class="line-context">
<span class="line-number">1209</span>        <span class="string">""</span><span class="string">"Parse function parameters <span class="</span>keyword<span class="string">">from</span> token range"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1210</span>
</div>
<div class="line-context">
<span class="line-number">1211</span>        parameters = []
</div>
<div class="line-context">
<span class="line-number">1212</span>
</div>
<div class="line-context">
<span class="line-number">1213</span>        <span class="comment"># Find the opening parenthesis <span class=<span class="string">"keyword"</span>>for</span> the function</span>
</div>
</div>
<h4>Lines 1205-1206</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1195</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[i].type != TokenType.SEMICOLON:
</div>
<div class="line-context">
<span class="line-number">1196</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1197</span>        <span class=<span class="string">"keyword"</span>>return</span> i + <span class="number">1</span> <span class=<span class="string">"keyword"</span>>if</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>else</span> i
</div>
<div class="line-context">
<span class="line-number">1198</span>
</div>
<div class="line-context">
<span class="line-number">1199</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_skip_preprocessor_directives</span>(self, tokens, start_pos):
</div>
<div class="line-context">
<span class="line-number">1200</span>        <span class="string">""</span><span class="string">"Skip preprocessor directives but keep their content <span class="</span>keyword<span class="string">">for</span> parsing"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1201</span>        <span class="comment"># This method <span class=<span class="string">"keyword"</span>>is</span> deprecated - use the PreprocessorManager instead</span>
</div>
<div class="line-context">
<span class="line-number">1202</span>        i = start_pos
</div>
<div class="line-context">
<span class="line-number">1203</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens) <span class=<span class="string">"keyword"</span>>and</span> tokens[i].type == TokenType.PREPROCESSOR:
</div>
<div class="line-context">
<span class="line-number">1204</span>            <span class="comment"># Skip the preprocessor directive itself</span>
</div>
<div class="line-uncovered">
<span class="line-number">1205</span>            i += <span class="number">1</span>
</div>
<div class="line-uncovered">
<span class="line-number">1206</span>        <span class=<span class="string">"keyword"</span>>return</span> i
</div>
<div class="line-context">
<span class="line-number">1207</span>
</div>
<div class="line-context">
<span class="line-number">1208</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_function_parameters</span>(self, tokens, start_pos, end_pos, func_name):
</div>
<div class="line-context">
<span class="line-number">1209</span>        <span class="string">""</span><span class="string">"Parse function parameters <span class="</span>keyword<span class="string">">from</span> token range"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1210</span>
</div>
<div class="line-context">
<span class="line-number">1211</span>        parameters = []
</div>
<div class="line-context">
<span class="line-number">1212</span>
</div>
<div class="line-context">
<span class="line-number">1213</span>        <span class="comment"># Find the opening parenthesis <span class=<span class="string">"keyword"</span>>for</span> the function</span>
</div>
<div class="line-context">
<span class="line-number">1214</span>        paren_start = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1215</span>        paren_end = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1216</span>
</div>
</div>
<h4>Line 1224</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1214</span>        paren_start = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1215</span>        paren_end = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1216</span>
</div>
<div class="line-context">
<span class="line-number">1217</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(start_pos, <span class="function">min</span>(end_pos + <span class="number">1</span>, <span class="function">len</span>(tokens))):
</div>
<div class="line-context">
<span class="line-number">1218</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type == TokenType.IDENTIFIER <span class=<span class="string">"keyword"</span>>and</span> tokens[i].value == func_name:
</div>
<div class="line-context">
<span class="line-number">1219</span>                <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> opening parenthesis after function name</span>
</div>
<div class="line-context">
<span class="line-number">1220</span>                <span class=<span class="string">"keyword"</span>>for</span> j <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(i + <span class="number">1</span>, <span class="function">min</span>(end_pos + <span class="number">1</span>, <span class="function">len</span>(tokens))):
</div>
<div class="line-context">
<span class="line-number">1221</span>                    <span class=<span class="string">"keyword"</span>>if</span> tokens[j].type == TokenType.LPAREN:
</div>
<div class="line-context">
<span class="line-number">1222</span>                        paren_start = j
</div>
<div class="line-context">
<span class="line-number">1223</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-uncovered">
<span class="line-number">1224</span>                    <span class=<span class="string">"keyword"</span>>elif</span> tokens[j].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">1225</span>                        TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">1226</span>                        TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">1227</span>                    ]:
</div>
<div class="line-context">
<span class="line-number">1228</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1229</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1230</span>
</div>
<div class="line-context">
<span class="line-number">1231</span>        <span class=<span class="string">"keyword"</span>>if</span> paren_start <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">1232</span>            <span class=<span class="string">"keyword"</span>>return</span> parameters
</div>
<div class="line-context">
<span class="line-number">1233</span>
</div>
<div class="line-context">
<span class="line-number">1234</span>        <span class="comment"># Find matching closing parenthesis</span>
</div>
</div>
<h4>Line 1228</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1218</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type == TokenType.IDENTIFIER <span class=<span class="string">"keyword"</span>>and</span> tokens[i].value == func_name:
</div>
<div class="line-context">
<span class="line-number">1219</span>                <span class="comment"># Look <span class=<span class="string">"keyword"</span>>for</span> opening parenthesis after function name</span>
</div>
<div class="line-context">
<span class="line-number">1220</span>                <span class=<span class="string">"keyword"</span>>for</span> j <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(i + <span class="number">1</span>, <span class="function">min</span>(end_pos + <span class="number">1</span>, <span class="function">len</span>(tokens))):
</div>
<div class="line-context">
<span class="line-number">1221</span>                    <span class=<span class="string">"keyword"</span>>if</span> tokens[j].type == TokenType.LPAREN:
</div>
<div class="line-context">
<span class="line-number">1222</span>                        paren_start = j
</div>
<div class="line-context">
<span class="line-number">1223</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1224</span>                    <span class=<span class="string">"keyword"</span>>elif</span> tokens[j].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">1225</span>                        TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">1226</span>                        TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">1227</span>                    ]:
</div>
<div class="line-uncovered">
<span class="line-number">1228</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1229</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1230</span>
</div>
<div class="line-context">
<span class="line-number">1231</span>        <span class=<span class="string">"keyword"</span>>if</span> paren_start <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-context">
<span class="line-number">1232</span>            <span class=<span class="string">"keyword"</span>>return</span> parameters
</div>
<div class="line-context">
<span class="line-number">1233</span>
</div>
<div class="line-context">
<span class="line-number">1234</span>        <span class="comment"># Find matching closing parenthesis</span>
</div>
<div class="line-context">
<span class="line-number">1235</span>        paren_depth = <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1236</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(paren_start + <span class="number">1</span>, <span class="function">min</span>(end_pos + <span class="number">1</span>, <span class="function">len</span>(tokens))):
</div>
<div class="line-context">
<span class="line-number">1237</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type == TokenType.LPAREN:
</div>
<div class="line-context">
<span class="line-number">1238</span>                paren_depth += <span class="number">1</span>
</div>
</div>
<h4>Line 1232</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1222</span>                        paren_start = j
</div>
<div class="line-context">
<span class="line-number">1223</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1224</span>                    <span class=<span class="string">"keyword"</span>>elif</span> tokens[j].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [
</div>
<div class="line-context">
<span class="line-number">1225</span>                        TokenType.WHITESPACE,
</div>
<div class="line-context">
<span class="line-number">1226</span>                        TokenType.COMMENT,
</div>
<div class="line-context">
<span class="line-number">1227</span>                    ]:
</div>
<div class="line-context">
<span class="line-number">1228</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1229</span>                <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1230</span>
</div>
<div class="line-context">
<span class="line-number">1231</span>        <span class=<span class="string">"keyword"</span>>if</span> paren_start <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number">1232</span>            <span class=<span class="string">"keyword"</span>>return</span> parameters
</div>
<div class="line-context">
<span class="line-number">1233</span>
</div>
<div class="line-context">
<span class="line-number">1234</span>        <span class="comment"># Find matching closing parenthesis</span>
</div>
<div class="line-context">
<span class="line-number">1235</span>        paren_depth = <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1236</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(paren_start + <span class="number">1</span>, <span class="function">min</span>(end_pos + <span class="number">1</span>, <span class="function">len</span>(tokens))):
</div>
<div class="line-context">
<span class="line-number">1237</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type == TokenType.LPAREN:
</div>
<div class="line-context">
<span class="line-number">1238</span>                paren_depth += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1239</span>            <span class=<span class="string">"keyword"</span>>elif</span> tokens[i].type == TokenType.RPAREN:
</div>
<div class="line-context">
<span class="line-number">1240</span>                paren_depth -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1241</span>                <span class=<span class="string">"keyword"</span>>if</span> paren_depth == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">1242</span>                    paren_end = i
</div>
</div>
<h4>Line 1246</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1236</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(paren_start + <span class="number">1</span>, <span class="function">min</span>(end_pos + <span class="number">1</span>, <span class="function">len</span>(tokens))):
</div>
<div class="line-context">
<span class="line-number">1237</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type == TokenType.LPAREN:
</div>
<div class="line-context">
<span class="line-number">1238</span>                paren_depth += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1239</span>            <span class=<span class="string">"keyword"</span>>elif</span> tokens[i].type == TokenType.RPAREN:
</div>
<div class="line-context">
<span class="line-number">1240</span>                paren_depth -= <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">1241</span>                <span class=<span class="string">"keyword"</span>>if</span> paren_depth == <span class="number">0</span>:
</div>
<div class="line-context">
<span class="line-number">1242</span>                    paren_end = i
</div>
<div class="line-context">
<span class="line-number">1243</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">1244</span>
</div>
<div class="line-context">
<span class="line-number">1245</span>        <span class=<span class="string">"keyword"</span>>if</span> paren_end <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>None</span>:
</div>
<div class="line-uncovered">
<span class="line-number">1246</span>            <span class=<span class="string">"keyword"</span>>return</span> parameters
</div>
<div class="line-context">
<span class="line-number">1247</span>
</div>
<div class="line-context">
<span class="line-number">1248</span>        <span class="comment"># Parse parameter tokens between parentheses</span>
</div>
<div class="line-context">
<span class="line-number">1249</span>        param_tokens = []
</div>
<div class="line-context">
<span class="line-number">1250</span>        <span class=<span class="string">"keyword"</span>>for</span> i <span class=<span class="string">"keyword"</span>>in</span> <span class="function">range</span>(paren_start + <span class="number">1</span>, paren_end):
</div>
<div class="line-context">
<span class="line-number">1251</span>            <span class=<span class="string">"keyword"</span>>if</span> tokens[i].type <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> [TokenType.WHITESPACE, TokenType.COMMENT]:
</div>
<div class="line-context">
<span class="line-number">1252</span>                param_tokens.<span class="function">append</span>(tokens[i])
</div>
<div class="line-context">
<span class="line-number">1253</span>
</div>
<div class="line-context">
<span class="line-number">1254</span>        <span class="comment"># If no parameters <span class=<span class="string">"keyword"</span>>or</span> just <span class="string">"void"</span>, <span class=<span class="string">"keyword"</span>>return</span> empty list</span>
</div>
<div class="line-context">
<span class="line-number">1255</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> param_tokens <span class=<span class="string">"keyword"</span>>or</span> (
</div>
<div class="line-context">
<span class="line-number">1256</span>            <span class="function">len</span>(param_tokens) == <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> param_tokens[<span class="number">0</span>].value == <span class="string">"void"</span>
</div>
</div>
<h4>Line 1285</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1275</span>            <span class=<span class="string">"keyword"</span>>if</span> param:
</div>
<div class="line-context">
<span class="line-number">1276</span>                parameters.<span class="function">append</span>(param)
</div>
<div class="line-context">
<span class="line-number">1277</span>
</div>
<div class="line-context">
<span class="line-number">1278</span>        <span class=<span class="string">"keyword"</span>>return</span> parameters
</div>
<div class="line-context">
<span class="line-number">1279</span>
</div>
<div class="line-context">
<span class="line-number">1280</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_single_parameter</span>(self, param_tokens):
</div>
<div class="line-context">
<span class="line-number">1281</span>        <span class="string">""</span><span class="string">"Parse a single function parameter <span class="</span>keyword<span class="string">">from</span> tokens"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1282</span>        <span class=<span class="string">"keyword"</span>>from</span> .models <span class=<span class="string">"keyword"</span>>import</span> Field
</div>
<div class="line-context">
<span class="line-number">1283</span>
</div>
<div class="line-context">
<span class="line-number">1284</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> param_tokens:
</div>
<div class="line-uncovered">
<span class="line-number">1285</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1286</span>
</div>
<div class="line-context">
<span class="line-number">1287</span>        <span class="comment"># Handle variadic <span class="function">parameters</span>(three consecutive dots)</span>
</div>
<div class="line-context">
<span class="line-number">1288</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">len</span>(param_tokens) == <span class="number">3</span> <span class=<span class="string">"keyword"</span>>and</span> <span class="function">all</span>(t.value == <span class="string">"."</span> <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> param_tokens):
</div>
<div class="line-context">
<span class="line-number">1289</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"..."</span>, type=<span class="string">"..."</span>)
</div>
<div class="line-context">
<span class="line-number">1290</span>
</div>
<div class="line-context">
<span class="line-number">1291</span>        <span class="comment"># Handle variadic <span class="function">parameters</span>(single ... token)</span>
</div>
<div class="line-context">
<span class="line-number">1292</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">len</span>(param_tokens) == <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> param_tokens[<span class="number">0</span>].value == <span class="string">"..."</span>:
</div>
<div class="line-context">
<span class="line-number">1293</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"..."</span>, type=<span class="string">"..."</span>)
</div>
<div class="line-context">
<span class="line-number">1294</span>
</div>
<div class="line-context">
<span class="line-number">1295</span>        <span class="comment"># For parameters like <span class="string">"int x"</span> <span class=<span class="string">"keyword"</span>>or</span> <span class="string">"const char *name"</span></span>
</div>
</div>
<h4>Line 1293</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1283</span>
</div>
<div class="line-context">
<span class="line-number">1284</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> param_tokens:
</div>
<div class="line-context">
<span class="line-number">1285</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1286</span>
</div>
<div class="line-context">
<span class="line-number">1287</span>        <span class="comment"># Handle variadic <span class="function">parameters</span>(three consecutive dots)</span>
</div>
<div class="line-context">
<span class="line-number">1288</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">len</span>(param_tokens) == <span class="number">3</span> <span class=<span class="string">"keyword"</span>>and</span> <span class="function">all</span>(t.value == <span class="string">"."</span> <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> param_tokens):
</div>
<div class="line-context">
<span class="line-number">1289</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"..."</span>, type=<span class="string">"..."</span>)
</div>
<div class="line-context">
<span class="line-number">1290</span>
</div>
<div class="line-context">
<span class="line-number">1291</span>        <span class="comment"># Handle variadic <span class="function">parameters</span>(single ... token)</span>
</div>
<div class="line-context">
<span class="line-number">1292</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">len</span>(param_tokens) == <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> param_tokens[<span class="number">0</span>].value == <span class="string">"..."</span>:
</div>
<div class="line-uncovered">
<span class="line-number">1293</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"..."</span>, type=<span class="string">"..."</span>)
</div>
<div class="line-context">
<span class="line-number">1294</span>
</div>
<div class="line-context">
<span class="line-number">1295</span>        <span class="comment"># For parameters like <span class="string">"int x"</span> <span class=<span class="string">"keyword"</span>>or</span> <span class="string">"const char *name"</span></span>
</div>
<div class="line-context">
<span class="line-number">1296</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">len</span>(param_tokens) >= <span class="number">2</span>:
</div>
<div class="line-context">
<span class="line-number">1297</span>            <span class="comment"># Last token <span class=<span class="string">"keyword"</span>>is</span> usually the parameter name</span>
</div>
<div class="line-context">
<span class="line-number">1298</span>            param_name = param_tokens[-<span class="number">1</span>].value
</div>
<div class="line-context">
<span class="line-number">1299</span>            type_tokens = param_tokens[:-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">1300</span>            param_type = <span class="string">" "</span>.<span class="function">join</span>(t.value <span class=<span class="string">"keyword"</span>>for</span> t <span class=<span class="string">"keyword"</span>>in</span> type_tokens)
</div>
<div class="line-context">
<span class="line-number">1301</span>
</div>
<div class="line-context">
<span class="line-number">1302</span>            <span class="comment"># Handle unnamed <span class="function">parameters</span>(just type)</span>
</div>
<div class="line-context">
<span class="line-number">1303</span>            <span class=<span class="string">"keyword"</span>>if</span> param_name <span class=<span class="string">"keyword"</span>>in</span> [
</div>
</div>
<h4>Lines 1340-1341</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1330</span>                <span class="string">"float"</span>,
</div>
<div class="line-context">
<span class="line-number">1331</span>                <span class="string">"double"</span>,
</div>
<div class="line-context">
<span class="line-number">1332</span>                <span class="string">"long"</span>,
</div>
<div class="line-context">
<span class="line-number">1333</span>                <span class="string">"short"</span>,
</div>
<div class="line-context">
<span class="line-number">1334</span>                <span class="string">"unsigned"</span>,
</div>
<div class="line-context">
<span class="line-number">1335</span>                <span class="string">"signed"</span>,
</div>
<div class="line-context">
<span class="line-number">1336</span>            ]:
</div>
<div class="line-context">
<span class="line-number">1337</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"unnamed"</span>, type=token_value)
</div>
<div class="line-context">
<span class="line-number">1338</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">1339</span>                <span class="comment"># If we can<span class="string">'t determine the type, use '</span>unknown' <span class=<span class="string">"keyword"</span>>as</span> a fallback</span>
</div>
<div class="line-uncovered">
<span class="line-number">1340</span>                <span class=<span class="string">"keyword"</span>>if</span> token_value <span class=<span class="string">"keyword"</span>>and</span> token_value.<span class="function">strip</span>():
</div>
<div class="line-uncovered">
<span class="line-number">1341</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=token_value.<span class="function">strip</span>(), type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1342</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">1343</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"unnamed"</span>, type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1344</span>
</div>
<div class="line-context">
<span class="line-number">1345</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1346</span>
</div>
<div class="line-context">
<span class="line-number">1347</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_get_timestamp</span>(self) -> str:
</div>
<div class="line-context">
<span class="line-number">1348</span>        <span class="string">""</span><span class="string">"Get current timestamp string"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1349</span>        <span class=<span class="string">"keyword"</span>>from</span> datetime <span class=<span class="string">"keyword"</span>>import</span> datetime
</div>
<div class="line-context">
<span class="line-number">1350</span>
</div>
<div class="line-context">
<span class="line-number">1351</span>        <span class=<span class="string">"keyword"</span>>return</span> datetime.<span class="function">now</span>().<span class="function">isoformat</span>()
</div>
</div>
<h4>Line 1343</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1333</span>                <span class="string">"short"</span>,
</div>
<div class="line-context">
<span class="line-number">1334</span>                <span class="string">"unsigned"</span>,
</div>
<div class="line-context">
<span class="line-number">1335</span>                <span class="string">"signed"</span>,
</div>
<div class="line-context">
<span class="line-number">1336</span>            ]:
</div>
<div class="line-context">
<span class="line-number">1337</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"unnamed"</span>, type=token_value)
</div>
<div class="line-context">
<span class="line-number">1338</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">1339</span>                <span class="comment"># If we can<span class="string">'t determine the type, use '</span>unknown' <span class=<span class="string">"keyword"</span>>as</span> a fallback</span>
</div>
<div class="line-context">
<span class="line-number">1340</span>                <span class=<span class="string">"keyword"</span>>if</span> token_value <span class=<span class="string">"keyword"</span>>and</span> token_value.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">1341</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=token_value.<span class="function">strip</span>(), type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1342</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">1343</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"unnamed"</span>, type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1344</span>
</div>
<div class="line-context">
<span class="line-number">1345</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1346</span>
</div>
<div class="line-context">
<span class="line-number">1347</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_get_timestamp</span>(self) -> str:
</div>
<div class="line-context">
<span class="line-number">1348</span>        <span class="string">""</span><span class="string">"Get current timestamp string"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1349</span>        <span class=<span class="string">"keyword"</span>>from</span> datetime <span class=<span class="string">"keyword"</span>>import</span> datetime
</div>
<div class="line-context">
<span class="line-number">1350</span>
</div>
<div class="line-context">
<span class="line-number">1351</span>        <span class=<span class="string">"keyword"</span>>return</span> datetime.<span class="function">now</span>().<span class="function">isoformat</span>()
</div>
<div class="line-context">
<span class="line-number">1352</span>
</div>
<div class="line-context">
<span class="line-number">1353</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_failed_includes_cache_stats</span>(self) -> dict:
</div>
</div>
<h4>Line 1345</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1335</span>                <span class="string">"signed"</span>,
</div>
<div class="line-context">
<span class="line-number">1336</span>            ]:
</div>
<div class="line-context">
<span class="line-number">1337</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"unnamed"</span>, type=token_value)
</div>
<div class="line-context">
<span class="line-number">1338</span>            <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">1339</span>                <span class="comment"># If we can<span class="string">'t determine the type, use '</span>unknown' <span class=<span class="string">"keyword"</span>>as</span> a fallback</span>
</div>
<div class="line-context">
<span class="line-number">1340</span>                <span class=<span class="string">"keyword"</span>>if</span> token_value <span class=<span class="string">"keyword"</span>>and</span> token_value.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">1341</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=token_value.<span class="function">strip</span>(), type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1342</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">1343</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"unnamed"</span>, type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1344</span>
</div>
<div class="line-uncovered">
<span class="line-number">1345</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1346</span>
</div>
<div class="line-context">
<span class="line-number">1347</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_get_timestamp</span>(self) -> str:
</div>
<div class="line-context">
<span class="line-number">1348</span>        <span class="string">""</span><span class="string">"Get current timestamp string"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1349</span>        <span class=<span class="string">"keyword"</span>>from</span> datetime <span class=<span class="string">"keyword"</span>>import</span> datetime
</div>
<div class="line-context">
<span class="line-number">1350</span>
</div>
<div class="line-context">
<span class="line-number">1351</span>        <span class=<span class="string">"keyword"</span>>return</span> datetime.<span class="function">now</span>().<span class="function">isoformat</span>()
</div>
<div class="line-context">
<span class="line-number">1352</span>
</div>
<div class="line-context">
<span class="line-number">1353</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_failed_includes_cache_stats</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">1354</span>        <span class="string">""</span><span class="string">"Get statistics about the failed includes cache"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1355</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
</div>
<h4>Line 1349</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1339</span>                <span class="comment"># If we can<span class="string">'t determine the type, use '</span>unknown' <span class=<span class="string">"keyword"</span>>as</span> a fallback</span>
</div>
<div class="line-context">
<span class="line-number">1340</span>                <span class=<span class="string">"keyword"</span>>if</span> token_value <span class=<span class="string">"keyword"</span>>and</span> token_value.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number">1341</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=token_value.<span class="function">strip</span>(), type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1342</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">1343</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"unnamed"</span>, type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1344</span>
</div>
<div class="line-context">
<span class="line-number">1345</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1346</span>
</div>
<div class="line-context">
<span class="line-number">1347</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_get_timestamp</span>(self) -> str:
</div>
<div class="line-context">
<span class="line-number">1348</span>        <span class="string">""</span><span class="string">"Get current timestamp string"</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number">1349</span>        <span class=<span class="string">"keyword"</span>>from</span> datetime <span class=<span class="string">"keyword"</span>>import</span> datetime
</div>
<div class="line-context">
<span class="line-number">1350</span>
</div>
<div class="line-context">
<span class="line-number">1351</span>        <span class=<span class="string">"keyword"</span>>return</span> datetime.<span class="function">now</span>().<span class="function">isoformat</span>()
</div>
<div class="line-context">
<span class="line-number">1352</span>
</div>
<div class="line-context">
<span class="line-number">1353</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_failed_includes_cache_stats</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">1354</span>        <span class="string">""</span><span class="string">"Get statistics about the failed includes cache"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1355</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
<div class="line-context">
<span class="line-number">1356</span>            <span class="string">"cache_size"</span>: <span class="function">len</span>(self._failed_includes_cache),
</div>
<div class="line-context">
<span class="line-number">1357</span>            <span class="string">"cached_includes"</span>: <span class="function">list</span>(self._failed_includes_cache),
</div>
<div class="line-context">
<span class="line-number">1358</span>        }
</div>
<div class="line-context">
<span class="line-number">1359</span>
</div>
</div>
<h4>Line 1351</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1341</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=token_value.<span class="function">strip</span>(), type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1342</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">1343</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Field</span>(name=<span class="string">"unnamed"</span>, type=<span class="string">"unknown"</span>)
</div>
<div class="line-context">
<span class="line-number">1344</span>
</div>
<div class="line-context">
<span class="line-number">1345</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1346</span>
</div>
<div class="line-context">
<span class="line-number">1347</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_get_timestamp</span>(self) -> str:
</div>
<div class="line-context">
<span class="line-number">1348</span>        <span class="string">""</span><span class="string">"Get current timestamp string"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1349</span>        <span class=<span class="string">"keyword"</span>>from</span> datetime <span class=<span class="string">"keyword"</span>>import</span> datetime
</div>
<div class="line-context">
<span class="line-number">1350</span>
</div>
<div class="line-uncovered">
<span class="line-number">1351</span>        <span class=<span class="string">"keyword"</span>>return</span> datetime.<span class="function">now</span>().<span class="function">isoformat</span>()
</div>
<div class="line-context">
<span class="line-number">1352</span>
</div>
<div class="line-context">
<span class="line-number">1353</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_failed_includes_cache_stats</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">1354</span>        <span class="string">""</span><span class="string">"Get statistics about the failed includes cache"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1355</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
<div class="line-context">
<span class="line-number">1356</span>            <span class="string">"cache_size"</span>: <span class="function">len</span>(self._failed_includes_cache),
</div>
<div class="line-context">
<span class="line-number">1357</span>            <span class="string">"cached_includes"</span>: <span class="function">list</span>(self._failed_includes_cache),
</div>
<div class="line-context">
<span class="line-number">1358</span>        }
</div>
<div class="line-context">
<span class="line-number">1359</span>
</div>
<div class="line-context">
<span class="line-number">1360</span>
</div>
<div class="line-context">
<span class="line-number">1361</span><span class=<span class="string">"keyword"</span>>class</span> Parser:
</div>
</div>
<h4>Line 1355</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">1345</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">1346</span>
</div>
<div class="line-context">
<span class="line-number">1347</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_get_timestamp</span>(self) -> str:
</div>
<div class="line-context">
<span class="line-number">1348</span>        <span class="string">""</span><span class="string">"Get current timestamp string"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1349</span>        <span class=<span class="string">"keyword"</span>>from</span> datetime <span class=<span class="string">"keyword"</span>>import</span> datetime
</div>
<div class="line-context">
<span class="line-number">1350</span>
</div>
<div class="line-context">
<span class="line-number">1351</span>        <span class=<span class="string">"keyword"</span>>return</span> datetime.<span class="function">now</span>().<span class="function">isoformat</span>()
</div>
<div class="line-context">
<span class="line-number">1352</span>
</div>
<div class="line-context">
<span class="line-number">1353</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_failed_includes_cache_stats</span>(self) -> dict:
</div>
<div class="line-context">
<span class="line-number">1354</span>        <span class="string">""</span><span class="string">"Get statistics about the failed includes cache"</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number">1355</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
<div class="line-context">
<span class="line-number">1356</span>            <span class="string">"cache_size"</span>: <span class="function">len</span>(self._failed_includes_cache),
</div>
<div class="line-context">
<span class="line-number">1357</span>            <span class="string">"cached_includes"</span>: <span class="function">list</span>(self._failed_includes_cache),
</div>
<div class="line-context">
<span class="line-number">1358</span>        }
</div>
<div class="line-context">
<span class="line-number">1359</span>
</div>
<div class="line-context">
<span class="line-number">1360</span>
</div>
<div class="line-context">
<span class="line-number">1361</span><span class=<span class="string">"keyword"</span>>class</span> Parser:
</div>
<div class="line-context">
<span class="line-number">1362</span>    <span class="string">""</span><span class="string">"Main parser <span class="</span>keyword<span class="string">">class</span> <span class="</span>keyword<span class="string">">for</span> Step <span class="number">1</span>: Parse C code files <span class="</span>keyword<span class="string">">and</span> generate model.json"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">1363</span>
</div>
<div class="line-context">
<span class="line-number">1364</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">1365</span>        self.c_parser = <span class="function">CParser</span>()
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/preprocessor.py
<span class="coverage-info">65.76% (194/295 lines covered)</span>
</div>
<h4>Lines 54-56</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 44</span>
</div>
<div class="line-context">
<span class="line-number"> 45</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__init__</span>(self):
</div>
<div class="line-context">
<span class="line-number"> 46</span>        self.logger = logging.<span class="function">getLogger</span>(__name__)
</div>
<div class="line-context">
<span class="line-number"> 47</span>        self.defined_macros: Set[str] = <span class="function">set</span>()
</div>
<div class="line-context">
<span class="line-number"> 48</span>        self.macro_values: Dict[str, str] = {}
</div>
<div class="line-context">
<span class="line-number"> 49</span>        self.blocks: List[PreprocessorBlock] = []
</div>
<div class="line-context">
<span class="line-number"> 50</span>        self.current_block_stack: List[PreprocessorBlock] = []
</div>
<div class="line-context">
<span class="line-number"> 51</span>
</div>
<div class="line-context">
<span class="line-number"> 52</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">add_define</span>(self, name: str, value: str = <span class="string">""</span>):
</div>
<div class="line-context">
<span class="line-number"> 53</span>        <span class="string">""</span><span class="string">"Add a defined macro."</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 54</span>        self.defined_macros.<span class="function">add</span>(name)
</div>
<div class="line-uncovered">
<span class="line-number"> 55</span>        <span class=<span class="string">"keyword"</span>>if</span> value:
</div>
<div class="line-uncovered">
<span class="line-number"> 56</span>            self.macro_values[name] = value
</div>
<div class="line-context">
<span class="line-number"> 57</span>
</div>
<div class="line-context">
<span class="line-number"> 58</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">add_undef</span>(self, name: str):
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class="string">""</span><span class="string">"Remove a defined macro."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 60</span>        self.defined_macros.<span class="function">discard</span>(name)
</div>
<div class="line-context">
<span class="line-number"> 61</span>        self.macro_values.<span class="function">pop</span>(name, <span class=<span class="string">"keyword"</span>>None</span>)
</div>
<div class="line-context">
<span class="line-number"> 62</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">is_defined</span>(self, name: str) -> bool:
</div>
<div class="line-context">
<span class="line-number"> 64</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a macro <span class="</span>keyword<span class="string">">is</span> defined."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class=<span class="string">"keyword"</span>>return</span> name <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros
</div>
<div class="line-context">
<span class="line-number"> 66</span>
</div>
</div>
<h4>Lines 60-61</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 50</span>        self.current_block_stack: List[PreprocessorBlock] = []
</div>
<div class="line-context">
<span class="line-number"> 51</span>
</div>
<div class="line-context">
<span class="line-number"> 52</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">add_define</span>(self, name: str, value: str = <span class="string">""</span>):
</div>
<div class="line-context">
<span class="line-number"> 53</span>        <span class="string">""</span><span class="string">"Add a defined macro."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 54</span>        self.defined_macros.<span class="function">add</span>(name)
</div>
<div class="line-context">
<span class="line-number"> 55</span>        <span class=<span class="string">"keyword"</span>>if</span> value:
</div>
<div class="line-context">
<span class="line-number"> 56</span>            self.macro_values[name] = value
</div>
<div class="line-context">
<span class="line-number"> 57</span>
</div>
<div class="line-context">
<span class="line-number"> 58</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">add_undef</span>(self, name: str):
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class="string">""</span><span class="string">"Remove a defined macro."</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 60</span>        self.defined_macros.<span class="function">discard</span>(name)
</div>
<div class="line-uncovered">
<span class="line-number"> 61</span>        self.macro_values.<span class="function">pop</span>(name, <span class=<span class="string">"keyword"</span>>None</span>)
</div>
<div class="line-context">
<span class="line-number"> 62</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">is_defined</span>(self, name: str) -> bool:
</div>
<div class="line-context">
<span class="line-number"> 64</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a macro <span class="</span>keyword<span class="string">">is</span> defined."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class=<span class="string">"keyword"</span>>return</span> name <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros
</div>
<div class="line-context">
<span class="line-number"> 66</span>
</div>
<div class="line-context">
<span class="line-number"> 67</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_macro_value</span>(self, name: str) -> str:
</div>
<div class="line-context">
<span class="line-number"> 68</span>        <span class="string">""</span><span class="string">"Get the value of a defined macro."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 69</span>        <span class=<span class="string">"keyword"</span>>return</span> self.macro_values.<span class="function">get</span>(name, <span class="string">""</span>)
</div>
<div class="line-context">
<span class="line-number"> 70</span>
</div>
<div class="line-context">
<span class="line-number"> 71</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">evaluate_condition</span>(self, condition: str) -> bool:
</div>
</div>
<h4>Line 69</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 59</span>        <span class="string">""</span><span class="string">"Remove a defined macro."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 60</span>        self.defined_macros.<span class="function">discard</span>(name)
</div>
<div class="line-context">
<span class="line-number"> 61</span>        self.macro_values.<span class="function">pop</span>(name, <span class=<span class="string">"keyword"</span>>None</span>)
</div>
<div class="line-context">
<span class="line-number"> 62</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">is_defined</span>(self, name: str) -> bool:
</div>
<div class="line-context">
<span class="line-number"> 64</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a macro <span class="</span>keyword<span class="string">">is</span> defined."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class=<span class="string">"keyword"</span>>return</span> name <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros
</div>
<div class="line-context">
<span class="line-number"> 66</span>
</div>
<div class="line-context">
<span class="line-number"> 67</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_macro_value</span>(self, name: str) -> str:
</div>
<div class="line-context">
<span class="line-number"> 68</span>        <span class="string">""</span><span class="string">"Get the value of a defined macro."</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 69</span>        <span class=<span class="string">"keyword"</span>>return</span> self.macro_values.<span class="function">get</span>(name, <span class="string">""</span>)
</div>
<div class="line-context">
<span class="line-number"> 70</span>
</div>
<div class="line-context">
<span class="line-number"> 71</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">evaluate_condition</span>(self, condition: str) -> bool:
</div>
<div class="line-context">
<span class="line-number"> 72</span>        <span class="string">""</span><span class="string">"Evaluate a preprocessor condition."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 73</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> condition.<span class="function">strip</span>():
</div>
<div class="line-context">
<span class="line-number"> 74</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number"> 75</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>        <span class="comment"># Handle <span class="function">defined</span>() operator</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span>        condition = self.<span class="function">_expand_defined_operator</span>(condition)
</div>
<div class="line-context">
<span class="line-number"> 78</span>
</div>
<div class="line-context">
<span class="line-number"> 79</span>        <span class="comment"># Handle macro expansions</span>
</div>
</div>
<h4>Lines 103-104</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 93</span>        condition = re.<span class="function">sub</span>(
</div>
<div class="line-context">
<span class="line-number"> 94</span>            r<span class="string">"defined\s*\(\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*\)"</span>, replace_defined, condition
</div>
<div class="line-context">
<span class="line-number"> 95</span>        )
</div>
<div class="line-context">
<span class="line-number"> 96</span>        <span class=<span class="string">"keyword"</span>>return</span> condition
</div>
<div class="line-context">
<span class="line-number"> 97</span>
</div>
<div class="line-context">
<span class="line-number"> 98</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_expand_macros</span>(self, condition: str) -> str:
</div>
<div class="line-context">
<span class="line-number"> 99</span>        <span class="string">""</span><span class="string">"Expand macros <span class="</span>keyword<span class="string">">in</span> the condition."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">100</span>        <span class="comment"># Simple macro expansion <span class=<span class="string">"keyword"</span>>for</span> common cases</span>
</div>
<div class="line-context">
<span class="line-number">101</span>        <span class=<span class="string">"keyword"</span>>for</span> macro_name, macro_value <span class=<span class="string">"keyword"</span>>in</span> self.macro_values.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number">102</span>            <span class="comment"># Replace macro name <span class=<span class="string">"keyword"</span>>with</span> its value</span>
</div>
<div class="line-uncovered">
<span class="line-number">103</span>            pattern = r<span class="string">"\b"</span> + re.<span class="function">escape</span>(macro_name) + r<span class="string">"\b"</span>
</div>
<div class="line-uncovered">
<span class="line-number">104</span>            condition = re.<span class="function">sub</span>(pattern, macro_value, condition)
</div>
<div class="line-context">
<span class="line-number">105</span>        <span class=<span class="string">"keyword"</span>>return</span> condition
</div>
<div class="line-context">
<span class="line-number">106</span>
</div>
<div class="line-context">
<span class="line-number">107</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_evaluate_simple_expression</span>(self, condition: str) -> bool:
</div>
<div class="line-context">
<span class="line-number">108</span>        <span class="string">""</span><span class="string">"Evaluate simple expressions like comparisons <span class="</span>keyword<span class="string">">and</span> logical operators."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">109</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">110</span>            <span class="comment"># Handle common comparison operators</span>
</div>
<div class="line-context">
<span class="line-number">111</span>            condition = condition.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">112</span>
</div>
<div class="line-context">
<span class="line-number">113</span>            <span class="comment"># Handle simple boolean values</span>
</div>
<div class="line-context">
<span class="line-number">114</span>            <span class=<span class="string">"keyword"</span>>if</span> condition.<span class="function">lower</span>() <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"<span class="number">1</span>"</span>, <span class="string">"true"</span>, <span class="string">"yes"</span>]:
</div>
</div>
<h4>Line 115</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">105</span>        <span class=<span class="string">"keyword"</span>>return</span> condition
</div>
<div class="line-context">
<span class="line-number">106</span>
</div>
<div class="line-context">
<span class="line-number">107</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_evaluate_simple_expression</span>(self, condition: str) -> bool:
</div>
<div class="line-context">
<span class="line-number">108</span>        <span class="string">""</span><span class="string">"Evaluate simple expressions like comparisons <span class="</span>keyword<span class="string">">and</span> logical operators."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">109</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">110</span>            <span class="comment"># Handle common comparison operators</span>
</div>
<div class="line-context">
<span class="line-number">111</span>            condition = condition.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">112</span>
</div>
<div class="line-context">
<span class="line-number">113</span>            <span class="comment"># Handle simple boolean values</span>
</div>
<div class="line-context">
<span class="line-number">114</span>            <span class=<span class="string">"keyword"</span>>if</span> condition.<span class="function">lower</span>() <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"<span class="number">1</span>"</span>, <span class="string">"true"</span>, <span class="string">"yes"</span>]:
</div>
<div class="line-uncovered">
<span class="line-number">115</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">116</span>            <span class=<span class="string">"keyword"</span>>if</span> condition.<span class="function">lower</span>() <span class=<span class="string">"keyword"</span>>in</span> [<span class="string">"<span class="number">0</span>"</span>, <span class="string">"false"</span>, <span class="string">"no"</span>]:
</div>
<div class="line-context">
<span class="line-number">117</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">118</span>
</div>
<div class="line-context">
<span class="line-number">119</span>            <span class="comment"># Handle simple comparisons</span>
</div>
<div class="line-context">
<span class="line-number">120</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"=="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">121</span>                left, right = condition.<span class="function">split</span>(<span class="string">"=="</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">122</span>                left_val = left.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">123</span>                right_val = right.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">124</span>
</div>
<div class="line-context">
<span class="line-number">125</span>                <span class="comment"># If both sides are known macros, compare their values</span>
</div>
</div>
<h4>Line 127</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">117</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">118</span>
</div>
<div class="line-context">
<span class="line-number">119</span>            <span class="comment"># Handle simple comparisons</span>
</div>
<div class="line-context">
<span class="line-number">120</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"=="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">121</span>                left, right = condition.<span class="function">split</span>(<span class="string">"=="</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">122</span>                left_val = left.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">123</span>                right_val = right.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">124</span>
</div>
<div class="line-context">
<span class="line-number">125</span>                <span class="comment"># If both sides are known macros, compare their values</span>
</div>
<div class="line-context">
<span class="line-number">126</span>                <span class=<span class="string">"keyword"</span>>if</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros <span class=<span class="string">"keyword"</span>>and</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-uncovered">
<span class="line-number">127</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) == self.<span class="function">get_macro_value</span>(
</div>
<div class="line-context">
<span class="line-number">128</span>                        right_val
</div>
<div class="line-context">
<span class="line-number">129</span>                    )
</div>
<div class="line-context">
<span class="line-number">130</span>                <span class="comment"># If one side <span class=<span class="string">"keyword"</span>>is</span> a known macro, compare <span class=<span class="string">"keyword"</span>>with</span> the other side</span>
</div>
<div class="line-context">
<span class="line-number">131</span>                <span class=<span class="string">"keyword"</span>>elif</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">132</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) == right_val
</div>
<div class="line-context">
<span class="line-number">133</span>                <span class=<span class="string">"keyword"</span>>elif</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">134</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val == self.<span class="function">get_macro_value</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">135</span>                <span class="comment"># If neither side <span class=<span class="string">"keyword"</span>>is</span> a known macro, both are undefined, so they're equal</span>
</div>
<div class="line-context">
<span class="line-number">136</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">137</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>  <span class="comment"># Both undefined macros are considered equal</span>
</div>
</div>
<h4>Line 132</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">122</span>                left_val = left.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">123</span>                right_val = right.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">124</span>
</div>
<div class="line-context">
<span class="line-number">125</span>                <span class="comment"># If both sides are known macros, compare their values</span>
</div>
<div class="line-context">
<span class="line-number">126</span>                <span class=<span class="string">"keyword"</span>>if</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros <span class=<span class="string">"keyword"</span>>and</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">127</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) == self.<span class="function">get_macro_value</span>(
</div>
<div class="line-context">
<span class="line-number">128</span>                        right_val
</div>
<div class="line-context">
<span class="line-number">129</span>                    )
</div>
<div class="line-context">
<span class="line-number">130</span>                <span class="comment"># If one side <span class=<span class="string">"keyword"</span>>is</span> a known macro, compare <span class=<span class="string">"keyword"</span>>with</span> the other side</span>
</div>
<div class="line-context">
<span class="line-number">131</span>                <span class=<span class="string">"keyword"</span>>elif</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-uncovered">
<span class="line-number">132</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) == right_val
</div>
<div class="line-context">
<span class="line-number">133</span>                <span class=<span class="string">"keyword"</span>>elif</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">134</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val == self.<span class="function">get_macro_value</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">135</span>                <span class="comment"># If neither side <span class=<span class="string">"keyword"</span>>is</span> a known macro, both are undefined, so they're equal</span>
</div>
<div class="line-context">
<span class="line-number">136</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">137</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>  <span class="comment"># Both undefined macros are considered equal</span>
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">140</span>                left, right = condition.<span class="function">split</span>(<span class="string">"!="</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">141</span>                left_val = left.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">142</span>                right_val = right.<span class="function">strip</span>()
</div>
</div>
<h4>Line 134</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">124</span>
</div>
<div class="line-context">
<span class="line-number">125</span>                <span class="comment"># If both sides are known macros, compare their values</span>
</div>
<div class="line-context">
<span class="line-number">126</span>                <span class=<span class="string">"keyword"</span>>if</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros <span class=<span class="string">"keyword"</span>>and</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">127</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) == self.<span class="function">get_macro_value</span>(
</div>
<div class="line-context">
<span class="line-number">128</span>                        right_val
</div>
<div class="line-context">
<span class="line-number">129</span>                    )
</div>
<div class="line-context">
<span class="line-number">130</span>                <span class="comment"># If one side <span class=<span class="string">"keyword"</span>>is</span> a known macro, compare <span class=<span class="string">"keyword"</span>>with</span> the other side</span>
</div>
<div class="line-context">
<span class="line-number">131</span>                <span class=<span class="string">"keyword"</span>>elif</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">132</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) == right_val
</div>
<div class="line-context">
<span class="line-number">133</span>                <span class=<span class="string">"keyword"</span>>elif</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-uncovered">
<span class="line-number">134</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val == self.<span class="function">get_macro_value</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">135</span>                <span class="comment"># If neither side <span class=<span class="string">"keyword"</span>>is</span> a known macro, both are undefined, so they're equal</span>
</div>
<div class="line-context">
<span class="line-number">136</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">137</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>  <span class="comment"># Both undefined macros are considered equal</span>
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">140</span>                left, right = condition.<span class="function">split</span>(<span class="string">"!="</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">141</span>                left_val = left.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">142</span>                right_val = right.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">143</span>
</div>
<div class="line-context">
<span class="line-number">144</span>                <span class="comment"># If both sides are known macros, compare their values</span>
</div>
</div>
<h4>Lines 140-142</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">130</span>                <span class="comment"># If one side <span class=<span class="string">"keyword"</span>>is</span> a known macro, compare <span class=<span class="string">"keyword"</span>>with</span> the other side</span>
</div>
<div class="line-context">
<span class="line-number">131</span>                <span class=<span class="string">"keyword"</span>>elif</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">132</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) == right_val
</div>
<div class="line-context">
<span class="line-number">133</span>                <span class=<span class="string">"keyword"</span>>elif</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">134</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val == self.<span class="function">get_macro_value</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">135</span>                <span class="comment"># If neither side <span class=<span class="string">"keyword"</span>>is</span> a known macro, both are undefined, so they're equal</span>
</div>
<div class="line-context">
<span class="line-number">136</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">137</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>  <span class="comment"># Both undefined macros are considered equal</span>
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-uncovered">
<span class="line-number">140</span>                left, right = condition.<span class="function">split</span>(<span class="string">"!="</span>, <span class="number">1</span>)
</div>
<div class="line-uncovered">
<span class="line-number">141</span>                left_val = left.<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">142</span>                right_val = right.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">143</span>
</div>
<div class="line-context">
<span class="line-number">144</span>                <span class="comment"># If both sides are known macros, compare their values</span>
</div>
<div class="line-context">
<span class="line-number">145</span>                <span class=<span class="string">"keyword"</span>>if</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros <span class=<span class="string">"keyword"</span>>and</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">146</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) != self.<span class="function">get_macro_value</span>(
</div>
<div class="line-context">
<span class="line-number">147</span>                        right_val
</div>
<div class="line-context">
<span class="line-number">148</span>                    )
</div>
<div class="line-context">
<span class="line-number">149</span>                <span class="comment"># If one side <span class=<span class="string">"keyword"</span>>is</span> a known macro, compare <span class=<span class="string">"keyword"</span>>with</span> the other side</span>
</div>
<div class="line-context">
<span class="line-number">150</span>                <span class=<span class="string">"keyword"</span>>elif</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">151</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) != right_val
</div>
<div class="line-context">
<span class="line-number">152</span>                <span class=<span class="string">"keyword"</span>>elif</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
</div>
<h4>Lines 145-146</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">135</span>                <span class="comment"># If neither side <span class=<span class="string">"keyword"</span>>is</span> a known macro, both are undefined, so they're equal</span>
</div>
<div class="line-context">
<span class="line-number">136</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">137</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>  <span class="comment"># Both undefined macros are considered equal</span>
</div>
<div class="line-context">
<span class="line-number">138</span>
</div>
<div class="line-context">
<span class="line-number">139</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">140</span>                left, right = condition.<span class="function">split</span>(<span class="string">"!="</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">141</span>                left_val = left.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">142</span>                right_val = right.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">143</span>
</div>
<div class="line-context">
<span class="line-number">144</span>                <span class="comment"># If both sides are known macros, compare their values</span>
</div>
<div class="line-uncovered">
<span class="line-number">145</span>                <span class=<span class="string">"keyword"</span>>if</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros <span class=<span class="string">"keyword"</span>>and</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-uncovered">
<span class="line-number">146</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) != self.<span class="function">get_macro_value</span>(
</div>
<div class="line-context">
<span class="line-number">147</span>                        right_val
</div>
<div class="line-context">
<span class="line-number">148</span>                    )
</div>
<div class="line-context">
<span class="line-number">149</span>                <span class="comment"># If one side <span class=<span class="string">"keyword"</span>>is</span> a known macro, compare <span class=<span class="string">"keyword"</span>>with</span> the other side</span>
</div>
<div class="line-context">
<span class="line-number">150</span>                <span class=<span class="string">"keyword"</span>>elif</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">151</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) != right_val
</div>
<div class="line-context">
<span class="line-number">152</span>                <span class=<span class="string">"keyword"</span>>elif</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">153</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val != self.<span class="function">get_macro_value</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">154</span>                <span class="comment"># If neither side <span class=<span class="string">"keyword"</span>>is</span> a known macro, do string comparison</span>
</div>
<div class="line-context">
<span class="line-number">155</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">156</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val != right_val
</div>
</div>
<h4>Lines 150-153</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">140</span>                left, right = condition.<span class="function">split</span>(<span class="string">"!="</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">141</span>                left_val = left.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">142</span>                right_val = right.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">143</span>
</div>
<div class="line-context">
<span class="line-number">144</span>                <span class="comment"># If both sides are known macros, compare their values</span>
</div>
<div class="line-context">
<span class="line-number">145</span>                <span class=<span class="string">"keyword"</span>>if</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros <span class=<span class="string">"keyword"</span>>and</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">146</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) != self.<span class="function">get_macro_value</span>(
</div>
<div class="line-context">
<span class="line-number">147</span>                        right_val
</div>
<div class="line-context">
<span class="line-number">148</span>                    )
</div>
<div class="line-context">
<span class="line-number">149</span>                <span class="comment"># If one side <span class=<span class="string">"keyword"</span>>is</span> a known macro, compare <span class=<span class="string">"keyword"</span>>with</span> the other side</span>
</div>
<div class="line-uncovered">
<span class="line-number">150</span>                <span class=<span class="string">"keyword"</span>>elif</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-uncovered">
<span class="line-number">151</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) != right_val
</div>
<div class="line-uncovered">
<span class="line-number">152</span>                <span class=<span class="string">"keyword"</span>>elif</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-uncovered">
<span class="line-number">153</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val != self.<span class="function">get_macro_value</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">154</span>                <span class="comment"># If neither side <span class=<span class="string">"keyword"</span>>is</span> a known macro, do string comparison</span>
</div>
<div class="line-context">
<span class="line-number">155</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">156</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val != right_val
</div>
<div class="line-context">
<span class="line-number">157</span>
</div>
<div class="line-context">
<span class="line-number">158</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">">"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">159</span>                left, right = condition.<span class="function">split</span>(<span class="string">">"</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">160</span>                <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">161</span>                    left_val = self.<span class="function">_evaluate_operand</span>(left.<span class="function">strip</span>())
</div>
<div class="line-context">
<span class="line-number">162</span>                    right_val = self.<span class="function">_evaluate_operand</span>(right.<span class="function">strip</span>())
</div>
<div class="line-context">
<span class="line-number">163</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">float</span>(left_val) > <span class="function">float</span>(right_val)
</div>
</div>
<h4>Line 156</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">146</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) != self.<span class="function">get_macro_value</span>(
</div>
<div class="line-context">
<span class="line-number">147</span>                        right_val
</div>
<div class="line-context">
<span class="line-number">148</span>                    )
</div>
<div class="line-context">
<span class="line-number">149</span>                <span class="comment"># If one side <span class=<span class="string">"keyword"</span>>is</span> a known macro, compare <span class=<span class="string">"keyword"</span>>with</span> the other side</span>
</div>
<div class="line-context">
<span class="line-number">150</span>                <span class=<span class="string">"keyword"</span>>elif</span> left_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">151</span>                    <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(left_val) != right_val
</div>
<div class="line-context">
<span class="line-number">152</span>                <span class=<span class="string">"keyword"</span>>elif</span> right_val <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">153</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val != self.<span class="function">get_macro_value</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">154</span>                <span class="comment"># If neither side <span class=<span class="string">"keyword"</span>>is</span> a known macro, do string comparison</span>
</div>
<div class="line-context">
<span class="line-number">155</span>                <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">156</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val != right_val
</div>
<div class="line-context">
<span class="line-number">157</span>
</div>
<div class="line-context">
<span class="line-number">158</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">">"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">159</span>                left, right = condition.<span class="function">split</span>(<span class="string">">"</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">160</span>                <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">161</span>                    left_val = self.<span class="function">_evaluate_operand</span>(left.<span class="function">strip</span>())
</div>
<div class="line-context">
<span class="line-number">162</span>                    right_val = self.<span class="function">_evaluate_operand</span>(right.<span class="function">strip</span>())
</div>
<div class="line-context">
<span class="line-number">163</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">float</span>(left_val) > <span class="function">float</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">164</span>                <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number">165</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">166</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"<"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
</div>
<h4>Lines 166-189</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">156</span>                    <span class=<span class="string">"keyword"</span>>return</span> left_val != right_val
</div>
<div class="line-context">
<span class="line-number">157</span>
</div>
<div class="line-context">
<span class="line-number">158</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">">"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">159</span>                left, right = condition.<span class="function">split</span>(<span class="string">">"</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">160</span>                <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">161</span>                    left_val = self.<span class="function">_evaluate_operand</span>(left.<span class="function">strip</span>())
</div>
<div class="line-context">
<span class="line-number">162</span>                    right_val = self.<span class="function">_evaluate_operand</span>(right.<span class="function">strip</span>())
</div>
<div class="line-context">
<span class="line-number">163</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">float</span>(left_val) > <span class="function">float</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">164</span>                <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number">165</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-uncovered">
<span class="line-number">166</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"<"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-uncovered">
<span class="line-number">167</span>                left, right = condition.<span class="function">split</span>(<span class="string">"<"</span>, <span class="number">1</span>)
</div>
<div class="line-uncovered">
<span class="line-number">168</span>                <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-uncovered">
<span class="line-number">169</span>                    left_val = self.<span class="function">_evaluate_operand</span>(left.<span class="function">strip</span>())
</div>
<div class="line-uncovered">
<span class="line-number">170</span>                    right_val = self.<span class="function">_evaluate_operand</span>(right.<span class="function">strip</span>())
</div>
<div class="line-uncovered">
<span class="line-number">171</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">float</span>(left_val) < <span class="function">float</span>(right_val)
</div>
<div class="line-uncovered">
<span class="line-number">172</span>                <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-uncovered">
<span class="line-number">173</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-uncovered">
<span class="line-number">174</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">">="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-uncovered">
<span class="line-number">175</span>                left, right = condition.<span class="function">split</span>(<span class="string">">="</span>, <span class="number">1</span>)
</div>
<div class="line-uncovered">
<span class="line-number">176</span>                <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-uncovered">
<span class="line-number">177</span>                    left_val = self.<span class="function">_evaluate_operand</span>(left.<span class="function">strip</span>())
</div>
<div class="line-uncovered">
<span class="line-number">178</span>                    right_val = self.<span class="function">_evaluate_operand</span>(right.<span class="function">strip</span>())
</div>
<div class="line-uncovered">
<span class="line-number">179</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">float</span>(left_val) >= <span class="function">float</span>(right_val)
</div>
<div class="line-uncovered">
<span class="line-number">180</span>                <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-uncovered">
<span class="line-number">181</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-uncovered">
<span class="line-number">182</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"<="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-uncovered">
<span class="line-number">183</span>                left, right = condition.<span class="function">split</span>(<span class="string">"<="</span>, <span class="number">1</span>)
</div>
<div class="line-uncovered">
<span class="line-number">184</span>                <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-uncovered">
<span class="line-number">185</span>                    left_val = self.<span class="function">_evaluate_operand</span>(left.<span class="function">strip</span>())
</div>
<div class="line-uncovered">
<span class="line-number">186</span>                    right_val = self.<span class="function">_evaluate_operand</span>(right.<span class="function">strip</span>())
</div>
<div class="line-uncovered">
<span class="line-number">187</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">float</span>(left_val) <= <span class="function">float</span>(right_val)
</div>
<div class="line-uncovered">
<span class="line-number">188</span>                <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-uncovered">
<span class="line-number">189</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">190</span>
</div>
<div class="line-context">
<span class="line-number">191</span>            <span class="comment"># Handle logical operators</span>
</div>
<div class="line-context">
<span class="line-number">192</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"&&"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">193</span>                parts = condition.<span class="function">split</span>(<span class="string">"&&"</span>)
</div>
<div class="line-context">
<span class="line-number">194</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">all</span>(
</div>
<div class="line-context">
<span class="line-number">195</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">196</span>                )
</div>
<div class="line-context">
<span class="line-number">197</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"||"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">198</span>                parts = condition.<span class="function">split</span>(<span class="string">"||"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">any</span>(
</div>
</div>
<h4>Lines 192-194</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">182</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"<="</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">183</span>                left, right = condition.<span class="function">split</span>(<span class="string">"<="</span>, <span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">184</span>                <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">185</span>                    left_val = self.<span class="function">_evaluate_operand</span>(left.<span class="function">strip</span>())
</div>
<div class="line-context">
<span class="line-number">186</span>                    right_val = self.<span class="function">_evaluate_operand</span>(right.<span class="function">strip</span>())
</div>
<div class="line-context">
<span class="line-number">187</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">float</span>(left_val) <= <span class="function">float</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">188</span>                <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number">189</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">190</span>
</div>
<div class="line-context">
<span class="line-number">191</span>            <span class="comment"># Handle logical operators</span>
</div>
<div class="line-uncovered">
<span class="line-number">192</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"&&"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-uncovered">
<span class="line-number">193</span>                parts = condition.<span class="function">split</span>(<span class="string">"&&"</span>)
</div>
<div class="line-uncovered">
<span class="line-number">194</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">all</span>(
</div>
<div class="line-context">
<span class="line-number">195</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">196</span>                )
</div>
<div class="line-context">
<span class="line-number">197</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"||"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">198</span>                parts = condition.<span class="function">split</span>(<span class="string">"||"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">any</span>(
</div>
<div class="line-context">
<span class="line-number">200</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">201</span>                )
</div>
<div class="line-context">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">203</span>                <span class="comment"># Simple negation</span>
</div>
<div class="line-context">
<span class="line-number">204</span>                negated = condition.<span class="function">replace</span>(<span class="string">"!"</span>, <span class="string">""</span>).<span class="function">strip</span>()
</div>
</div>
<h4>Lines 197-199</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">187</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">float</span>(left_val) <= <span class="function">float</span>(right_val)
</div>
<div class="line-context">
<span class="line-number">188</span>                <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number">189</span>                    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">190</span>
</div>
<div class="line-context">
<span class="line-number">191</span>            <span class="comment"># Handle logical operators</span>
</div>
<div class="line-context">
<span class="line-number">192</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"&&"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">193</span>                parts = condition.<span class="function">split</span>(<span class="string">"&&"</span>)
</div>
<div class="line-context">
<span class="line-number">194</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">all</span>(
</div>
<div class="line-context">
<span class="line-number">195</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">196</span>                )
</div>
<div class="line-uncovered">
<span class="line-number">197</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"||"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-uncovered">
<span class="line-number">198</span>                parts = condition.<span class="function">split</span>(<span class="string">"||"</span>)
</div>
<div class="line-uncovered">
<span class="line-number">199</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">any</span>(
</div>
<div class="line-context">
<span class="line-number">200</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">201</span>                )
</div>
<div class="line-context">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">203</span>                <span class="comment"># Simple negation</span>
</div>
<div class="line-context">
<span class="line-number">204</span>                negated = condition.<span class="function">replace</span>(<span class="string">"!"</span>, <span class="string">""</span>).<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">205</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_evaluate_simple_expression</span>(negated)
</div>
<div class="line-context">
<span class="line-number">206</span>
</div>
<div class="line-context">
<span class="line-number">207</span>            <span class="comment"># If it<span class="string">'s just a macro name, check <span class=<span class="string">"keyword"</span>>if</span> it'</span>s defined</span>
</div>
<div class="line-context">
<span class="line-number">208</span>            <span class=<span class="string">"keyword"</span>>if</span> condition <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">209</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
</div>
<h4>Line 202</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">192</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"&&"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">193</span>                parts = condition.<span class="function">split</span>(<span class="string">"&&"</span>)
</div>
<div class="line-context">
<span class="line-number">194</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">all</span>(
</div>
<div class="line-context">
<span class="line-number">195</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">196</span>                )
</div>
<div class="line-context">
<span class="line-number">197</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"||"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">198</span>                parts = condition.<span class="function">split</span>(<span class="string">"||"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">any</span>(
</div>
<div class="line-context">
<span class="line-number">200</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">201</span>                )
</div>
<div class="line-uncovered">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">203</span>                <span class="comment"># Simple negation</span>
</div>
<div class="line-context">
<span class="line-number">204</span>                negated = condition.<span class="function">replace</span>(<span class="string">"!"</span>, <span class="string">""</span>).<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">205</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_evaluate_simple_expression</span>(negated)
</div>
<div class="line-context">
<span class="line-number">206</span>
</div>
<div class="line-context">
<span class="line-number">207</span>            <span class="comment"># If it<span class="string">'s just a macro name, check <span class=<span class="string">"keyword"</span>>if</span> it'</span>s defined</span>
</div>
<div class="line-context">
<span class="line-number">208</span>            <span class=<span class="string">"keyword"</span>>if</span> condition <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">209</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">210</span>
</div>
<div class="line-context">
<span class="line-number">211</span>            <span class="comment"># Try to evaluate <span class=<span class="string">"keyword"</span>>as</span> a number</span>
</div>
<div class="line-context">
<span class="line-number">212</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
</div>
<h4>Lines 204-205</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">194</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">all</span>(
</div>
<div class="line-context">
<span class="line-number">195</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">196</span>                )
</div>
<div class="line-context">
<span class="line-number">197</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"||"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">198</span>                parts = condition.<span class="function">split</span>(<span class="string">"||"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">any</span>(
</div>
<div class="line-context">
<span class="line-number">200</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">201</span>                )
</div>
<div class="line-context">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">203</span>                <span class="comment"># Simple negation</span>
</div>
<div class="line-uncovered">
<span class="line-number">204</span>                negated = condition.<span class="function">replace</span>(<span class="string">"!"</span>, <span class="string">""</span>).<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">205</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_evaluate_simple_expression</span>(negated)
</div>
<div class="line-context">
<span class="line-number">206</span>
</div>
<div class="line-context">
<span class="line-number">207</span>            <span class="comment"># If it<span class="string">'s just a macro name, check <span class=<span class="string">"keyword"</span>>if</span> it'</span>s defined</span>
</div>
<div class="line-context">
<span class="line-number">208</span>            <span class=<span class="string">"keyword"</span>>if</span> condition <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">209</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">210</span>
</div>
<div class="line-context">
<span class="line-number">211</span>            <span class="comment"># Try to evaluate <span class=<span class="string">"keyword"</span>>as</span> a number</span>
</div>
<div class="line-context">
<span class="line-number">212</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">213</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">bool</span>(<span class="function">int</span>(condition))
</div>
<div class="line-context">
<span class="line-number">214</span>            <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number">215</span>                <span class=<span class="string">"keyword"</span>>pass</span>
</div>
</div>
<h4>Lines 208-209</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">198</span>                parts = condition.<span class="function">split</span>(<span class="string">"||"</span>)
</div>
<div class="line-context">
<span class="line-number">199</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">any</span>(
</div>
<div class="line-context">
<span class="line-number">200</span>                    self.<span class="function">_evaluate_simple_expression</span>(part.<span class="function">strip</span>()) <span class=<span class="string">"keyword"</span>>for</span> part <span class=<span class="string">"keyword"</span>>in</span> parts
</div>
<div class="line-context">
<span class="line-number">201</span>                )
</div>
<div class="line-context">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">203</span>                <span class="comment"># Simple negation</span>
</div>
<div class="line-context">
<span class="line-number">204</span>                negated = condition.<span class="function">replace</span>(<span class="string">"!"</span>, <span class="string">""</span>).<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">205</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_evaluate_simple_expression</span>(negated)
</div>
<div class="line-context">
<span class="line-number">206</span>
</div>
<div class="line-context">
<span class="line-number">207</span>            <span class="comment"># If it<span class="string">'s just a macro name, check <span class=<span class="string">"keyword"</span>>if</span> it'</span>s defined</span>
</div>
<div class="line-uncovered">
<span class="line-number">208</span>            <span class=<span class="string">"keyword"</span>>if</span> condition <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-uncovered">
<span class="line-number">209</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">210</span>
</div>
<div class="line-context">
<span class="line-number">211</span>            <span class="comment"># Try to evaluate <span class=<span class="string">"keyword"</span>>as</span> a number</span>
</div>
<div class="line-context">
<span class="line-number">212</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">213</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">bool</span>(<span class="function">int</span>(condition))
</div>
<div class="line-context">
<span class="line-number">214</span>            <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number">215</span>                <span class=<span class="string">"keyword"</span>>pass</span>
</div>
<div class="line-context">
<span class="line-number">216</span>
</div>
<div class="line-context">
<span class="line-number">217</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-context">
<span class="line-number">218</span>            <span class="comment"># This ensures existing tests <span class=<span class="string">"keyword"</span>>continue</span> to work</span>
</div>
<div class="line-context">
<span class="line-number">219</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
</div>
<h4>Lines 212-215</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">202</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"!"</span> <span class=<span class="string">"keyword"</span>>in</span> condition:
</div>
<div class="line-context">
<span class="line-number">203</span>                <span class="comment"># Simple negation</span>
</div>
<div class="line-context">
<span class="line-number">204</span>                negated = condition.<span class="function">replace</span>(<span class="string">"!"</span>, <span class="string">""</span>).<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">205</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">_evaluate_simple_expression</span>(negated)
</div>
<div class="line-context">
<span class="line-number">206</span>
</div>
<div class="line-context">
<span class="line-number">207</span>            <span class="comment"># If it<span class="string">'s just a macro name, check <span class=<span class="string">"keyword"</span>>if</span> it'</span>s defined</span>
</div>
<div class="line-context">
<span class="line-number">208</span>            <span class=<span class="string">"keyword"</span>>if</span> condition <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">209</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">210</span>
</div>
<div class="line-context">
<span class="line-number">211</span>            <span class="comment"># Try to evaluate <span class=<span class="string">"keyword"</span>>as</span> a number</span>
</div>
<div class="line-uncovered">
<span class="line-number">212</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-uncovered">
<span class="line-number">213</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">bool</span>(<span class="function">int</span>(condition))
</div>
<div class="line-uncovered">
<span class="line-number">214</span>            <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-uncovered">
<span class="line-number">215</span>                <span class=<span class="string">"keyword"</span>>pass</span>
</div>
<div class="line-context">
<span class="line-number">216</span>
</div>
<div class="line-context">
<span class="line-number">217</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-context">
<span class="line-number">218</span>            <span class="comment"># This ensures existing tests <span class=<span class="string">"keyword"</span>>continue</span> to work</span>
</div>
<div class="line-context">
<span class="line-number">219</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">220</span>
</div>
<div class="line-context">
<span class="line-number">221</span>        <span class=<span class="string">"keyword"</span>>except</span> ValueError <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">222</span>            self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">223</span>                <span class="string">"Error evaluating preprocessor condition <span class="string">'%s'</span>: %s"</span>, condition, e
</div>
<div class="line-context">
<span class="line-number">224</span>            )
</div>
<div class="line-context">
<span class="line-number">225</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
</div>
<h4>Line 219</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">209</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">210</span>
</div>
<div class="line-context">
<span class="line-number">211</span>            <span class="comment"># Try to evaluate <span class=<span class="string">"keyword"</span>>as</span> a number</span>
</div>
<div class="line-context">
<span class="line-number">212</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">213</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">bool</span>(<span class="function">int</span>(condition))
</div>
<div class="line-context">
<span class="line-number">214</span>            <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number">215</span>                <span class=<span class="string">"keyword"</span>>pass</span>
</div>
<div class="line-context">
<span class="line-number">216</span>
</div>
<div class="line-context">
<span class="line-number">217</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-context">
<span class="line-number">218</span>            <span class="comment"># This ensures existing tests <span class=<span class="string">"keyword"</span>>continue</span> to work</span>
</div>
<div class="line-uncovered">
<span class="line-number">219</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">220</span>
</div>
<div class="line-context">
<span class="line-number">221</span>        <span class=<span class="string">"keyword"</span>>except</span> ValueError <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">222</span>            self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">223</span>                <span class="string">"Error evaluating preprocessor condition <span class="string">'%s'</span>: %s"</span>, condition, e
</div>
<div class="line-context">
<span class="line-number">224</span>            )
</div>
<div class="line-context">
<span class="line-number">225</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-context">
<span class="line-number">226</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">227</span>
</div>
<div class="line-context">
<span class="line-number">228</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_evaluate_operand</span>(self, operand: str) -> str:
</div>
<div class="line-context">
<span class="line-number">229</span>        <span class="string">""</span><span class="string">"Evaluate an operand, expanding macros <span class="</span>keyword<span class="string">">if</span> they are defined."</span><span class="string">""</span>
</div>
</div>
<h4>Lines 221-222</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">211</span>            <span class="comment"># Try to evaluate <span class=<span class="string">"keyword"</span>>as</span> a number</span>
</div>
<div class="line-context">
<span class="line-number">212</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">213</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class="function">bool</span>(<span class="function">int</span>(condition))
</div>
<div class="line-context">
<span class="line-number">214</span>            <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number">215</span>                <span class=<span class="string">"keyword"</span>>pass</span>
</div>
<div class="line-context">
<span class="line-number">216</span>
</div>
<div class="line-context">
<span class="line-number">217</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-context">
<span class="line-number">218</span>            <span class="comment"># This ensures existing tests <span class=<span class="string">"keyword"</span>>continue</span> to work</span>
</div>
<div class="line-context">
<span class="line-number">219</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">220</span>
</div>
<div class="line-uncovered">
<span class="line-number">221</span>        <span class=<span class="string">"keyword"</span>>except</span> ValueError <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">222</span>            self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">223</span>                <span class="string">"Error evaluating preprocessor condition <span class="string">'%s'</span>: %s"</span>, condition, e
</div>
<div class="line-context">
<span class="line-number">224</span>            )
</div>
<div class="line-context">
<span class="line-number">225</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-context">
<span class="line-number">226</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">227</span>
</div>
<div class="line-context">
<span class="line-number">228</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_evaluate_operand</span>(self, operand: str) -> str:
</div>
<div class="line-context">
<span class="line-number">229</span>        <span class="string">""</span><span class="string">"Evaluate an operand, expanding macros <span class="</span>keyword<span class="string">">if</span> they are defined."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">230</span>        operand = operand.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">231</span>
</div>
<div class="line-context">
<span class="line-number">232</span>        <span class="comment"># If it's a defined macro, <span class=<span class="string">"keyword"</span>>return</span> its value</span>
</div>
</div>
<h4>Line 226</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">216</span>
</div>
<div class="line-context">
<span class="line-number">217</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-context">
<span class="line-number">218</span>            <span class="comment"># This ensures existing tests <span class=<span class="string">"keyword"</span>>continue</span> to work</span>
</div>
<div class="line-context">
<span class="line-number">219</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">220</span>
</div>
<div class="line-context">
<span class="line-number">221</span>        <span class=<span class="string">"keyword"</span>>except</span> ValueError <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">222</span>            self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">223</span>                <span class="string">"Error evaluating preprocessor condition <span class="string">'%s'</span>: %s"</span>, condition, e
</div>
<div class="line-context">
<span class="line-number">224</span>            )
</div>
<div class="line-context">
<span class="line-number">225</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-uncovered">
<span class="line-number">226</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">227</span>
</div>
<div class="line-context">
<span class="line-number">228</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_evaluate_operand</span>(self, operand: str) -> str:
</div>
<div class="line-context">
<span class="line-number">229</span>        <span class="string">""</span><span class="string">"Evaluate an operand, expanding macros <span class="</span>keyword<span class="string">">if</span> they are defined."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">230</span>        operand = operand.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">231</span>
</div>
<div class="line-context">
<span class="line-number">232</span>        <span class="comment"># If it's a defined macro, <span class=<span class="string">"keyword"</span>>return</span> its value</span>
</div>
<div class="line-context">
<span class="line-number">233</span>        <span class=<span class="string">"keyword"</span>>if</span> operand <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-context">
<span class="line-number">234</span>            <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(operand)
</div>
<div class="line-context">
<span class="line-number">235</span>
</div>
<div class="line-context">
<span class="line-number">236</span>        <span class="comment"># Otherwise, <span class=<span class="string">"keyword"</span>>return</span> the operand <span class=<span class="string">"keyword"</span>>as</span>-<span class=<span class="string">"keyword"</span>>is</span></span>
</div>
</div>
<h4>Line 234</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">224</span>            )
</div>
<div class="line-context">
<span class="line-number">225</span>            <span class="comment"># Default to <span class=<span class="string">"keyword"</span>>True</span> <span class=<span class="string">"keyword"</span>>for</span> unknown <span class="function">conditions</span>(backward compatibility)</span>
</div>
<div class="line-context">
<span class="line-number">226</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">227</span>
</div>
<div class="line-context">
<span class="line-number">228</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_evaluate_operand</span>(self, operand: str) -> str:
</div>
<div class="line-context">
<span class="line-number">229</span>        <span class="string">""</span><span class="string">"Evaluate an operand, expanding macros <span class="</span>keyword<span class="string">">if</span> they are defined."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">230</span>        operand = operand.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">231</span>
</div>
<div class="line-context">
<span class="line-number">232</span>        <span class="comment"># If it's a defined macro, <span class=<span class="string">"keyword"</span>>return</span> its value</span>
</div>
<div class="line-context">
<span class="line-number">233</span>        <span class=<span class="string">"keyword"</span>>if</span> operand <span class=<span class="string">"keyword"</span>>in</span> self.defined_macros:
</div>
<div class="line-uncovered">
<span class="line-number">234</span>            <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">get_macro_value</span>(operand)
</div>
<div class="line-context">
<span class="line-number">235</span>
</div>
<div class="line-context">
<span class="line-number">236</span>        <span class="comment"># Otherwise, <span class=<span class="string">"keyword"</span>>return</span> the operand <span class=<span class="string">"keyword"</span>>as</span>-<span class=<span class="string">"keyword"</span>>is</span></span>
</div>
<div class="line-context">
<span class="line-number">237</span>        <span class=<span class="string">"keyword"</span>>return</span> operand
</div>
<div class="line-context">
<span class="line-number">238</span>
</div>
<div class="line-context">
<span class="line-number">239</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">parse_preprocessor_blocks</span>(self, tokens: List[Token]) -> List[PreprocessorBlock]:
</div>
<div class="line-context">
<span class="line-number">240</span>        <span class="string">""</span><span class="string">"Parse preprocessor blocks <span class="</span>keyword<span class="string">">from</span> tokens."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">241</span>        blocks = []
</div>
<div class="line-context">
<span class="line-number">242</span>        stack = []
</div>
<div class="line-context">
<span class="line-number">243</span>
</div>
<div class="line-context">
<span class="line-number">244</span>        i = <span class="number">0</span>
</div>
</div>
<h4>Line 300</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">290</span>                        current_block.is_active = self.<span class="function">_should_activate_block</span>(
</div>
<div class="line-context">
<span class="line-number">291</span>                            directive, <span class="string">""</span>, stack
</div>
<div class="line-context">
<span class="line-number">292</span>                        )
</div>
<div class="line-context">
<span class="line-number">293</span>
</div>
<div class="line-context">
<span class="line-number">294</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ENDIF:
</div>
<div class="line-context">
<span class="line-number">295</span>                    <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">296</span>                        <span class="comment"># End current block</span>
</div>
<div class="line-context">
<span class="line-number">297</span>                        current_block = stack.<span class="function">pop</span>()
</div>
<div class="line-context">
<span class="line-number">298</span>                        current_block.end_token = i
</div>
<div class="line-context">
<span class="line-number">299</span>
</div>
<div class="line-uncovered">
<span class="line-number">300</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.DEFINE:
</div>
<div class="line-context">
<span class="line-number">301</span>                    <span class="comment"># Handle #define</span>
</div>
<div class="line-context">
<span class="line-number">302</span>                    macro_name, macro_value = self.<span class="function">_parse_define</span>(token.value)
</div>
<div class="line-context">
<span class="line-number">303</span>                    self.<span class="function">add_define</span>(macro_name, macro_value)
</div>
<div class="line-context">
<span class="line-number">304</span>
</div>
<div class="line-context">
<span class="line-number">305</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.UNDEF:
</div>
<div class="line-context">
<span class="line-number">306</span>                    <span class="comment"># Handle #undef</span>
</div>
<div class="line-context">
<span class="line-number">307</span>                    macro_name = self.<span class="function">_parse_undef</span>(token.value)
</div>
<div class="line-context">
<span class="line-number">308</span>                    self.<span class="function">add_undef</span>(macro_name)
</div>
<div class="line-context">
<span class="line-number">309</span>
</div>
<div class="line-context">
<span class="line-number">310</span>            i += <span class="number">1</span>
</div>
</div>
<h4>Lines 302-303</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">292</span>                        )
</div>
<div class="line-context">
<span class="line-number">293</span>
</div>
<div class="line-context">
<span class="line-number">294</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ENDIF:
</div>
<div class="line-context">
<span class="line-number">295</span>                    <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">296</span>                        <span class="comment"># End current block</span>
</div>
<div class="line-context">
<span class="line-number">297</span>                        current_block = stack.<span class="function">pop</span>()
</div>
<div class="line-context">
<span class="line-number">298</span>                        current_block.end_token = i
</div>
<div class="line-context">
<span class="line-number">299</span>
</div>
<div class="line-context">
<span class="line-number">300</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.DEFINE:
</div>
<div class="line-context">
<span class="line-number">301</span>                    <span class="comment"># Handle #define</span>
</div>
<div class="line-uncovered">
<span class="line-number">302</span>                    macro_name, macro_value = self.<span class="function">_parse_define</span>(token.value)
</div>
<div class="line-uncovered">
<span class="line-number">303</span>                    self.<span class="function">add_define</span>(macro_name, macro_value)
</div>
<div class="line-context">
<span class="line-number">304</span>
</div>
<div class="line-context">
<span class="line-number">305</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.UNDEF:
</div>
<div class="line-context">
<span class="line-number">306</span>                    <span class="comment"># Handle #undef</span>
</div>
<div class="line-context">
<span class="line-number">307</span>                    macro_name = self.<span class="function">_parse_undef</span>(token.value)
</div>
<div class="line-context">
<span class="line-number">308</span>                    self.<span class="function">add_undef</span>(macro_name)
</div>
<div class="line-context">
<span class="line-number">309</span>
</div>
<div class="line-context">
<span class="line-number">310</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">311</span>
</div>
<div class="line-context">
<span class="line-number">312</span>        <span class=<span class="string">"keyword"</span>>return</span> blocks
</div>
<div class="line-context">
<span class="line-number">313</span>
</div>
</div>
<h4>Line 305</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">295</span>                    <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">296</span>                        <span class="comment"># End current block</span>
</div>
<div class="line-context">
<span class="line-number">297</span>                        current_block = stack.<span class="function">pop</span>()
</div>
<div class="line-context">
<span class="line-number">298</span>                        current_block.end_token = i
</div>
<div class="line-context">
<span class="line-number">299</span>
</div>
<div class="line-context">
<span class="line-number">300</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.DEFINE:
</div>
<div class="line-context">
<span class="line-number">301</span>                    <span class="comment"># Handle #define</span>
</div>
<div class="line-context">
<span class="line-number">302</span>                    macro_name, macro_value = self.<span class="function">_parse_define</span>(token.value)
</div>
<div class="line-context">
<span class="line-number">303</span>                    self.<span class="function">add_define</span>(macro_name, macro_value)
</div>
<div class="line-context">
<span class="line-number">304</span>
</div>
<div class="line-uncovered">
<span class="line-number">305</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.UNDEF:
</div>
<div class="line-context">
<span class="line-number">306</span>                    <span class="comment"># Handle #undef</span>
</div>
<div class="line-context">
<span class="line-number">307</span>                    macro_name = self.<span class="function">_parse_undef</span>(token.value)
</div>
<div class="line-context">
<span class="line-number">308</span>                    self.<span class="function">add_undef</span>(macro_name)
</div>
<div class="line-context">
<span class="line-number">309</span>
</div>
<div class="line-context">
<span class="line-number">310</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">311</span>
</div>
<div class="line-context">
<span class="line-number">312</span>        <span class=<span class="string">"keyword"</span>>return</span> blocks
</div>
<div class="line-context">
<span class="line-number">313</span>
</div>
<div class="line-context">
<span class="line-number">314</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_directive</span>(self, value: str) -> PreprocessorDirective:
</div>
<div class="line-context">
<span class="line-number">315</span>        <span class="string">""</span><span class="string">"Parse the directive type <span class="</span>keyword<span class="string">">from</span> a preprocessor token."</span><span class="string">""</span>
</div>
</div>
<h4>Lines 307-308</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">297</span>                        current_block = stack.<span class="function">pop</span>()
</div>
<div class="line-context">
<span class="line-number">298</span>                        current_block.end_token = i
</div>
<div class="line-context">
<span class="line-number">299</span>
</div>
<div class="line-context">
<span class="line-number">300</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.DEFINE:
</div>
<div class="line-context">
<span class="line-number">301</span>                    <span class="comment"># Handle #define</span>
</div>
<div class="line-context">
<span class="line-number">302</span>                    macro_name, macro_value = self.<span class="function">_parse_define</span>(token.value)
</div>
<div class="line-context">
<span class="line-number">303</span>                    self.<span class="function">add_define</span>(macro_name, macro_value)
</div>
<div class="line-context">
<span class="line-number">304</span>
</div>
<div class="line-context">
<span class="line-number">305</span>                <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.UNDEF:
</div>
<div class="line-context">
<span class="line-number">306</span>                    <span class="comment"># Handle #undef</span>
</div>
<div class="line-uncovered">
<span class="line-number">307</span>                    macro_name = self.<span class="function">_parse_undef</span>(token.value)
</div>
<div class="line-uncovered">
<span class="line-number">308</span>                    self.<span class="function">add_undef</span>(macro_name)
</div>
<div class="line-context">
<span class="line-number">309</span>
</div>
<div class="line-context">
<span class="line-number">310</span>            i += <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number">311</span>
</div>
<div class="line-context">
<span class="line-number">312</span>        <span class=<span class="string">"keyword"</span>>return</span> blocks
</div>
<div class="line-context">
<span class="line-number">313</span>
</div>
<div class="line-context">
<span class="line-number">314</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_directive</span>(self, value: str) -> PreprocessorDirective:
</div>
<div class="line-context">
<span class="line-number">315</span>        <span class="string">""</span><span class="string">"Parse the directive type <span class="</span>keyword<span class="string">">from</span> a preprocessor token."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">316</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">317</span>        <span class=<span class="string">"keyword"</span>>if</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#ifdef"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">318</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.IFDEF
</div>
</div>
<h4>Lines 329-332</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">319</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#ifndef"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">320</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.IFNDEF
</div>
<div class="line-context">
<span class="line-number">321</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#<span class="</span>keyword<span class="string">">if</span>"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">322</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.IF
</div>
<div class="line-context">
<span class="line-number">323</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#<span class="</span>keyword<span class="string">">elif</span>"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">324</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.ELIF
</div>
<div class="line-context">
<span class="line-number">325</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#<span class="</span>keyword<span class="string">">else</span>"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">326</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.ELSE
</div>
<div class="line-context">
<span class="line-number">327</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#endif"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">328</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.ENDIF
</div>
<div class="line-uncovered">
<span class="line-number">329</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#define"</span>):</span>
</div>
<div class="line-uncovered">
<span class="line-number">330</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.DEFINE
</div>
<div class="line-uncovered">
<span class="line-number">331</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#undef"</span>):</span>
</div>
<div class="line-uncovered">
<span class="line-number">332</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.UNDEF
</div>
<div class="line-context">
<span class="line-number">333</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">334</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.IF  <span class="comment"># Default</span>
</div>
<div class="line-context">
<span class="line-number">335</span>
</div>
<div class="line-context">
<span class="line-number">336</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_extract_condition</span>(self, value: str, directive: PreprocessorDirective) -> str:
</div>
<div class="line-context">
<span class="line-number">337</span>        <span class="string">""</span><span class="string">"Extract the condition <span class="</span>keyword<span class="string">">from</span> a preprocessor directive."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">338</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">339</span>
</div>
<div class="line-context">
<span class="line-number">340</span>        <span class=<span class="string">"keyword"</span>>if</span> directive == PreprocessorDirective.IFDEF:
</div>
<div class="line-context">
<span class="line-number">341</span>            match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#ifdef\s+([a-zA-Z_][a-zA-Z0-9_]*)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">342</span>            <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>) <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
</div>
<h4>Line 334</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">324</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.ELIF
</div>
<div class="line-context">
<span class="line-number">325</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#<span class="</span>keyword<span class="string">">else</span>"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">326</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.ELSE
</div>
<div class="line-context">
<span class="line-number">327</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#endif"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">328</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.ENDIF
</div>
<div class="line-context">
<span class="line-number">329</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#define"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">330</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.DEFINE
</div>
<div class="line-context">
<span class="line-number">331</span>        <span class=<span class="string">"keyword"</span>>elif</span> value.<span class="function">startswith</span>(<span class="string">"<span class="comment">#undef"</span>):</span>
</div>
<div class="line-context">
<span class="line-number">332</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.UNDEF
</div>
<div class="line-context">
<span class="line-number">333</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">334</span>            <span class=<span class="string">"keyword"</span>>return</span> PreprocessorDirective.IF  <span class="comment"># Default</span>
</div>
<div class="line-context">
<span class="line-number">335</span>
</div>
<div class="line-context">
<span class="line-number">336</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_extract_condition</span>(self, value: str, directive: PreprocessorDirective) -> str:
</div>
<div class="line-context">
<span class="line-number">337</span>        <span class="string">""</span><span class="string">"Extract the condition <span class="</span>keyword<span class="string">">from</span> a preprocessor directive."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">338</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">339</span>
</div>
<div class="line-context">
<span class="line-number">340</span>        <span class=<span class="string">"keyword"</span>>if</span> directive == PreprocessorDirective.IFDEF:
</div>
<div class="line-context">
<span class="line-number">341</span>            match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#ifdef\s+([a-zA-Z_][a-zA-Z0-9_]*)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">342</span>            <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>) <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">343</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.IFNDEF:
</div>
<div class="line-context">
<span class="line-number">344</span>            match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#ifndef\s+([a-zA-Z_][a-zA-Z0-9_]*)"</span>, value)</span>
</div>
</div>
<h4>Line 353</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">343</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.IFNDEF:
</div>
<div class="line-context">
<span class="line-number">344</span>            match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#ifndef\s+([a-zA-Z_][a-zA-Z0-9_]*)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">345</span>            <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>) <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">346</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.IF:
</div>
<div class="line-context">
<span class="line-number">347</span>            match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#<span class="</span>keyword<span class="string">">if</span>\s+(.+)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">348</span>            <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>).<span class="function">strip</span>() <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">349</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ELIF:
</div>
<div class="line-context">
<span class="line-number">350</span>            match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#<span class="</span>keyword<span class="string">">elif</span>\s+(.+)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">351</span>            <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>).<span class="function">strip</span>() <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">352</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">353</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">354</span>
</div>
<div class="line-context">
<span class="line-number">355</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_define</span>(self, value: str) -> Tuple[str, str]:
</div>
<div class="line-context">
<span class="line-number">356</span>        <span class="string">""</span><span class="string">"Parse <span class="comment">#define directive."</span><span class="string">""</span></span>
</div>
<div class="line-context">
<span class="line-number">357</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">358</span>        match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#define\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*(.+)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">359</span>        <span class=<span class="string">"keyword"</span>>if</span> match:
</div>
<div class="line-context">
<span class="line-number">360</span>            name = match.<span class="function">group</span>(<span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">361</span>            macro_value = match.<span class="function">group</span>(<span class="number">2</span>).<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">362</span>            <span class=<span class="string">"keyword"</span>>return</span> name, macro_value
</div>
<div class="line-context">
<span class="line-number">363</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>, <span class="string">""</span>
</div>
</div>
<h4>Lines 357-363</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">347</span>            match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#<span class="</span>keyword<span class="string">">if</span>\s+(.+)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">348</span>            <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>).<span class="function">strip</span>() <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">349</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ELIF:
</div>
<div class="line-context">
<span class="line-number">350</span>            match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#<span class="</span>keyword<span class="string">">elif</span>\s+(.+)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">351</span>            <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>).<span class="function">strip</span>() <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">352</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">353</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">354</span>
</div>
<div class="line-context">
<span class="line-number">355</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_define</span>(self, value: str) -> Tuple[str, str]:
</div>
<div class="line-context">
<span class="line-number">356</span>        <span class="string">""</span><span class="string">"Parse <span class="comment">#define directive."</span><span class="string">""</span></span>
</div>
<div class="line-uncovered">
<span class="line-number">357</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">358</span>        match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#define\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*(.+)"</span>, value)</span>
</div>
<div class="line-uncovered">
<span class="line-number">359</span>        <span class=<span class="string">"keyword"</span>>if</span> match:
</div>
<div class="line-uncovered">
<span class="line-number">360</span>            name = match.<span class="function">group</span>(<span class="number">1</span>)
</div>
<div class="line-uncovered">
<span class="line-number">361</span>            macro_value = match.<span class="function">group</span>(<span class="number">2</span>).<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">362</span>            <span class=<span class="string">"keyword"</span>>return</span> name, macro_value
</div>
<div class="line-uncovered">
<span class="line-number">363</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>, <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">364</span>
</div>
<div class="line-context">
<span class="line-number">365</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_undef</span>(self, value: str) -> str:
</div>
<div class="line-context">
<span class="line-number">366</span>        <span class="string">""</span><span class="string">"Parse <span class="comment">#undef directive."</span><span class="string">""</span></span>
</div>
<div class="line-context">
<span class="line-number">367</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">368</span>        match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#undef\s+([a-zA-Z_][a-zA-Z0-9_]*)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">369</span>        <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>) <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">370</span>
</div>
<div class="line-context">
<span class="line-number">371</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_should_activate_block</span>(
</div>
<div class="line-context">
<span class="line-number">372</span>        self,
</div>
<div class="line-context">
<span class="line-number">373</span>        directive: PreprocessorDirective,
</div>
</div>
<h4>Lines 367-369</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">357</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">358</span>        match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#define\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*(.+)"</span>, value)</span>
</div>
<div class="line-context">
<span class="line-number">359</span>        <span class=<span class="string">"keyword"</span>>if</span> match:
</div>
<div class="line-context">
<span class="line-number">360</span>            name = match.<span class="function">group</span>(<span class="number">1</span>)
</div>
<div class="line-context">
<span class="line-number">361</span>            macro_value = match.<span class="function">group</span>(<span class="number">2</span>).<span class="function">strip</span>()
</div>
<div class="line-context">
<span class="line-number">362</span>            <span class=<span class="string">"keyword"</span>>return</span> name, macro_value
</div>
<div class="line-context">
<span class="line-number">363</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">""</span>, <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">364</span>
</div>
<div class="line-context">
<span class="line-number">365</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_parse_undef</span>(self, value: str) -> str:
</div>
<div class="line-context">
<span class="line-number">366</span>        <span class="string">""</span><span class="string">"Parse <span class="comment">#undef directive."</span><span class="string">""</span></span>
</div>
<div class="line-uncovered">
<span class="line-number">367</span>        value = value.<span class="function">strip</span>()
</div>
<div class="line-uncovered">
<span class="line-number">368</span>        match = re.<span class="function">search</span>(r<span class="string">"<span class="comment">#undef\s+([a-zA-Z_][a-zA-Z0-9_]*)"</span>, value)</span>
</div>
<div class="line-uncovered">
<span class="line-number">369</span>        <span class=<span class="string">"keyword"</span>>return</span> match.<span class="function">group</span>(<span class="number">1</span>) <span class=<span class="string">"keyword"</span>>if</span> match <span class=<span class="string">"keyword"</span>>else</span> <span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">370</span>
</div>
<div class="line-context">
<span class="line-number">371</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_should_activate_block</span>(
</div>
<div class="line-context">
<span class="line-number">372</span>        self,
</div>
<div class="line-context">
<span class="line-number">373</span>        directive: PreprocessorDirective,
</div>
<div class="line-context">
<span class="line-number">374</span>        condition: str,
</div>
<div class="line-context">
<span class="line-number">375</span>        stack: List[PreprocessorBlock],
</div>
<div class="line-context">
<span class="line-number">376</span>    ) -> bool:
</div>
<div class="line-context">
<span class="line-number">377</span>        <span class="string">""</span><span class="string">"Determine <span class="</span>keyword<span class="string">">if</span> a block should be active based on its directive <span class="</span>keyword<span class="string">">and</span> condition."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">378</span>        <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> parent blocks are active</span>
</div>
<div class="line-context">
<span class="line-number">379</span>        <span class=<span class="string">"keyword"</span>>if</span> stack <span class=<span class="string">"keyword"</span>>and</span> <span class=<span class="string">"keyword"</span>>not</span> stack[-<span class="number">1</span>].is_active:
</div>
</div>
<h4>Lines 394-395</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">384</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.IFNDEF:
</div>
<div class="line-context">
<span class="line-number">385</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>not</span> self.<span class="function">is_defined</span>(condition)
</div>
<div class="line-context">
<span class="line-number">386</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.IF:
</div>
<div class="line-context">
<span class="line-number">387</span>            <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">evaluate_condition</span>(condition)
</div>
<div class="line-context">
<span class="line-number">388</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ELIF:
</div>
<div class="line-context">
<span class="line-number">389</span>            <span class="comment"># For #<span class=<span class="string">"keyword"</span>>elif</span>, we need to check <span class=<span class="string">"keyword"</span>>if</span> no previous branch was taken</span>
</div>
<div class="line-context">
<span class="line-number">390</span>            <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">391</span>                parent = stack[-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">392</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> any previous child was active</span>
</div>
<div class="line-context">
<span class="line-number">393</span>                <span class=<span class="string">"keyword"</span>>for</span> child <span class=<span class="string">"keyword"</span>>in</span> parent.children:
</div>
<div class="line-uncovered">
<span class="line-number">394</span>                    <span class=<span class="string">"keyword"</span>>if</span> child.is_active:
</div>
<div class="line-uncovered">
<span class="line-number">395</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">396</span>                <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">evaluate_condition</span>(condition)
</div>
<div class="line-context">
<span class="line-number">397</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">398</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ELSE:
</div>
<div class="line-context">
<span class="line-number">399</span>            <span class="comment"># For #<span class=<span class="string">"keyword"</span>>else</span>, we need to check <span class=<span class="string">"keyword"</span>>if</span> no previous branch was taken</span>
</div>
<div class="line-context">
<span class="line-number">400</span>            <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">401</span>                parent = stack[-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">402</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> any previous child was active</span>
</div>
<div class="line-context">
<span class="line-number">403</span>                <span class=<span class="string">"keyword"</span>>for</span> child <span class=<span class="string">"keyword"</span>>in</span> parent.children:
</div>
<div class="line-context">
<span class="line-number">404</span>                    <span class=<span class="string">"keyword"</span>>if</span> child.is_active:
</div>
<div class="line-context">
<span class="line-number">405</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
</div>
<h4>Line 397</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">387</span>            <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">evaluate_condition</span>(condition)
</div>
<div class="line-context">
<span class="line-number">388</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ELIF:
</div>
<div class="line-context">
<span class="line-number">389</span>            <span class="comment"># For #<span class=<span class="string">"keyword"</span>>elif</span>, we need to check <span class=<span class="string">"keyword"</span>>if</span> no previous branch was taken</span>
</div>
<div class="line-context">
<span class="line-number">390</span>            <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">391</span>                parent = stack[-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">392</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> any previous child was active</span>
</div>
<div class="line-context">
<span class="line-number">393</span>                <span class=<span class="string">"keyword"</span>>for</span> child <span class=<span class="string">"keyword"</span>>in</span> parent.children:
</div>
<div class="line-context">
<span class="line-number">394</span>                    <span class=<span class="string">"keyword"</span>>if</span> child.is_active:
</div>
<div class="line-context">
<span class="line-number">395</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">396</span>                <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">evaluate_condition</span>(condition)
</div>
<div class="line-uncovered">
<span class="line-number">397</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">398</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ELSE:
</div>
<div class="line-context">
<span class="line-number">399</span>            <span class="comment"># For #<span class=<span class="string">"keyword"</span>>else</span>, we need to check <span class=<span class="string">"keyword"</span>>if</span> no previous branch was taken</span>
</div>
<div class="line-context">
<span class="line-number">400</span>            <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">401</span>                parent = stack[-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">402</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> any previous child was active</span>
</div>
<div class="line-context">
<span class="line-number">403</span>                <span class=<span class="string">"keyword"</span>>for</span> child <span class=<span class="string">"keyword"</span>>in</span> parent.children:
</div>
<div class="line-context">
<span class="line-number">404</span>                    <span class=<span class="string">"keyword"</span>>if</span> child.is_active:
</div>
<div class="line-context">
<span class="line-number">405</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">406</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">407</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
</div>
<h4>Lines 404-405</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">394</span>                    <span class=<span class="string">"keyword"</span>>if</span> child.is_active:
</div>
<div class="line-context">
<span class="line-number">395</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">396</span>                <span class=<span class="string">"keyword"</span>>return</span> self.<span class="function">evaluate_condition</span>(condition)
</div>
<div class="line-context">
<span class="line-number">397</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">398</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ELSE:
</div>
<div class="line-context">
<span class="line-number">399</span>            <span class="comment"># For #<span class=<span class="string">"keyword"</span>>else</span>, we need to check <span class=<span class="string">"keyword"</span>>if</span> no previous branch was taken</span>
</div>
<div class="line-context">
<span class="line-number">400</span>            <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">401</span>                parent = stack[-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">402</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> any previous child was active</span>
</div>
<div class="line-context">
<span class="line-number">403</span>                <span class=<span class="string">"keyword"</span>>for</span> child <span class=<span class="string">"keyword"</span>>in</span> parent.children:
</div>
<div class="line-uncovered">
<span class="line-number">404</span>                    <span class=<span class="string">"keyword"</span>>if</span> child.is_active:
</div>
<div class="line-uncovered">
<span class="line-number">405</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">406</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">407</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">408</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">409</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">410</span>
</div>
<div class="line-context">
<span class="line-number">411</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">filter_tokens</span>(self, tokens: List[Token]) -> List[Token]:
</div>
<div class="line-context">
<span class="line-number">412</span>        <span class="string">""</span><span class="string">"Filter tokens based on preprocessor blocks, keeping only active content."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">413</span>        blocks = self.<span class="function">parse_preprocessor_blocks</span>(tokens)
</div>
<div class="line-context">
<span class="line-number">414</span>        filtered_tokens = []
</div>
<div class="line-context">
<span class="line-number">415</span>
</div>
</div>
<h4>Line 407</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">397</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">398</span>        <span class=<span class="string">"keyword"</span>>elif</span> directive == PreprocessorDirective.ELSE:
</div>
<div class="line-context">
<span class="line-number">399</span>            <span class="comment"># For #<span class=<span class="string">"keyword"</span>>else</span>, we need to check <span class=<span class="string">"keyword"</span>>if</span> no previous branch was taken</span>
</div>
<div class="line-context">
<span class="line-number">400</span>            <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">401</span>                parent = stack[-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">402</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> any previous child was active</span>
</div>
<div class="line-context">
<span class="line-number">403</span>                <span class=<span class="string">"keyword"</span>>for</span> child <span class=<span class="string">"keyword"</span>>in</span> parent.children:
</div>
<div class="line-context">
<span class="line-number">404</span>                    <span class=<span class="string">"keyword"</span>>if</span> child.is_active:
</div>
<div class="line-context">
<span class="line-number">405</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">406</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-uncovered">
<span class="line-number">407</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">408</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">409</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">410</span>
</div>
<div class="line-context">
<span class="line-number">411</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">filter_tokens</span>(self, tokens: List[Token]) -> List[Token]:
</div>
<div class="line-context">
<span class="line-number">412</span>        <span class="string">""</span><span class="string">"Filter tokens based on preprocessor blocks, keeping only active content."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">413</span>        blocks = self.<span class="function">parse_preprocessor_blocks</span>(tokens)
</div>
<div class="line-context">
<span class="line-number">414</span>        filtered_tokens = []
</div>
<div class="line-context">
<span class="line-number">415</span>
</div>
<div class="line-context">
<span class="line-number">416</span>        i = <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">417</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens):
</div>
</div>
<h4>Line 409</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">399</span>            <span class="comment"># For #<span class=<span class="string">"keyword"</span>>else</span>, we need to check <span class=<span class="string">"keyword"</span>>if</span> no previous branch was taken</span>
</div>
<div class="line-context">
<span class="line-number">400</span>            <span class=<span class="string">"keyword"</span>>if</span> stack:
</div>
<div class="line-context">
<span class="line-number">401</span>                parent = stack[-<span class="number">1</span>]
</div>
<div class="line-context">
<span class="line-number">402</span>                <span class="comment"># Check <span class=<span class="string">"keyword"</span>>if</span> any previous child was active</span>
</div>
<div class="line-context">
<span class="line-number">403</span>                <span class=<span class="string">"keyword"</span>>for</span> child <span class=<span class="string">"keyword"</span>>in</span> parent.children:
</div>
<div class="line-context">
<span class="line-number">404</span>                    <span class=<span class="string">"keyword"</span>>if</span> child.is_active:
</div>
<div class="line-context">
<span class="line-number">405</span>                        <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">406</span>                <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">407</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">408</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-uncovered">
<span class="line-number">409</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">410</span>
</div>
<div class="line-context">
<span class="line-number">411</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">filter_tokens</span>(self, tokens: List[Token]) -> List[Token]:
</div>
<div class="line-context">
<span class="line-number">412</span>        <span class="string">""</span><span class="string">"Filter tokens based on preprocessor blocks, keeping only active content."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">413</span>        blocks = self.<span class="function">parse_preprocessor_blocks</span>(tokens)
</div>
<div class="line-context">
<span class="line-number">414</span>        filtered_tokens = []
</div>
<div class="line-context">
<span class="line-number">415</span>
</div>
<div class="line-context">
<span class="line-number">416</span>        i = <span class="number">0</span>
</div>
<div class="line-context">
<span class="line-number">417</span>        <span class=<span class="string">"keyword"</span>>while</span> i < <span class="function">len</span>(tokens):
</div>
<div class="line-context">
<span class="line-number">418</span>            token = tokens[i]
</div>
<div class="line-context">
<span class="line-number">419</span>
</div>
</div>
<h4>Lines 471-472</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">461</span>
</div>
<div class="line-context">
<span class="line-number">462</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">463</span>        self.evaluator = <span class="function">PreprocessorEvaluator</span>()
</div>
<div class="line-context">
<span class="line-number">464</span>        self.logger = logging.<span class="function">getLogger</span>(__name__)
</div>
<div class="line-context">
<span class="line-number">465</span>
</div>
<div class="line-context">
<span class="line-number">466</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">process_file</span>(
</div>
<div class="line-context">
<span class="line-number">467</span>        self, tokens: List[Token], defines: Optional[Dict[str, str]] = <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number">468</span>    ) -> List[Token]:
</div>
<div class="line-context">
<span class="line-number">469</span>        <span class="string">""</span><span class="string">"Process a file's tokens through the preprocessor."</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">470</span>        <span class=<span class="string">"keyword"</span>>if</span> defines:
</div>
<div class="line-uncovered">
<span class="line-number">471</span>            <span class=<span class="string">"keyword"</span>>for</span> name, value <span class=<span class="string">"keyword"</span>>in</span> defines.<span class="function">items</span>():
</div>
<div class="line-uncovered">
<span class="line-number">472</span>                self.evaluator.<span class="function">add_define</span>(name, value)
</div>
<div class="line-context">
<span class="line-number">473</span>
</div>
<div class="line-context">
<span class="line-number">474</span>        <span class="comment"># Filter tokens based on preprocessor directives</span>
</div>
<div class="line-context">
<span class="line-number">475</span>        filtered_tokens = self.evaluator.<span class="function">filter_tokens</span>(tokens)
</div>
<div class="line-context">
<span class="line-number">476</span>
</div>
<div class="line-context">
<span class="line-number">477</span>        self.logger.<span class="function">debug</span>(
</div>
<div class="line-context">
<span class="line-number">478</span>            f<span class="string">"Preprocessor: {<span class="function">len</span>(tokens)} tokens -> {<span class="function">len</span>(filtered_tokens)} tokens"</span>
</div>
<div class="line-context">
<span class="line-number">479</span>        )
</div>
<div class="line-context">
<span class="line-number">480</span>        <span class=<span class="string">"keyword"</span>>return</span> filtered_tokens
</div>
<div class="line-context">
<span class="line-number">481</span>
</div>
<div class="line-context">
<span class="line-number">482</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">add_defines_from_content</span>(self, tokens: List[Token]):
</div>
</div>
<h4>Lines 488-491</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">478</span>            f<span class="string">"Preprocessor: {<span class="function">len</span>(tokens)} tokens -> {<span class="function">len</span>(filtered_tokens)} tokens"</span>
</div>
<div class="line-context">
<span class="line-number">479</span>        )
</div>
<div class="line-context">
<span class="line-number">480</span>        <span class=<span class="string">"keyword"</span>>return</span> filtered_tokens
</div>
<div class="line-context">
<span class="line-number">481</span>
</div>
<div class="line-context">
<span class="line-number">482</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">add_defines_from_content</span>(self, tokens: List[Token]):
</div>
<div class="line-context">
<span class="line-number">483</span>        <span class="string">""</span><span class="string">"Extract <span class="comment">#define directives <span class="</span>keyword<span class="string">">from</span> tokens <span class="</span>keyword<span class="string">">and</span> add them to the evaluator."</span><span class="string">""</span></span>
</div>
<div class="line-context">
<span class="line-number">484</span>        <span class=<span class="string">"keyword"</span>>for</span> token <span class=<span class="string">"keyword"</span>>in</span> tokens:
</div>
<div class="line-context">
<span class="line-number">485</span>            <span class=<span class="string">"keyword"</span>>if</span> token.type == TokenType.PREPROCESSOR <span class=<span class="string">"keyword"</span>>and</span> token.value.<span class="function">startswith</span>(
</div>
<div class="line-context">
<span class="line-number">486</span>                <span class="string">"<span class="comment">#define"</span></span>
</div>
<div class="line-context">
<span class="line-number">487</span>            ):
</div>
<div class="line-uncovered">
<span class="line-number">488</span>                name, value = self.evaluator.<span class="function">_parse_define</span>(token.value)
</div>
<div class="line-uncovered">
<span class="line-number">489</span>                <span class=<span class="string">"keyword"</span>>if</span> name:
</div>
<div class="line-uncovered">
<span class="line-number">490</span>                    self.evaluator.<span class="function">add_define</span>(name, value)
</div>
<div class="line-uncovered">
<span class="line-number">491</span>                    self.logger.<span class="function">debug</span>(<span class="string">"Preprocessor: Added define %s = %s"</span>, name, value)
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/utils.py
<span class="coverage-info">61.19% (41/67 lines covered)</span>
</div>
<h4>Line 13</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">  3</span>Utility functions <span class=<span class="string">"keyword"</span>>for</span> C to PlantUML converter
</div>
<div class="line-context">
<span class="line-number">  4</span><span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number">  5</span>
</div>
<div class="line-context">
<span class="line-number">  6</span><span class=<span class="string">"keyword"</span>>import</span> logging
</div>
<div class="line-context">
<span class="line-number">  7</span><span class=<span class="string">"keyword"</span>>from</span> pathlib <span class=<span class="string">"keyword"</span>>import</span> Path
</div>
<div class="line-context">
<span class="line-number">  8</span><span class=<span class="string">"keyword"</span>>from</span> typing <span class=<span class="string">"keyword"</span>>import</span> Dict, Optional
</div>
<div class="line-context">
<span class="line-number">  9</span>
</div>
<div class="line-context">
<span class="line-number"> 10</span><span class="comment"># Try to <span class=<span class="string">"keyword"</span>>import</span> chardet, fallback to basic encoding detection <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> available</span>
</div>
<div class="line-context">
<span class="line-number"> 11</span><span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 12</span>    <span class=<span class="string">"keyword"</span>>import</span> chardet
</div>
<div class="line-uncovered">
<span class="line-number"> 13</span>    CHARDET_AVAILABLE = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number"> 14</span><span class=<span class="string">"keyword"</span>>except</span> ImportError:
</div>
<div class="line-context">
<span class="line-number"> 15</span>    CHARDET_AVAILABLE = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number"> 16</span>
</div>
<div class="line-context">
<span class="line-number"> 17</span>
</div>
<div class="line-context">
<span class="line-number"> 18</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">detect_file_encoding</span>(file_path: Path) -> str:
</div>
<div class="line-context">
<span class="line-number"> 19</span>    <span class="string">""</span><span class="string">"Detect file encoding <span class="</span>keyword<span class="string">">with</span> platform-aware fallbacks"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 20</span>    <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 21</span>        <span class=<span class="string">"keyword"</span>>if</span> CHARDET_AVAILABLE:
</div>
<div class="line-context">
<span class="line-number"> 22</span>            <span class="comment"># Try to detect encoding <span class=<span class="string">"keyword"</span>>with</span> chardet</span>
</div>
<div class="line-context">
<span class="line-number"> 23</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"rb"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
</div>
<h4>Lines 23-28</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 13</span>    CHARDET_AVAILABLE = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number"> 14</span><span class=<span class="string">"keyword"</span>>except</span> ImportError:
</div>
<div class="line-context">
<span class="line-number"> 15</span>    CHARDET_AVAILABLE = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number"> 16</span>
</div>
<div class="line-context">
<span class="line-number"> 17</span>
</div>
<div class="line-context">
<span class="line-number"> 18</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">detect_file_encoding</span>(file_path: Path) -> str:
</div>
<div class="line-context">
<span class="line-number"> 19</span>    <span class="string">""</span><span class="string">"Detect file encoding <span class="</span>keyword<span class="string">">with</span> platform-aware fallbacks"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 20</span>    <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 21</span>        <span class=<span class="string">"keyword"</span>>if</span> CHARDET_AVAILABLE:
</div>
<div class="line-context">
<span class="line-number"> 22</span>            <span class="comment"># Try to detect encoding <span class=<span class="string">"keyword"</span>>with</span> chardet</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 23</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"rb"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-uncovered">
<span class="line-number"> 24</span>                raw_data = f.<span class="function">read</span>(<span class="number">1024</span>)  <span class="comment"># Read first 1KB <span class=<span class="string">"keyword"</span>>for</span> detection</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 25</span>                <span class=<span class="string">"keyword"</span>>if</span> raw_data:
</div>
<div class="line-uncovered">
<span class="line-number"> 26</span>                    result = chardet.<span class="function">detect</span>(raw_data)
</div>
<div class="line-uncovered">
<span class="line-number"> 27</span>                    <span class=<span class="string">"keyword"</span>>if</span> result <span class=<span class="string">"keyword"</span>>and</span> result[<span class="string">"confidence"</span>] > <span class="number">0</span>.<span class="number">7</span>:
</div>
<div class="line-uncovered">
<span class="line-number"> 28</span>                        <span class=<span class="string">"keyword"</span>>return</span> result[<span class="string">"encoding"</span>]
</div>
<div class="line-context">
<span class="line-number"> 29</span>
</div>
<div class="line-context">
<span class="line-number"> 30</span>        <span class="comment"># Fallback encodings <span class=<span class="string">"keyword"</span>>in</span> order of preference</span>
</div>
<div class="line-context">
<span class="line-number"> 31</span>        fallback_encodings = [<span class="string">"utf-<span class="number">8</span>"</span>, <span class="string">"latin-<span class="number">1</span>"</span>, <span class="string">"cp1252"</span>, <span class="string">"iso-<span class="number">8859</span>-<span class="number">1</span>"</span>]
</div>
<div class="line-context">
<span class="line-number"> 32</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span>        <span class=<span class="string">"keyword"</span>>for</span> encoding <span class=<span class="string">"keyword"</span>>in</span> fallback_encodings:
</div>
<div class="line-context">
<span class="line-number"> 34</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 35</span>                <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"r"</span>, encoding=encoding) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number"> 36</span>                    f.<span class="function">read</span>(<span class="number">1024</span>)  <span class="comment"># Test read</span>
</div>
<div class="line-context">
<span class="line-number"> 37</span>                <span class=<span class="string">"keyword"</span>>return</span> encoding
</div>
<div class="line-context">
<span class="line-number"> 38</span>            <span class=<span class="string">"keyword"</span>>except</span> (UnicodeDecodeError, UnicodeError):
</div>
</div>
<h4>Line 39</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 29</span>
</div>
<div class="line-context">
<span class="line-number"> 30</span>        <span class="comment"># Fallback encodings <span class=<span class="string">"keyword"</span>>in</span> order of preference</span>
</div>
<div class="line-context">
<span class="line-number"> 31</span>        fallback_encodings = [<span class="string">"utf-<span class="number">8</span>"</span>, <span class="string">"latin-<span class="number">1</span>"</span>, <span class="string">"cp1252"</span>, <span class="string">"iso-<span class="number">8859</span>-<span class="number">1</span>"</span>]
</div>
<div class="line-context">
<span class="line-number"> 32</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span>        <span class=<span class="string">"keyword"</span>>for</span> encoding <span class=<span class="string">"keyword"</span>>in</span> fallback_encodings:
</div>
<div class="line-context">
<span class="line-number"> 34</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 35</span>                <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"r"</span>, encoding=encoding) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number"> 36</span>                    f.<span class="function">read</span>(<span class="number">1024</span>)  <span class="comment"># Test read</span>
</div>
<div class="line-context">
<span class="line-number"> 37</span>                <span class=<span class="string">"keyword"</span>>return</span> encoding
</div>
<div class="line-context">
<span class="line-number"> 38</span>            <span class=<span class="string">"keyword"</span>>except</span> (UnicodeDecodeError, UnicodeError):
</div>
<div class="line-uncovered">
<span class="line-number"> 39</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number"> 40</span>
</div>
<div class="line-context">
<span class="line-number"> 41</span>        <span class="comment"># Final fallback</span>
</div>
<div class="line-context">
<span class="line-number"> 42</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">"utf-<span class="number">8</span>"</span>
</div>
<div class="line-context">
<span class="line-number"> 43</span>
</div>
<div class="line-context">
<span class="line-number"> 44</span>    <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number"> 45</span>        logging.<span class="function">warning</span>(f<span class="string">"Failed to detect encoding <span class="</span>keyword<span class="string">">for</span> {file_path}: {e}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 46</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">"utf-<span class="number">8</span>"</span>
</div>
<div class="line-context">
<span class="line-number"> 47</span>
</div>
<div class="line-context">
<span class="line-number"> 48</span>
</div>
<div class="line-context">
<span class="line-number"> 49</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_filename_from_path</span>(file_path: str) -> str:
</div>
</div>
<h4>Line 42</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 32</span>
</div>
<div class="line-context">
<span class="line-number"> 33</span>        <span class=<span class="string">"keyword"</span>>for</span> encoding <span class=<span class="string">"keyword"</span>>in</span> fallback_encodings:
</div>
<div class="line-context">
<span class="line-number"> 34</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 35</span>                <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(file_path, <span class="string">"r"</span>, encoding=encoding) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number"> 36</span>                    f.<span class="function">read</span>(<span class="number">1024</span>)  <span class="comment"># Test read</span>
</div>
<div class="line-context">
<span class="line-number"> 37</span>                <span class=<span class="string">"keyword"</span>>return</span> encoding
</div>
<div class="line-context">
<span class="line-number"> 38</span>            <span class=<span class="string">"keyword"</span>>except</span> (UnicodeDecodeError, UnicodeError):
</div>
<div class="line-context">
<span class="line-number"> 39</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number"> 40</span>
</div>
<div class="line-context">
<span class="line-number"> 41</span>        <span class="comment"># Final fallback</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 42</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">"utf-<span class="number">8</span>"</span>
</div>
<div class="line-context">
<span class="line-number"> 43</span>
</div>
<div class="line-context">
<span class="line-number"> 44</span>    <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number"> 45</span>        logging.<span class="function">warning</span>(f<span class="string">"Failed to detect encoding <span class="</span>keyword<span class="string">">for</span> {file_path}: {e}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 46</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">"utf-<span class="number">8</span>"</span>
</div>
<div class="line-context">
<span class="line-number"> 47</span>
</div>
<div class="line-context">
<span class="line-number"> 48</span>
</div>
<div class="line-context">
<span class="line-number"> 49</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_filename_from_path</span>(file_path: str) -> str:
</div>
<div class="line-context">
<span class="line-number"> 50</span>    <span class="string">""</span><span class="string">"Extract filename <span class="</span>keyword<span class="string">">from</span> a file <span class="function">path</span>(handles both absolute <span class="</span>keyword<span class="string">">and</span> relative paths)"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 51</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Path</span>(file_path).name
</div>
<div class="line-context">
<span class="line-number"> 52</span>
</div>
</div>
<h4>Line 51</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 41</span>        <span class="comment"># Final fallback</span>
</div>
<div class="line-context">
<span class="line-number"> 42</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">"utf-<span class="number">8</span>"</span>
</div>
<div class="line-context">
<span class="line-number"> 43</span>
</div>
<div class="line-context">
<span class="line-number"> 44</span>    <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number"> 45</span>        logging.<span class="function">warning</span>(f<span class="string">"Failed to detect encoding <span class="</span>keyword<span class="string">">for</span> {file_path}: {e}"</span>)
</div>
<div class="line-context">
<span class="line-number"> 46</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">"utf-<span class="number">8</span>"</span>
</div>
<div class="line-context">
<span class="line-number"> 47</span>
</div>
<div class="line-context">
<span class="line-number"> 48</span>
</div>
<div class="line-context">
<span class="line-number"> 49</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_filename_from_path</span>(file_path: str) -> str:
</div>
<div class="line-context">
<span class="line-number"> 50</span>    <span class="string">""</span><span class="string">"Extract filename <span class="</span>keyword<span class="string">">from</span> a file <span class="function">path</span>(handles both absolute <span class="</span>keyword<span class="string">">and</span> relative paths)"</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 51</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">Path</span>(file_path).name
</div>
<div class="line-context">
<span class="line-number"> 52</span>
</div>
<div class="line-context">
<span class="line-number"> 53</span>
</div>
<div class="line-context">
<span class="line-number"> 54</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">find_file_by_filename</span>(filename: str, file_dict: Dict[str, any]) -> Optional[str]:
</div>
<div class="line-context">
<span class="line-number"> 55</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 56</span>    Find a file <span class=<span class="string">"keyword"</span>>in</span> a dictionary by matching its filename.
</div>
<div class="line-context">
<span class="line-number"> 57</span>
</div>
<div class="line-context">
<span class="line-number"> 58</span>    Args:
</div>
<div class="line-context">
<span class="line-number"> 59</span>        filename: The filename to search <span class=<span class="string">"keyword"</span>>for</span> (e.g., <span class="string">"header.h"</span>)
</div>
<div class="line-context">
<span class="line-number"> 60</span>        file_dict: Dictionary <span class=<span class="string">"keyword"</span>>with</span> file paths <span class=<span class="string">"keyword"</span>>as</span> keys
</div>
<div class="line-context">
<span class="line-number"> 61</span>
</div>
</div>
<h4>Lines 66-67</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 56</span>    Find a file <span class=<span class="string">"keyword"</span>>in</span> a dictionary by matching its filename.
</div>
<div class="line-context">
<span class="line-number"> 57</span>
</div>
<div class="line-context">
<span class="line-number"> 58</span>    Args:
</div>
<div class="line-context">
<span class="line-number"> 59</span>        filename: The filename to search <span class=<span class="string">"keyword"</span>>for</span> (e.g., <span class="string">"header.h"</span>)
</div>
<div class="line-context">
<span class="line-number"> 60</span>        file_dict: Dictionary <span class=<span class="string">"keyword"</span>>with</span> file paths <span class=<span class="string">"keyword"</span>>as</span> keys
</div>
<div class="line-context">
<span class="line-number"> 61</span>
</div>
<div class="line-context">
<span class="line-number"> 62</span>    Returns:
</div>
<div class="line-context">
<span class="line-number"> 63</span>        The matching file path key, <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>None</span> <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> found
</div>
<div class="line-context">
<span class="line-number"> 64</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 65</span>    <span class="comment"># First <span class=<span class="string">"keyword"</span>>try</span> exact match</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 66</span>    <span class=<span class="string">"keyword"</span>>if</span> filename <span class=<span class="string">"keyword"</span>>in</span> file_dict:
</div>
<div class="line-uncovered">
<span class="line-number"> 67</span>        <span class=<span class="string">"keyword"</span>>return</span> filename
</div>
<div class="line-context">
<span class="line-number"> 68</span>
</div>
<div class="line-context">
<span class="line-number"> 69</span>    <span class="comment"># Try matching by filename</span>
</div>
<div class="line-context">
<span class="line-number"> 70</span>    <span class=<span class="string">"keyword"</span>>for</span> file_path <span class=<span class="string">"keyword"</span>>in</span> file_dict.<span class="function">keys</span>():
</div>
<div class="line-context">
<span class="line-number"> 71</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">Path</span>(file_path).name == filename:
</div>
<div class="line-context">
<span class="line-number"> 72</span>            <span class=<span class="string">"keyword"</span>>return</span> file_path
</div>
<div class="line-context">
<span class="line-number"> 73</span>
</div>
<div class="line-context">
<span class="line-number"> 74</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number"> 75</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">normalize_file_path</span>(file_path: str, project_root: str = <span class=<span class="string">"keyword"</span>>None</span>) -> str:
</div>
</div>
<h4>Lines 70-72</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 60</span>        file_dict: Dictionary <span class=<span class="string">"keyword"</span>>with</span> file paths <span class=<span class="string">"keyword"</span>>as</span> keys
</div>
<div class="line-context">
<span class="line-number"> 61</span>
</div>
<div class="line-context">
<span class="line-number"> 62</span>    Returns:
</div>
<div class="line-context">
<span class="line-number"> 63</span>        The matching file path key, <span class=<span class="string">"keyword"</span>>or</span> <span class=<span class="string">"keyword"</span>>None</span> <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> found
</div>
<div class="line-context">
<span class="line-number"> 64</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 65</span>    <span class="comment"># First <span class=<span class="string">"keyword"</span>>try</span> exact match</span>
</div>
<div class="line-context">
<span class="line-number"> 66</span>    <span class=<span class="string">"keyword"</span>>if</span> filename <span class=<span class="string">"keyword"</span>>in</span> file_dict:
</div>
<div class="line-context">
<span class="line-number"> 67</span>        <span class=<span class="string">"keyword"</span>>return</span> filename
</div>
<div class="line-context">
<span class="line-number"> 68</span>
</div>
<div class="line-context">
<span class="line-number"> 69</span>    <span class="comment"># Try matching by filename</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 70</span>    <span class=<span class="string">"keyword"</span>>for</span> file_path <span class=<span class="string">"keyword"</span>>in</span> file_dict.<span class="function">keys</span>():
</div>
<div class="line-uncovered">
<span class="line-number"> 71</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">Path</span>(file_path).name == filename:
</div>
<div class="line-uncovered">
<span class="line-number"> 72</span>            <span class=<span class="string">"keyword"</span>>return</span> file_path
</div>
<div class="line-context">
<span class="line-number"> 73</span>
</div>
<div class="line-context">
<span class="line-number"> 74</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number"> 75</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">normalize_file_path</span>(file_path: str, project_root: str = <span class=<span class="string">"keyword"</span>>None</span>) -> str:
</div>
<div class="line-context">
<span class="line-number"> 78</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 79</span>    Normalize file path <span class=<span class="string">"keyword"</span>>for</span> consistent handling.
</div>
<div class="line-context">
<span class="line-number"> 80</span>    For tracking purposes, we prefer relative paths when possible.
</div>
<div class="line-context">
<span class="line-number"> 81</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>    Args:
</div>
</div>
<h4>Line 74</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 64</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 65</span>    <span class="comment"># First <span class=<span class="string">"keyword"</span>>try</span> exact match</span>
</div>
<div class="line-context">
<span class="line-number"> 66</span>    <span class=<span class="string">"keyword"</span>>if</span> filename <span class=<span class="string">"keyword"</span>>in</span> file_dict:
</div>
<div class="line-context">
<span class="line-number"> 67</span>        <span class=<span class="string">"keyword"</span>>return</span> filename
</div>
<div class="line-context">
<span class="line-number"> 68</span>
</div>
<div class="line-context">
<span class="line-number"> 69</span>    <span class="comment"># Try matching by filename</span>
</div>
<div class="line-context">
<span class="line-number"> 70</span>    <span class=<span class="string">"keyword"</span>>for</span> file_path <span class=<span class="string">"keyword"</span>>in</span> file_dict.<span class="function">keys</span>():
</div>
<div class="line-context">
<span class="line-number"> 71</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">Path</span>(file_path).name == filename:
</div>
<div class="line-context">
<span class="line-number"> 72</span>            <span class=<span class="string">"keyword"</span>>return</span> file_path
</div>
<div class="line-context">
<span class="line-number"> 73</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 74</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>None</span>
</div>
<div class="line-context">
<span class="line-number"> 75</span>
</div>
<div class="line-context">
<span class="line-number"> 76</span>
</div>
<div class="line-context">
<span class="line-number"> 77</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">normalize_file_path</span>(file_path: str, project_root: str = <span class=<span class="string">"keyword"</span>>None</span>) -> str:
</div>
<div class="line-context">
<span class="line-number"> 78</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 79</span>    Normalize file path <span class=<span class="string">"keyword"</span>>for</span> consistent handling.
</div>
<div class="line-context">
<span class="line-number"> 80</span>    For tracking purposes, we prefer relative paths when possible.
</div>
<div class="line-context">
<span class="line-number"> 81</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>    Args:
</div>
<div class="line-context">
<span class="line-number"> 83</span>        file_path: The file path to normalize
</div>
<div class="line-context">
<span class="line-number"> 84</span>        project_root: Optional project root <span class=<span class="string">"keyword"</span>>for</span> relative path conversion
</div>
</div>
<h4>Line 89</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 79</span>    Normalize file path <span class=<span class="string">"keyword"</span>>for</span> consistent handling.
</div>
<div class="line-context">
<span class="line-number"> 80</span>    For tracking purposes, we prefer relative paths when possible.
</div>
<div class="line-context">
<span class="line-number"> 81</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>    Args:
</div>
<div class="line-context">
<span class="line-number"> 83</span>        file_path: The file path to normalize
</div>
<div class="line-context">
<span class="line-number"> 84</span>        project_root: Optional project root <span class=<span class="string">"keyword"</span>>for</span> relative path conversion
</div>
<div class="line-context">
<span class="line-number"> 85</span>
</div>
<div class="line-context">
<span class="line-number"> 86</span>    Returns:
</div>
<div class="line-context">
<span class="line-number"> 87</span>        Normalized file path
</div>
<div class="line-context">
<span class="line-number"> 88</span>    <span class="string">""</span>"
</div>
<div class="line-uncovered">
<span class="line-number"> 89</span>    path_obj = <span class="function">Path</span>(file_path)
</div>
<div class="line-context">
<span class="line-number"> 90</span>
</div>
<div class="line-context">
<span class="line-number"> 91</span>    <span class="comment"># If we have a project root <span class=<span class="string">"keyword"</span>>and</span> the path <span class=<span class="string">"keyword"</span>>is</span> absolute, <span class=<span class="string">"keyword"</span>>try</span> to make it relative</span>
</div>
<div class="line-context">
<span class="line-number"> 92</span>    <span class=<span class="string">"keyword"</span>>if</span> project_root <span class=<span class="string">"keyword"</span>>and</span> path_obj.<span class="function">is_absolute</span>():
</div>
<div class="line-context">
<span class="line-number"> 93</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 94</span>            relative_path = path_obj.<span class="function">relative_to</span>(<span class="function">Path</span>(project_root))
</div>
<div class="line-context">
<span class="line-number"> 95</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">str</span>(relative_path)
</div>
<div class="line-context">
<span class="line-number"> 96</span>        <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number"> 97</span>            <span class="comment"># Path <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> relative to project root, keep <span class=<span class="string">"keyword"</span>>as</span> <span class=<span class="string">"keyword"</span>>is</span></span>
</div>
<div class="line-context">
<span class="line-number"> 98</span>            <span class=<span class="string">"keyword"</span>>pass</span>
</div>
<div class="line-context">
<span class="line-number"> 99</span>
</div>
</div>
<h4>Lines 92-96</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 82</span>    Args:
</div>
<div class="line-context">
<span class="line-number"> 83</span>        file_path: The file path to normalize
</div>
<div class="line-context">
<span class="line-number"> 84</span>        project_root: Optional project root <span class=<span class="string">"keyword"</span>>for</span> relative path conversion
</div>
<div class="line-context">
<span class="line-number"> 85</span>
</div>
<div class="line-context">
<span class="line-number"> 86</span>    Returns:
</div>
<div class="line-context">
<span class="line-number"> 87</span>        Normalized file path
</div>
<div class="line-context">
<span class="line-number"> 88</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 89</span>    path_obj = <span class="function">Path</span>(file_path)
</div>
<div class="line-context">
<span class="line-number"> 90</span>
</div>
<div class="line-context">
<span class="line-number"> 91</span>    <span class="comment"># If we have a project root <span class=<span class="string">"keyword"</span>>and</span> the path <span class=<span class="string">"keyword"</span>>is</span> absolute, <span class=<span class="string">"keyword"</span>>try</span> to make it relative</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 92</span>    <span class=<span class="string">"keyword"</span>>if</span> project_root <span class=<span class="string">"keyword"</span>>and</span> path_obj.<span class="function">is_absolute</span>():
</div>
<div class="line-uncovered">
<span class="line-number"> 93</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-uncovered">
<span class="line-number"> 94</span>            relative_path = path_obj.<span class="function">relative_to</span>(<span class="function">Path</span>(project_root))
</div>
<div class="line-uncovered">
<span class="line-number"> 95</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">str</span>(relative_path)
</div>
<div class="line-uncovered">
<span class="line-number"> 96</span>        <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number"> 97</span>            <span class="comment"># Path <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> relative to project root, keep <span class=<span class="string">"keyword"</span>>as</span> <span class=<span class="string">"keyword"</span>>is</span></span>
</div>
<div class="line-context">
<span class="line-number"> 98</span>            <span class=<span class="string">"keyword"</span>>pass</span>
</div>
<div class="line-context">
<span class="line-number"> 99</span>
</div>
<div class="line-context">
<span class="line-number">100</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">str</span>(path_obj)
</div>
<div class="line-context">
<span class="line-number">101</span>
</div>
<div class="line-context">
<span class="line-number">102</span>
</div>
<div class="line-context">
<span class="line-number">103</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">create_file_key</span>(file_path: str, project_root: str = <span class=<span class="string">"keyword"</span>>None</span>) -> str:
</div>
<div class="line-context">
<span class="line-number">104</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number">105</span>    Create a consistent file key <span class=<span class="string">"keyword"</span>>for</span> tracking.
</div>
<div class="line-context">
<span class="line-number">106</span>    Uses filename <span class=<span class="string">"keyword"</span>>for</span> uniqueness since filenames are unique <span class=<span class="string">"keyword"</span>>in</span> the project.
</div>
</div>
<h4>Line 98</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 88</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number"> 89</span>    path_obj = <span class="function">Path</span>(file_path)
</div>
<div class="line-context">
<span class="line-number"> 90</span>
</div>
<div class="line-context">
<span class="line-number"> 91</span>    <span class="comment"># If we have a project root <span class=<span class="string">"keyword"</span>>and</span> the path <span class=<span class="string">"keyword"</span>>is</span> absolute, <span class=<span class="string">"keyword"</span>>try</span> to make it relative</span>
</div>
<div class="line-context">
<span class="line-number"> 92</span>    <span class=<span class="string">"keyword"</span>>if</span> project_root <span class=<span class="string">"keyword"</span>>and</span> path_obj.<span class="function">is_absolute</span>():
</div>
<div class="line-context">
<span class="line-number"> 93</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 94</span>            relative_path = path_obj.<span class="function">relative_to</span>(<span class="function">Path</span>(project_root))
</div>
<div class="line-context">
<span class="line-number"> 95</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">str</span>(relative_path)
</div>
<div class="line-context">
<span class="line-number"> 96</span>        <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number"> 97</span>            <span class="comment"># Path <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> relative to project root, keep <span class=<span class="string">"keyword"</span>>as</span> <span class=<span class="string">"keyword"</span>>is</span></span>
</div>
<div class="line-uncovered">
<span class="line-number"> 98</span>            <span class=<span class="string">"keyword"</span>>pass</span>
</div>
<div class="line-context">
<span class="line-number"> 99</span>
</div>
<div class="line-context">
<span class="line-number">100</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">str</span>(path_obj)
</div>
<div class="line-context">
<span class="line-number">101</span>
</div>
<div class="line-context">
<span class="line-number">102</span>
</div>
<div class="line-context">
<span class="line-number">103</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">create_file_key</span>(file_path: str, project_root: str = <span class=<span class="string">"keyword"</span>>None</span>) -> str:
</div>
<div class="line-context">
<span class="line-number">104</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number">105</span>    Create a consistent file key <span class=<span class="string">"keyword"</span>>for</span> tracking.
</div>
<div class="line-context">
<span class="line-number">106</span>    Uses filename <span class=<span class="string">"keyword"</span>>for</span> uniqueness since filenames are unique <span class=<span class="string">"keyword"</span>>in</span> the project.
</div>
<div class="line-context">
<span class="line-number">107</span>
</div>
<div class="line-context">
<span class="line-number">108</span>    Args:
</div>
</div>
<h4>Line 100</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 90</span>
</div>
<div class="line-context">
<span class="line-number"> 91</span>    <span class="comment"># If we have a project root <span class=<span class="string">"keyword"</span>>and</span> the path <span class=<span class="string">"keyword"</span>>is</span> absolute, <span class=<span class="string">"keyword"</span>>try</span> to make it relative</span>
</div>
<div class="line-context">
<span class="line-number"> 92</span>    <span class=<span class="string">"keyword"</span>>if</span> project_root <span class=<span class="string">"keyword"</span>>and</span> path_obj.<span class="function">is_absolute</span>():
</div>
<div class="line-context">
<span class="line-number"> 93</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number"> 94</span>            relative_path = path_obj.<span class="function">relative_to</span>(<span class="function">Path</span>(project_root))
</div>
<div class="line-context">
<span class="line-number"> 95</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">str</span>(relative_path)
</div>
<div class="line-context">
<span class="line-number"> 96</span>        <span class=<span class="string">"keyword"</span>>except</span> ValueError:
</div>
<div class="line-context">
<span class="line-number"> 97</span>            <span class="comment"># Path <span class=<span class="string">"keyword"</span>>is</span> <span class=<span class="string">"keyword"</span>>not</span> relative to project root, keep <span class=<span class="string">"keyword"</span>>as</span> <span class=<span class="string">"keyword"</span>>is</span></span>
</div>
<div class="line-context">
<span class="line-number"> 98</span>            <span class=<span class="string">"keyword"</span>>pass</span>
</div>
<div class="line-context">
<span class="line-number"> 99</span>
</div>
<div class="line-uncovered">
<span class="line-number">100</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">str</span>(path_obj)
</div>
<div class="line-context">
<span class="line-number">101</span>
</div>
<div class="line-context">
<span class="line-number">102</span>
</div>
<div class="line-context">
<span class="line-number">103</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">create_file_key</span>(file_path: str, project_root: str = <span class=<span class="string">"keyword"</span>>None</span>) -> str:
</div>
<div class="line-context">
<span class="line-number">104</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number">105</span>    Create a consistent file key <span class=<span class="string">"keyword"</span>>for</span> tracking.
</div>
<div class="line-context">
<span class="line-number">106</span>    Uses filename <span class=<span class="string">"keyword"</span>>for</span> uniqueness since filenames are unique <span class=<span class="string">"keyword"</span>>in</span> the project.
</div>
<div class="line-context">
<span class="line-number">107</span>
</div>
<div class="line-context">
<span class="line-number">108</span>    Args:
</div>
<div class="line-context">
<span class="line-number">109</span>        file_path: The file path
</div>
<div class="line-context">
<span class="line-number">110</span>        project_root: Optional project root <span class=<span class="string">"keyword"</span>>for</span> normalization
</div>
</div>
<h4>Line 115</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">105</span>    Create a consistent file key <span class=<span class="string">"keyword"</span>>for</span> tracking.
</div>
<div class="line-context">
<span class="line-number">106</span>    Uses filename <span class=<span class="string">"keyword"</span>>for</span> uniqueness since filenames are unique <span class=<span class="string">"keyword"</span>>in</span> the project.
</div>
<div class="line-context">
<span class="line-number">107</span>
</div>
<div class="line-context">
<span class="line-number">108</span>    Args:
</div>
<div class="line-context">
<span class="line-number">109</span>        file_path: The file path
</div>
<div class="line-context">
<span class="line-number">110</span>        project_root: Optional project root <span class=<span class="string">"keyword"</span>>for</span> normalization
</div>
<div class="line-context">
<span class="line-number">111</span>
</div>
<div class="line-context">
<span class="line-number">112</span>    Returns:
</div>
<div class="line-context">
<span class="line-number">113</span>        A consistent file <span class="function">key</span>(filename)
</div>
<div class="line-context">
<span class="line-number">114</span>    <span class="string">""</span>"
</div>
<div class="line-uncovered">
<span class="line-number">115</span>    <span class=<span class="string">"keyword"</span>>return</span> <span class="function">get_filename_from_path</span>(file_path)
</div>
<div class="line-context">
<span class="line-number">116</span>
</div>
<div class="line-context">
<span class="line-number">117</span>
</div>
<div class="line-context">
<span class="line-number">118</span><span class="comment"># Backward compatibility functions <span class=<span class="string">"keyword"</span>>for</span> existing tests</span>
</div>
<div class="line-context">
<span class="line-number">119</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_acceptable_encodings</span>() -> list:
</div>
<div class="line-context">
<span class="line-number">120</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number">121</span>    Get a list of acceptable encodings <span class=<span class="string">"keyword"</span>>for</span> cross-platform compatibility.
</div>
<div class="line-context">
<span class="line-number">122</span>
</div>
<div class="line-context">
<span class="line-number">123</span>    Returns:
</div>
<div class="line-context">
<span class="line-number">124</span>        List of encoding names that are considered acceptable across platforms.
</div>
<div class="line-context">
<span class="line-number">125</span>    <span class="string">""</span>"
</div>
</div>
<h4>Line 187</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">177</span>
</div>
<div class="line-context">
<span class="line-number">178</span><span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_platform_default_encoding</span>() -> str:
</div>
<div class="line-context">
<span class="line-number">179</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number">180</span>    Get the default encoding <span class=<span class="string">"keyword"</span>>for</span> the current platform.
</div>
<div class="line-context">
<span class="line-number">181</span>
</div>
<div class="line-context">
<span class="line-number">182</span>    Returns:
</div>
<div class="line-context">
<span class="line-number">183</span>        The default encoding name <span class=<span class="string">"keyword"</span>>for</span> the current platform.
</div>
<div class="line-context">
<span class="line-number">184</span>    <span class="string">""</span>"
</div>
<div class="line-context">
<span class="line-number">185</span>    <span class=<span class="string">"keyword"</span>>import</span> sys
</div>
<div class="line-context">
<span class="line-number">186</span>    <span class=<span class="string">"keyword"</span>>if</span> sys.platform.<span class="function">startswith</span>(<span class="string">"win"</span>):
</div>
<div class="line-uncovered">
<span class="line-number">187</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">"windows-<span class="number">1252</span>"</span>  <span class="comment"># Common Windows default</span>
</div>
<div class="line-context">
<span class="line-number">188</span>    <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number">189</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="string">"utf-<span class="number">8</span>"</span>  <span class="comment"># Common Unix/Linux default</span>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">
üìÅ /workspace/c_to_plantuml/config.py
<span class="coverage-info">89.00% (178/200 lines covered)</span>
</div>
<h4>Line 54</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 44</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__init__</span>(self, *args, **kwargs):
</div>
<div class="line-context">
<span class="line-number"> 45</span>        <span class="string">""</span><span class="string">"Initialize configuration <span class="</span>keyword<span class="string">">with</span> keyword arguments <span class="</span>keyword<span class="string">">or</span> a single dict"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number"> 46</span>        <span class="comment"># Initialize logger</span>
</div>
<div class="line-context">
<span class="line-number"> 47</span>        self.logger = logging.<span class="function">getLogger</span>(__name__)
</div>
<div class="line-context">
<span class="line-number"> 48</span>
</div>
<div class="line-context">
<span class="line-number"> 49</span>        <span class="comment"># Initialize <span class=<span class="string">"keyword"</span>>with</span> default values first</span>
</div>
<div class="line-context">
<span class="line-number"> 50</span>        object.<span class="function">__init__</span>(self)
</div>
<div class="line-context">
<span class="line-number"> 51</span>
</div>
<div class="line-context">
<span class="line-number"> 52</span>        <span class="comment"># Ensure all dataclass fields are initialized <span class=<span class="string">"keyword"</span>>with</span> defaults</span>
</div>
<div class="line-context">
<span class="line-number"> 53</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"project_name"</span>):
</div>
<div class="line-uncovered">
<span class="line-number"> 54</span>            self.project_name = <span class="string">"Unknown_Project"</span>
</div>
<div class="line-context">
<span class="line-number"> 55</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"source_folders"</span>):
</div>
<div class="line-context">
<span class="line-number"> 56</span>            self.source_folders = []
</div>
<div class="line-context">
<span class="line-number"> 57</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"output_dir"</span>):
</div>
<div class="line-context">
<span class="line-number"> 58</span>            self.output_dir = <span class="string">"./output"</span>
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"model_output_path"</span>):
</div>
<div class="line-context">
<span class="line-number"> 60</span>            self.model_output_path = <span class="string">"model.json"</span>
</div>
<div class="line-context">
<span class="line-number"> 61</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"recursive_search"</span>):
</div>
<div class="line-context">
<span class="line-number"> 62</span>            self.recursive_search = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"include_depth"</span>):
</div>
<div class="line-context">
<span class="line-number"> 64</span>            self.include_depth = <span class="number">1</span>
</div>
</div>
<h4>Line 58</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 48</span>
</div>
<div class="line-context">
<span class="line-number"> 49</span>        <span class="comment"># Initialize <span class=<span class="string">"keyword"</span>>with</span> default values first</span>
</div>
<div class="line-context">
<span class="line-number"> 50</span>        object.<span class="function">__init__</span>(self)
</div>
<div class="line-context">
<span class="line-number"> 51</span>
</div>
<div class="line-context">
<span class="line-number"> 52</span>        <span class="comment"># Ensure all dataclass fields are initialized <span class=<span class="string">"keyword"</span>>with</span> defaults</span>
</div>
<div class="line-context">
<span class="line-number"> 53</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"project_name"</span>):
</div>
<div class="line-context">
<span class="line-number"> 54</span>            self.project_name = <span class="string">"Unknown_Project"</span>
</div>
<div class="line-context">
<span class="line-number"> 55</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"source_folders"</span>):
</div>
<div class="line-context">
<span class="line-number"> 56</span>            self.source_folders = []
</div>
<div class="line-context">
<span class="line-number"> 57</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"output_dir"</span>):
</div>
<div class="line-uncovered">
<span class="line-number"> 58</span>            self.output_dir = <span class="string">"./output"</span>
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"model_output_path"</span>):
</div>
<div class="line-context">
<span class="line-number"> 60</span>            self.model_output_path = <span class="string">"model.json"</span>
</div>
<div class="line-context">
<span class="line-number"> 61</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"recursive_search"</span>):
</div>
<div class="line-context">
<span class="line-number"> 62</span>            self.recursive_search = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"include_depth"</span>):
</div>
<div class="line-context">
<span class="line-number"> 64</span>            self.include_depth = <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"file_filters"</span>):
</div>
<div class="line-context">
<span class="line-number"> 66</span>            self.file_filters = {}
</div>
<div class="line-context">
<span class="line-number"> 67</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"element_filters"</span>):
</div>
<div class="line-context">
<span class="line-number"> 68</span>            self.element_filters = {}
</div>
</div>
<h4>Line 60</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 50</span>        object.<span class="function">__init__</span>(self)
</div>
<div class="line-context">
<span class="line-number"> 51</span>
</div>
<div class="line-context">
<span class="line-number"> 52</span>        <span class="comment"># Ensure all dataclass fields are initialized <span class=<span class="string">"keyword"</span>>with</span> defaults</span>
</div>
<div class="line-context">
<span class="line-number"> 53</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"project_name"</span>):
</div>
<div class="line-context">
<span class="line-number"> 54</span>            self.project_name = <span class="string">"Unknown_Project"</span>
</div>
<div class="line-context">
<span class="line-number"> 55</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"source_folders"</span>):
</div>
<div class="line-context">
<span class="line-number"> 56</span>            self.source_folders = []
</div>
<div class="line-context">
<span class="line-number"> 57</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"output_dir"</span>):
</div>
<div class="line-context">
<span class="line-number"> 58</span>            self.output_dir = <span class="string">"./output"</span>
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"model_output_path"</span>):
</div>
<div class="line-uncovered">
<span class="line-number"> 60</span>            self.model_output_path = <span class="string">"model.json"</span>
</div>
<div class="line-context">
<span class="line-number"> 61</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"recursive_search"</span>):
</div>
<div class="line-context">
<span class="line-number"> 62</span>            self.recursive_search = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"include_depth"</span>):
</div>
<div class="line-context">
<span class="line-number"> 64</span>            self.include_depth = <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"file_filters"</span>):
</div>
<div class="line-context">
<span class="line-number"> 66</span>            self.file_filters = {}
</div>
<div class="line-context">
<span class="line-number"> 67</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"element_filters"</span>):
</div>
<div class="line-context">
<span class="line-number"> 68</span>            self.element_filters = {}
</div>
<div class="line-context">
<span class="line-number"> 69</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"transformations"</span>):
</div>
<div class="line-context">
<span class="line-number"> 70</span>            self.transformations = {}
</div>
</div>
<h4>Line 62</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 52</span>        <span class="comment"># Ensure all dataclass fields are initialized <span class=<span class="string">"keyword"</span>>with</span> defaults</span>
</div>
<div class="line-context">
<span class="line-number"> 53</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"project_name"</span>):
</div>
<div class="line-context">
<span class="line-number"> 54</span>            self.project_name = <span class="string">"Unknown_Project"</span>
</div>
<div class="line-context">
<span class="line-number"> 55</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"source_folders"</span>):
</div>
<div class="line-context">
<span class="line-number"> 56</span>            self.source_folders = []
</div>
<div class="line-context">
<span class="line-number"> 57</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"output_dir"</span>):
</div>
<div class="line-context">
<span class="line-number"> 58</span>            self.output_dir = <span class="string">"./output"</span>
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"model_output_path"</span>):
</div>
<div class="line-context">
<span class="line-number"> 60</span>            self.model_output_path = <span class="string">"model.json"</span>
</div>
<div class="line-context">
<span class="line-number"> 61</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"recursive_search"</span>):
</div>
<div class="line-uncovered">
<span class="line-number"> 62</span>            self.recursive_search = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"include_depth"</span>):
</div>
<div class="line-context">
<span class="line-number"> 64</span>            self.include_depth = <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"file_filters"</span>):
</div>
<div class="line-context">
<span class="line-number"> 66</span>            self.file_filters = {}
</div>
<div class="line-context">
<span class="line-number"> 67</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"element_filters"</span>):
</div>
<div class="line-context">
<span class="line-number"> 68</span>            self.element_filters = {}
</div>
<div class="line-context">
<span class="line-number"> 69</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"transformations"</span>):
</div>
<div class="line-context">
<span class="line-number"> 70</span>            self.transformations = {}
</div>
<div class="line-context">
<span class="line-number"> 71</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"file_include_patterns"</span>):
</div>
<div class="line-context">
<span class="line-number"> 72</span>            self.file_include_patterns = []
</div>
</div>
<h4>Line 64</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 54</span>            self.project_name = <span class="string">"Unknown_Project"</span>
</div>
<div class="line-context">
<span class="line-number"> 55</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"source_folders"</span>):
</div>
<div class="line-context">
<span class="line-number"> 56</span>            self.source_folders = []
</div>
<div class="line-context">
<span class="line-number"> 57</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"output_dir"</span>):
</div>
<div class="line-context">
<span class="line-number"> 58</span>            self.output_dir = <span class="string">"./output"</span>
</div>
<div class="line-context">
<span class="line-number"> 59</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"model_output_path"</span>):
</div>
<div class="line-context">
<span class="line-number"> 60</span>            self.model_output_path = <span class="string">"model.json"</span>
</div>
<div class="line-context">
<span class="line-number"> 61</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"recursive_search"</span>):
</div>
<div class="line-context">
<span class="line-number"> 62</span>            self.recursive_search = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number"> 63</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"include_depth"</span>):
</div>
<div class="line-uncovered">
<span class="line-number"> 64</span>            self.include_depth = <span class="number">1</span>
</div>
<div class="line-context">
<span class="line-number"> 65</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"file_filters"</span>):
</div>
<div class="line-context">
<span class="line-number"> 66</span>            self.file_filters = {}
</div>
<div class="line-context">
<span class="line-number"> 67</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"element_filters"</span>):
</div>
<div class="line-context">
<span class="line-number"> 68</span>            self.element_filters = {}
</div>
<div class="line-context">
<span class="line-number"> 69</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"transformations"</span>):
</div>
<div class="line-context">
<span class="line-number"> 70</span>            self.transformations = {}
</div>
<div class="line-context">
<span class="line-number"> 71</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"file_include_patterns"</span>):
</div>
<div class="line-context">
<span class="line-number"> 72</span>            self.file_include_patterns = []
</div>
<div class="line-context">
<span class="line-number"> 73</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">hasattr</span>(self, <span class="string">"file_exclude_patterns"</span>):
</div>
<div class="line-context">
<span class="line-number"> 74</span>            self.file_exclude_patterns = []
</div>
</div>
<h4>Lines 89-92</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 79</span>
</div>
<div class="line-context">
<span class="line-number"> 80</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="function">len</span>(args) == <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> <span class="function">isinstance</span>(args[<span class="number">0</span>], dict):
</div>
<div class="line-context">
<span class="line-number"> 81</span>            <span class="comment"># Handle case where a single dict <span class=<span class="string">"keyword"</span>>is</span> passed <span class=<span class="string">"keyword"</span>>as</span> positional argument</span>
</div>
<div class="line-context">
<span class="line-number"> 82</span>            data = args[<span class="number">0</span>]
</div>
<div class="line-context">
<span class="line-number"> 83</span>            <span class="comment"># Set attributes manually</span>
</div>
<div class="line-context">
<span class="line-number"> 84</span>            <span class=<span class="string">"keyword"</span>>for</span> key, value <span class=<span class="string">"keyword"</span>>in</span> data.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number"> 85</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="function">hasattr</span>(self, key):
</div>
<div class="line-context">
<span class="line-number"> 86</span>                    <span class="function">setattr</span>(self, key, value)
</div>
<div class="line-context">
<span class="line-number"> 87</span>        <span class=<span class="string">"keyword"</span>>elif</span> <span class="function">len</span>(kwargs) == <span class="number">1</span> <span class=<span class="string">"keyword"</span>>and</span> <span class="function">isinstance</span>(<span class="function">next</span>(<span class="function">iter</span>(kwargs.<span class="function">values</span>())), dict):
</div>
<div class="line-context">
<span class="line-number"> 88</span>            <span class="comment"># Handle case where a single dict <span class=<span class="string">"keyword"</span>>is</span> passed <span class=<span class="string">"keyword"</span>>as</span> keyword argument</span>
</div>
<div class="line-uncovered">
<span class="line-number"> 89</span>            data = <span class="function">next</span>(<span class="function">iter</span>(kwargs.<span class="function">values</span>()))
</div>
<div class="line-uncovered">
<span class="line-number"> 90</span>            <span class=<span class="string">"keyword"</span>>for</span> key, value <span class=<span class="string">"keyword"</span>>in</span> data.<span class="function">items</span>():
</div>
<div class="line-uncovered">
<span class="line-number"> 91</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="function">hasattr</span>(self, key):
</div>
<div class="line-uncovered">
<span class="line-number"> 92</span>                    <span class="function">setattr</span>(self, key, value)
</div>
<div class="line-context">
<span class="line-number"> 93</span>        <span class=<span class="string">"keyword"</span>>else</span>:
</div>
<div class="line-context">
<span class="line-number"> 94</span>            <span class="comment"># Handle normal keyword arguments</span>
</div>
<div class="line-context">
<span class="line-number"> 95</span>            <span class=<span class="string">"keyword"</span>>for</span> key, value <span class=<span class="string">"keyword"</span>>in</span> kwargs.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number"> 96</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="function">hasattr</span>(self, key):
</div>
<div class="line-context">
<span class="line-number"> 97</span>                    <span class="function">setattr</span>(self, key, value)
</div>
<div class="line-context">
<span class="line-number"> 98</span>
</div>
<div class="line-context">
<span class="line-number"> 99</span>        <span class="comment"># Compile patterns after initialization</span>
</div>
<div class="line-context">
<span class="line-number">100</span>        self.<span class="function">_compile_patterns</span>()
</div>
<div class="line-context">
<span class="line-number">101</span>
</div>
<div class="line-context">
<span class="line-number">102</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
</div>
<h4>Line 104</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number"> 94</span>            <span class="comment"># Handle normal keyword arguments</span>
</div>
<div class="line-context">
<span class="line-number"> 95</span>            <span class=<span class="string">"keyword"</span>>for</span> key, value <span class=<span class="string">"keyword"</span>>in</span> kwargs.<span class="function">items</span>():
</div>
<div class="line-context">
<span class="line-number"> 96</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class="function">hasattr</span>(self, key):
</div>
<div class="line-context">
<span class="line-number"> 97</span>                    <span class="function">setattr</span>(self, key, value)
</div>
<div class="line-context">
<span class="line-number"> 98</span>
</div>
<div class="line-context">
<span class="line-number"> 99</span>        <span class="comment"># Compile patterns after initialization</span>
</div>
<div class="line-context">
<span class="line-number">100</span>        self.<span class="function">_compile_patterns</span>()
</div>
<div class="line-context">
<span class="line-number">101</span>
</div>
<div class="line-context">
<span class="line-number">102</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__post_init__</span>(self):
</div>
<div class="line-context">
<span class="line-number">103</span>        <span class="string">""</span><span class="string">"Compile regex patterns after initialization"</span><span class="string">""</span>
</div>
<div class="line-uncovered">
<span class="line-number">104</span>        self.<span class="function">_compile_patterns</span>()
</div>
<div class="line-context">
<span class="line-number">105</span>
</div>
<div class="line-context">
<span class="line-number">106</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_compile_patterns</span>(self):
</div>
<div class="line-context">
<span class="line-number">107</span>        <span class="string">""</span><span class="string">"Compile regex patterns <span class="</span>keyword<span class="string">">for</span> filtering"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">108</span>        <span class="comment"># Compile file filter patterns <span class=<span class="string">"keyword"</span>>with</span> error handling</span>
</div>
<div class="line-context">
<span class="line-number">109</span>        self.file_include_patterns = []
</div>
<div class="line-context">
<span class="line-number">110</span>        <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> self.file_filters.<span class="function">get</span>(<span class="string">"include"</span>, []):
</div>
<div class="line-context">
<span class="line-number">111</span>            <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">112</span>                self.file_include_patterns.<span class="function">append</span>(re.<span class="function">compile</span>(pattern))
</div>
<div class="line-context">
<span class="line-number">113</span>            <span class=<span class="string">"keyword"</span>>except</span> re.error <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">114</span>                self.logger.<span class="function">warning</span>(<span class="string">"Invalid include pattern <span class="string">'%s'</span>: %s"</span>, pattern, e)
</div>
</div>
<h4>Lines 148-149</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">138</span>                        <span class="string">"Invalid %s include pattern <span class="string">'%s'</span>: %s"</span>, element_type, pattern, e
</div>
<div class="line-context">
<span class="line-number">139</span>                    )
</div>
<div class="line-context">
<span class="line-number">140</span>                    <span class="comment"># Skip invalid patterns</span>
</div>
<div class="line-context">
<span class="line-number">141</span>
</div>
<div class="line-context">
<span class="line-number">142</span>            self.element_exclude_patterns[element_type] = []
</div>
<div class="line-context">
<span class="line-number">143</span>            <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> filters.<span class="function">get</span>(<span class="string">"exclude"</span>, []):
</div>
<div class="line-context">
<span class="line-number">144</span>                <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">145</span>                    self.element_exclude_patterns[element_type].<span class="function">append</span>(
</div>
<div class="line-context">
<span class="line-number">146</span>                        re.<span class="function">compile</span>(pattern)
</div>
<div class="line-context">
<span class="line-number">147</span>                    )
</div>
<div class="line-uncovered">
<span class="line-number">148</span>                <span class=<span class="string">"keyword"</span>>except</span> re.error <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">149</span>                    self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">150</span>                        <span class="string">"Invalid %s exclude pattern <span class="string">'%s'</span>: %s"</span>, element_type, pattern, e
</div>
<div class="line-context">
<span class="line-number">151</span>                    )
</div>
<div class="line-context">
<span class="line-number">152</span>                    <span class="comment"># Skip invalid patterns</span>
</div>
<div class="line-context">
<span class="line-number">153</span>
</div>
<div class="line-context">
<span class="line-number">154</span>    @classmethod
</div>
<div class="line-context">
<span class="line-number">155</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">load</span>(cls, config_file: str) -> <span class="string">"Config"</span>:
</div>
<div class="line-context">
<span class="line-number">156</span>        <span class="string">""</span><span class="string">"Load configuration <span class="</span>keyword<span class="string">">from</span> JSON file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">157</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">Path</span>(config_file).<span class="function">exists</span>():
</div>
<div class="line-context">
<span class="line-number">158</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">FileNotFoundError</span>(f<span class="string">"Configuration file <span class="</span>keyword<span class="string">">not</span> found: {config_file}"</span>)
</div>
<div class="line-context">
<span class="line-number">159</span>
</div>
</div>
<h4>Line 158</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">148</span>                <span class=<span class="string">"keyword"</span>>except</span> re.error <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">149</span>                    self.logger.<span class="function">warning</span>(
</div>
<div class="line-context">
<span class="line-number">150</span>                        <span class="string">"Invalid %s exclude pattern <span class="string">'%s'</span>: %s"</span>, element_type, pattern, e
</div>
<div class="line-context">
<span class="line-number">151</span>                    )
</div>
<div class="line-context">
<span class="line-number">152</span>                    <span class="comment"># Skip invalid patterns</span>
</div>
<div class="line-context">
<span class="line-number">153</span>
</div>
<div class="line-context">
<span class="line-number">154</span>    @classmethod
</div>
<div class="line-context">
<span class="line-number">155</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">load</span>(cls, config_file: str) -> <span class="string">"Config"</span>:
</div>
<div class="line-context">
<span class="line-number">156</span>        <span class="string">""</span><span class="string">"Load configuration <span class="</span>keyword<span class="string">">from</span> JSON file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">157</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">Path</span>(config_file).<span class="function">exists</span>():
</div>
<div class="line-uncovered">
<span class="line-number">158</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">FileNotFoundError</span>(f<span class="string">"Configuration file <span class="</span>keyword<span class="string">">not</span> found: {config_file}"</span>)
</div>
<div class="line-context">
<span class="line-number">159</span>
</div>
<div class="line-context">
<span class="line-number">160</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">161</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(config_file, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number">162</span>                data = json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number">163</span>
</div>
<div class="line-context">
<span class="line-number">164</span>            <span class="comment"># Handle backward compatibility: project_roots -> source_folders</span>
</div>
<div class="line-context">
<span class="line-number">165</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"project_roots"</span> <span class=<span class="string">"keyword"</span>>in</span> data <span class=<span class="string">"keyword"</span>>and</span> <span class="string">"source_folders"</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> data:
</div>
<div class="line-context">
<span class="line-number">166</span>                data[<span class="string">"source_folders"</span>] = data.<span class="function">pop</span>(<span class="string">"project_roots"</span>)
</div>
<div class="line-context">
<span class="line-number">167</span>
</div>
<div class="line-context">
<span class="line-number">168</span>            <span class="comment"># Validate required fields</span>
</div>
</div>
<h4>Line 166</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">156</span>        <span class="string">""</span><span class="string">"Load configuration <span class="</span>keyword<span class="string">">from</span> JSON file"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">157</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">Path</span>(config_file).<span class="function">exists</span>():
</div>
<div class="line-context">
<span class="line-number">158</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">FileNotFoundError</span>(f<span class="string">"Configuration file <span class="</span>keyword<span class="string">">not</span> found: {config_file}"</span>)
</div>
<div class="line-context">
<span class="line-number">159</span>
</div>
<div class="line-context">
<span class="line-number">160</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">161</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(config_file, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number">162</span>                data = json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number">163</span>
</div>
<div class="line-context">
<span class="line-number">164</span>            <span class="comment"># Handle backward compatibility: project_roots -> source_folders</span>
</div>
<div class="line-context">
<span class="line-number">165</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"project_roots"</span> <span class=<span class="string">"keyword"</span>>in</span> data <span class=<span class="string">"keyword"</span>>and</span> <span class="string">"source_folders"</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> data:
</div>
<div class="line-uncovered">
<span class="line-number">166</span>                data[<span class="string">"source_folders"</span>] = data.<span class="function">pop</span>(<span class="string">"project_roots"</span>)
</div>
<div class="line-context">
<span class="line-number">167</span>
</div>
<div class="line-context">
<span class="line-number">168</span>            <span class="comment"># Validate required fields</span>
</div>
<div class="line-context">
<span class="line-number">169</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"source_folders"</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> data:
</div>
<div class="line-context">
<span class="line-number">170</span>                <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Configuration must contain <span class="string">'source_folders'</span> field"</span>)
</div>
<div class="line-context">
<span class="line-number">171</span>
</div>
<div class="line-context">
<span class="line-number">172</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(data[<span class="string">"source_folders"</span>], list):
</div>
<div class="line-context">
<span class="line-number">173</span>                <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"<span class="string">'source_folders'</span> must be a list"</span>)
</div>
<div class="line-context">
<span class="line-number">174</span>
</div>
<div class="line-context">
<span class="line-number">175</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">cls</span>(**data)
</div>
<div class="line-context">
<span class="line-number">176</span>
</div>
</div>
<h4>Line 170</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">160</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">161</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(config_file, <span class="string">"r"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number">162</span>                data = json.<span class="function">load</span>(f)
</div>
<div class="line-context">
<span class="line-number">163</span>
</div>
<div class="line-context">
<span class="line-number">164</span>            <span class="comment"># Handle backward compatibility: project_roots -> source_folders</span>
</div>
<div class="line-context">
<span class="line-number">165</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"project_roots"</span> <span class=<span class="string">"keyword"</span>>in</span> data <span class=<span class="string">"keyword"</span>>and</span> <span class="string">"source_folders"</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> data:
</div>
<div class="line-context">
<span class="line-number">166</span>                data[<span class="string">"source_folders"</span>] = data.<span class="function">pop</span>(<span class="string">"project_roots"</span>)
</div>
<div class="line-context">
<span class="line-number">167</span>
</div>
<div class="line-context">
<span class="line-number">168</span>            <span class="comment"># Validate required fields</span>
</div>
<div class="line-context">
<span class="line-number">169</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"source_folders"</span> <span class=<span class="string">"keyword"</span>>not</span> <span class=<span class="string">"keyword"</span>>in</span> data:
</div>
<div class="line-uncovered">
<span class="line-number">170</span>                <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"Configuration must contain <span class="string">'source_folders'</span> field"</span>)
</div>
<div class="line-context">
<span class="line-number">171</span>
</div>
<div class="line-context">
<span class="line-number">172</span>            <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(data[<span class="string">"source_folders"</span>], list):
</div>
<div class="line-context">
<span class="line-number">173</span>                <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(<span class="string">"<span class="string">'source_folders'</span> must be a list"</span>)
</div>
<div class="line-context">
<span class="line-number">174</span>
</div>
<div class="line-context">
<span class="line-number">175</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class="function">cls</span>(**data)
</div>
<div class="line-context">
<span class="line-number">176</span>
</div>
<div class="line-context">
<span class="line-number">177</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-context">
<span class="line-number">178</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number">179</span>                f<span class="string">"Failed to load configuration <span class="</span>keyword<span class="string">">from</span> {config_file}: {e}"</span>
</div>
<div class="line-context">
<span class="line-number">180</span>            ) <span class=<span class="string">"keyword"</span>>from</span> e
</div>
</div>
<h4>Lines 199-200</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">189</span>            <span class="string">"recursive_search"</span>: self.recursive_search,
</div>
<div class="line-context">
<span class="line-number">190</span>            <span class="string">"include_depth"</span>: self.include_depth,
</div>
<div class="line-context">
<span class="line-number">191</span>            <span class="string">"file_filters"</span>: self.file_filters,
</div>
<div class="line-context">
<span class="line-number">192</span>            <span class="string">"element_filters"</span>: self.element_filters,
</div>
<div class="line-context">
<span class="line-number">193</span>            <span class="string">"transformations"</span>: self.transformations,
</div>
<div class="line-context">
<span class="line-number">194</span>        }
</div>
<div class="line-context">
<span class="line-number">195</span>
</div>
<div class="line-context">
<span class="line-number">196</span>        <span class=<span class="string">"keyword"</span>>try</span>:
</div>
<div class="line-context">
<span class="line-number">197</span>            <span class=<span class="string">"keyword"</span>>with</span> <span class="function">open</span>(config_file, <span class="string">"w"</span>, encoding=<span class="string">"utf-<span class="number">8</span>"</span>) <span class=<span class="string">"keyword"</span>>as</span> f:
</div>
<div class="line-context">
<span class="line-number">198</span>                json.<span class="function">dump</span>(data, f, indent=<span class="number">2</span>, ensure_ascii=<span class=<span class="string">"keyword"</span>>False</span>)
</div>
<div class="line-uncovered">
<span class="line-number">199</span>        <span class=<span class="string">"keyword"</span>>except</span> Exception <span class=<span class="string">"keyword"</span>>as</span> e:
</div>
<div class="line-uncovered">
<span class="line-number">200</span>            <span class=<span class="string">"keyword"</span>>raise</span> <span class="function">ValueError</span>(
</div>
<div class="line-context">
<span class="line-number">201</span>                f<span class="string">"Failed to save configuration to {config_file}: {e}"</span>
</div>
<div class="line-context">
<span class="line-number">202</span>            ) <span class=<span class="string">"keyword"</span>>from</span> e
</div>
<div class="line-context">
<span class="line-number">203</span>
</div>
<div class="line-context">
<span class="line-number">204</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">has_filters</span>(self) -> bool:
</div>
<div class="line-context">
<span class="line-number">205</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> configuration has any filters defined"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">206</span>        <span class=<span class="string">"keyword"</span>>return</span> <span class="function">bool</span>(self.file_filters <span class=<span class="string">"keyword"</span>>or</span> self.element_filters)
</div>
<div class="line-context">
<span class="line-number">207</span>
</div>
<div class="line-context">
<span class="line-number">208</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">_should_include_file</span>(self, file_path: str) -> bool:
</div>
<div class="line-context">
<span class="line-number">209</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> a file should be included based on filters"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">210</span>        <span class="comment"># Check exclude patterns first</span>
</div>
</div>
<h4>Line 260</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">250</span>            )
</div>
<div class="line-context">
<span class="line-number">251</span>
</div>
<div class="line-context">
<span class="line-number">252</span>        <span class="comment"># Filter enums</span>
</div>
<div class="line-context">
<span class="line-number">253</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"enums"</span> <span class=<span class="string">"keyword"</span>>in</span> self.element_filters:
</div>
<div class="line-context">
<span class="line-number">254</span>            filtered_model.enums = self.<span class="function">_filter_dict</span>(
</div>
<div class="line-context">
<span class="line-number">255</span>                filtered_model.enums, self.element_filters[<span class="string">"enums"</span>]
</div>
<div class="line-context">
<span class="line-number">256</span>            )
</div>
<div class="line-context">
<span class="line-number">257</span>
</div>
<div class="line-context">
<span class="line-number">258</span>        <span class="comment"># Filter unions</span>
</div>
<div class="line-context">
<span class="line-number">259</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"unions"</span> <span class=<span class="string">"keyword"</span>>in</span> self.element_filters:
</div>
<div class="line-uncovered">
<span class="line-number">260</span>            filtered_model.unions = self.<span class="function">_filter_dict</span>(
</div>
<div class="line-context">
<span class="line-number">261</span>                filtered_model.unions, self.element_filters[<span class="string">"unions"</span>]
</div>
<div class="line-context">
<span class="line-number">262</span>            )
</div>
<div class="line-context">
<span class="line-number">263</span>
</div>
<div class="line-context">
<span class="line-number">264</span>        <span class="comment"># Filter functions</span>
</div>
<div class="line-context">
<span class="line-number">265</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class="string">"functions"</span> <span class=<span class="string">"keyword"</span>>in</span> self.element_filters:
</div>
<div class="line-context">
<span class="line-number">266</span>            filtered_model.functions = self.<span class="function">_filter_list</span>(
</div>
<div class="line-context">
<span class="line-number">267</span>                filtered_model.functions,
</div>
<div class="line-context">
<span class="line-number">268</span>                self.element_filters[<span class="string">"functions"</span>],
</div>
<div class="line-context">
<span class="line-number">269</span>                key=<span class=<span class="string">"keyword"</span>>lambda</span> f: f.name,
</div>
<div class="line-context">
<span class="line-number">270</span>            )
</div>
</div>
<h4>Lines 361-362</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">351</span>                    <span class=<span class="string">"keyword"</span>>if</span> pattern.<span class="function">search</span>(name):
</div>
<div class="line-context">
<span class="line-number">352</span>                        should_include = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">353</span>                        <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">354</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> should_include:
</div>
<div class="line-context">
<span class="line-number">355</span>                    <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">356</span>
</div>
<div class="line-context">
<span class="line-number">357</span>            <span class="comment"># Check exclude patterns</span>
</div>
<div class="line-context">
<span class="line-number">358</span>            should_exclude = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">359</span>            <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> exclude_patterns:
</div>
<div class="line-context">
<span class="line-number">360</span>                <span class=<span class="string">"keyword"</span>>if</span> pattern.<span class="function">search</span>(name):
</div>
<div class="line-uncovered">
<span class="line-number">361</span>                    should_exclude = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-uncovered">
<span class="line-number">362</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">363</span>            <span class=<span class="string">"keyword"</span>>if</span> should_exclude:
</div>
<div class="line-context">
<span class="line-number">364</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">365</span>
</div>
<div class="line-context">
<span class="line-number">366</span>            filtered_items.<span class="function">append</span>(item)
</div>
<div class="line-context">
<span class="line-number">367</span>
</div>
<div class="line-context">
<span class="line-number">368</span>        <span class=<span class="string">"keyword"</span>>return</span> filtered_items
</div>
<div class="line-context">
<span class="line-number">369</span>
</div>
<div class="line-context">
<span class="line-number">370</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_summary</span>(self) -> Dict[str, Any]:
</div>
<div class="line-context">
<span class="line-number">371</span>        <span class="string">""</span><span class="string">"Get a summary of the configuration"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">372</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
</div>
<h4>Line 364</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">354</span>                <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> should_include:
</div>
<div class="line-context">
<span class="line-number">355</span>                    <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">356</span>
</div>
<div class="line-context">
<span class="line-number">357</span>            <span class="comment"># Check exclude patterns</span>
</div>
<div class="line-context">
<span class="line-number">358</span>            should_exclude = <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">359</span>            <span class=<span class="string">"keyword"</span>>for</span> pattern <span class=<span class="string">"keyword"</span>>in</span> exclude_patterns:
</div>
<div class="line-context">
<span class="line-number">360</span>                <span class=<span class="string">"keyword"</span>>if</span> pattern.<span class="function">search</span>(name):
</div>
<div class="line-context">
<span class="line-number">361</span>                    should_exclude = <span class=<span class="string">"keyword"</span>>True</span>
</div>
<div class="line-context">
<span class="line-number">362</span>                    <span class=<span class="string">"keyword"</span>>break</span>
</div>
<div class="line-context">
<span class="line-number">363</span>            <span class=<span class="string">"keyword"</span>>if</span> should_exclude:
</div>
<div class="line-uncovered">
<span class="line-number">364</span>                <span class=<span class="string">"keyword"</span>>continue</span>
</div>
<div class="line-context">
<span class="line-number">365</span>
</div>
<div class="line-context">
<span class="line-number">366</span>            filtered_items.<span class="function">append</span>(item)
</div>
<div class="line-context">
<span class="line-number">367</span>
</div>
<div class="line-context">
<span class="line-number">368</span>        <span class=<span class="string">"keyword"</span>>return</span> filtered_items
</div>
<div class="line-context">
<span class="line-number">369</span>
</div>
<div class="line-context">
<span class="line-number">370</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">get_summary</span>(self) -> Dict[str, Any]:
</div>
<div class="line-context">
<span class="line-number">371</span>        <span class="string">""</span><span class="string">"Get a summary of the configuration"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">372</span>        <span class=<span class="string">"keyword"</span>>return</span> {
</div>
<div class="line-context">
<span class="line-number">373</span>            <span class="string">"project_name"</span>: self.project_name,
</div>
<div class="line-context">
<span class="line-number">374</span>            <span class="string">"source_folders"</span>: self.source_folders,
</div>
</div>
<h4>Line 386</h4>
<div class="code-block">
<div class="line-context">
<span class="line-number">376</span>            <span class="string">"recursive_search"</span>: self.recursive_search,
</div>
<div class="line-context">
<span class="line-number">377</span>            <span class="string">"include_depth"</span>: self.include_depth,
</div>
<div class="line-context">
<span class="line-number">378</span>            <span class="string">"has_file_filters"</span>: <span class="function">bool</span>(self.file_filters),
</div>
<div class="line-context">
<span class="line-number">379</span>            <span class="string">"has_element_filters"</span>: <span class="function">bool</span>(self.element_filters),
</div>
<div class="line-context">
<span class="line-number">380</span>            <span class="string">"has_transformations"</span>: <span class="function">bool</span>(self.transformations),
</div>
<div class="line-context">
<span class="line-number">381</span>        }
</div>
<div class="line-context">
<span class="line-number">382</span>
</div>
<div class="line-context">
<span class="line-number">383</span>    <span <span class=<span class="string">"keyword"</span>>class</span>=<span class="string">"keyword"</span>>def</span> <span class="function">__eq__</span>(self, other: Any) -> bool:
</div>
<div class="line-context">
<span class="line-number">384</span>        <span class="string">""</span><span class="string">"Check <span class="</span>keyword<span class="string">">if</span> two configurations are equal"</span><span class="string">""</span>
</div>
<div class="line-context">
<span class="line-number">385</span>        <span class=<span class="string">"keyword"</span>>if</span> <span class=<span class="string">"keyword"</span>>not</span> <span class="function">isinstance</span>(other, Config):
</div>
<div class="line-uncovered">
<span class="line-number">386</span>            <span class=<span class="string">"keyword"</span>>return</span> <span class=<span class="string">"keyword"</span>>False</span>
</div>
<div class="line-context">
<span class="line-number">387</span>
</div>
<div class="line-context">
<span class="line-number">388</span>        <span class=<span class="string">"keyword"</span>>return</span> (
</div>
<div class="line-context">
<span class="line-number">389</span>            self.project_name == other.project_name
</div>
<div class="line-context">
<span class="line-number">390</span>            <span class=<span class="string">"keyword"</span>>and</span> self.source_folders == other.source_folders
</div>
<div class="line-context">
<span class="line-number">391</span>            <span class=<span class="string">"keyword"</span>>and</span> self.output_dir == other.output_dir
</div>
<div class="line-context">
<span class="line-number">392</span>            <span class=<span class="string">"keyword"</span>>and</span> self.model_output_path == other.model_output_path
</div>
<div class="line-context">
<span class="line-number">393</span>            <span class=<span class="string">"keyword"</span>>and</span> self.recursive_search == other.recursive_search
</div>
<div class="line-context">
<span class="line-number">394</span>            <span class=<span class="string">"keyword"</span>>and</span> self.include_depth == other.include_depth
</div>
<div class="line-context">
<span class="line-number">395</span>            <span class=<span class="string">"keyword"</span>>and</span> self.file_filters == other.file_filters
</div>
<div class="line-context">
<span class="line-number">396</span>            <span class=<span class="string">"keyword"</span>>and</span> self.element_filters == other.element_filters
</div>
</div>
</div>
<div class="recommendations">
<h3>üí° Recommendations</h3>
<ul>
<li><strong>Focus on low coverage files:</strong>
<ul>
<li>/workspace/c_to_plantuml/main.py: 53.61% coverage (45 missing lines)</li>
<li>/workspace/c_to_plantuml/utils.py: 61.19% coverage (26 missing lines)</li>
<li>/workspace/c_to_plantuml/preprocessor.py: 65.76% coverage (101 missing lines)</li>
</ul></li>
<li><strong>Add edge case tests:</strong> Many uncovered lines appear to be error handling and edge cases</li>
<li><strong>Test command-line interface:</strong> The main function and argument parsing are largely uncovered</li>
</ul>
</div>
<a href="summary.html" class="back-link">‚Üê Back to Test Summary</a>

    </div>
    <div class="footer">
        <p>Generated by Test Report System</p>
    </div>
</body>
</html>