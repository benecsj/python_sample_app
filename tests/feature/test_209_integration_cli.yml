test:
  name: Integration CLI Complete Workflow
  description: "End-to-end parse \u2192 transform \u2192 generate with simple project"
  category: feature
  id: '209'
---
source_files:
  main.c: |
    #include <stdio.h>n#include "config.h"nn#define MAX_SIZE 100nntypedef
         struct Person {n    char name[50];n    int age;n} Person;nnenum Status
         {n    OK,n    ERRORn};nnint global_var = 42;nnint main() {n    printf("
        Hello, World!
    ");n    return 0;n}nnvoid process_data(void* data) { }n
  config.h: |
    #ifndef CONFIG_H
    #define CONFIG_H
    
    #define CONFIG_VERSION "1.0.0"\
        
    
    typedef struct {
        int id;
        char name[100];
    } User;
    
    enum Color\
        \ {
        RED,
        GREEN,
        BLUE
    };
    
    void init_config(void);
    
    #endif
    
---
config.json: |
  {
    "project_name": "integration_cli_project",
    "source_folders"\
    : ["."],
    "output_dir": "./output",
    "recursive_search": true,
    "\
    include_depth": 2
  }
  
---
assertions:
  execution:
    exit_code: 0
    max_execution_time: 60.0
  model:
    validate_structure: true
    expected_files:
    - main.c
    - config.h
    functions_exist:
    - main
    structs_exist:
    - Person
    - User
    enums_exist:
    - Status
    - Color
    macros_exist:
    - MAX_SIZE
    - CONFIG_VERSION
    includes_exist:
    - stdio.h
    - config.h
  puml:
    syntax_valid: true
