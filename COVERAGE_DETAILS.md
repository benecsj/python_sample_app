# Detailed Coverage Reports

This project now includes enhanced coverage reporting capabilities that generate detailed per-file coverage reports showing exactly which lines are covered by tests and which are not.

## Features

### 1. Per-File Coverage Reports
- **Line-by-line analysis**: See exactly which lines are covered (✓), missing (✗), or excluded (—)
- **Coverage statistics**: Get coverage percentage, total statements, covered lines, and missing lines for each file
- **Missing lines summary**: Grouped ranges of missing lines for easy identification

### 2. Two Report Formats

#### HTML Reports (Recommended)
Beautiful, interactive HTML reports with:
- Syntax highlighting for Python code
- Color-coded coverage indicators
- Interactive filtering by coverage level
- Overall project statistics dashboard
- Responsive design for easy viewing

#### Text Reports
Plain text reports with:
- Line-by-line coverage status
- ASCII indicators for coverage status
- Easy to read in terminal or text editors
- Suitable for CI/CD pipelines

## Usage

### Automatic Generation
When you run the test suite with coverage using `./run_tests_with_coverage.sh`, detailed reports are automatically generated in the `tests/reports/detailed-coverage/` directory.

### Manual Generation

#### Generate HTML Reports
```bash
python3 generate_detailed_coverage_html.py --output-dir tests/reports/detailed-coverage
```

#### Generate Text Reports
```bash
python3 generate_detailed_coverage.py --output-dir tests/reports/detailed-coverage-text
```

### Options
- `--output-dir`: Specify the output directory for reports (default: `tests/reports/detailed-coverage`)
- `--source-dir`: Specify the source directory to analyze (default: `c_to_plantuml`)
- `--run-tests`: Run tests with coverage before generating reports (text version only)

## Report Structure

### HTML Reports
- `index.html`: Main dashboard with overall statistics and links to all file reports
- `<filename>.html`: Individual file coverage report with syntax highlighting

### Text Reports
- `index.html`: Simple HTML index listing all text reports
- `<filename>.coverage.txt`: Individual file coverage report in plain text

## Example Output

### HTML Report Features
- **Coverage Bar**: Visual representation of coverage percentage
- **File List**: Sortable and filterable list of all analyzed files
- **Coverage Filters**: Quick filters for low (<60%), medium (60-80%), and high (>80%) coverage
- **Line Status**: Color-coded lines showing covered (green), missing (red), and excluded (gray)

### Text Report Format
```
Coverage Report for: c_to_plantuml/utils.py
Generated: 2025-07-25 21:11:25
================================================================================

Summary:
  Total statements: 68
  Covered lines: 38
  Missing lines: 30
  Excluded lines: 0
  Coverage: 55.9%

Line-by-Line Analysis:
--------------------------------------------------------------------------------
Status | Line # | Code
--------------------------------------------------------------------------------
       |      1 | #!/usr/bin/env python3
✓ COV  |      2 | """
       |      3 | Utility functions for C to PlantUML converter
...
```

## Integration with CI/CD

The detailed coverage reports are automatically generated as part of the GitHub Actions workflow and can be accessed through the GitHub Pages deployment.

## Benefits

1. **Identify untested code**: Quickly see which specific lines need test coverage
2. **Track coverage improvements**: Monitor how coverage changes over time
3. **Code review assistance**: Use reports during code reviews to ensure new code is tested
4. **Test planning**: Identify areas that need more comprehensive testing
5. **Quality metrics**: Get detailed metrics for each module and the overall project

## Technical Details

The coverage report generators use the Python `coverage` module's JSON output to analyze which lines were executed during tests. The reports are generated by:

1. Running tests with coverage enabled
2. Exporting coverage data to JSON format
3. Parsing the JSON to extract line-level coverage information
4. Generating formatted reports with visual indicators

The HTML reports include basic syntax highlighting for Python code to improve readability.